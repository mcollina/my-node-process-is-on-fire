
      <!DOCTYPE html>
      <html lang="en">
      <meta charset="utf8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Clinic Doctor</title>

      <style>
/* Define colors */
html {
  --main-bg-color: rgb(27, 30, 39);

  --banner-logo-color: rgba(255, 255, 255, 0.94);
  --banner-bg-color: rgb(41, 45, 57);

  --alert-border-color: rgb(68, 75, 96);
  --alert-bg-color: rgb(55, 61, 79);
  --alert-text-color: rgb(255, 255, 255);
  --alert-button-color: rgb(200, 201, 203);
  --alert-indicator-color: rgb(233, 67, 100);

  --menu-button-color: rgb(200, 201, 203);

  --graph-text-color: rgb(255, 255, 255);
  --graph-bg-color: rgb(27, 30, 39);
  --graph-interval-color: rgba(255, 255, 255, 0.05);
  --graph-axis-color: rgb(89, 90, 95);
  --graph-tick-color: rgb(151, 151, 151);
  --graph-good-line-color: rgb(74, 144, 226);
  --graph-bad-line-color: rgb(233, 67, 100);
  --graph-alert-color: rgb(233, 67, 100);

  --hover-text-color: rgb(255, 255, 255);
  --hover-bg-color: rgba(82, 87, 111, 0.92);
  --hover-line-color: rgb(100, 107, 127);

  --recommendbar-text-color: rgb(255, 255, 255);
  --recommendbar-arrow-color: rgb(231, 239, 248);
  --recommendbar-top-line-color: rgb(96, 147, 208);
  --recommendbar-bg-color: rgb(63, 125, 198);

  --recommend-text-color: rgb(255, 255, 255);
  --recommend-title-bg-color: rgba(0, 0, 0, 0.15);
  --recommend-link-color: rgb(62, 167, 244);
  --recommend-close-color: rgb(62, 167, 244);
  --recommend-menu-selected-color: rgb(63, 125, 198);
  --recommend-menu-alert-color: rgb(233, 67, 100);
  --recommend-bg-color: rgba(55, 61, 79, 0.99);

  --article-menu-color: rgb(27, 30, 39);

  --special-scrollbar-bg: rgba(255, 255, 255, .5);
  --special-scrollbar-shadow: rgba(0, 0, 0, .5);
}

html.light-theme {
  --main-bg-color: rgb(239, 239, 239);

  --banner-bg-color: rgb(65, 69, 85);

  --alert-bg-color: rgb(227, 227, 227);
  --alert-border-color: rgb(189, 189, 189);
  --alert-text-color: rgb(101, 101, 101);
  --alert-button-color: rgb(123, 128, 146);

  --menu-button-color: rgb(123, 128, 146);

  --graph-text-color: rgb(101, 101, 101);
  --graph-bg-color: rgb(227, 227, 227);
  --graph-interval-color: rgba(0, 0, 0, 0.1);
  --graph-axis-color: rgb(189, 189, 189);

  --recommend-text-color: rgb(20, 20, 20);
  --recommend-link-color: rgb(31, 91, 162);
  --recommend-close-color: rgb(63, 125, 198);
  --recommend-bg-color: rgb(209, 211, 218);

  --special-scrollbar-bg: rgba(0, 0, 0, .5);
  --special-scrollbar-shadow: rgba(255, 255, 255, .5);

  --article-menu-color: rgb(227, 227, 227);
}

/* Main layout */

/* z-index: 1; is the hover boxes */
/* z-index: 2; is the recommendation view */

html, body {
  border: 0;
  margin: 0;
  padding: 0;
}

body {
  background: var(--main-bg-color);
  overflow-x: hidden; /* Hover box padding can overflow. Scrollbar appearing moves recommendation box. */ 
                      /* If that causes mouse to leave hover area, scrollbar flashes on and off in loop. */
}

.recommendation-open body.read-more-open {
  overflow-y: hidden;
}

#front-matter {
  display: flex;
  align-items: flex-start;
  margin: 22px 45px 24px 49px;
  overflow: hidden;
}

#front-matter #alert {
  flex: 1 1 0px;
  min-width: 0; /* don't consider children for min-width calculation */
}

#front-matter #menu {
  flex: 0 0 auto;
  height: 24px;
  width: 80px;
  margin-top: 5px;
}

#graph {
  display: grid;
  grid-template-columns: 100%;
  grid-template-rows: 200px 200px 200px 200px;
  grid-template-areas:
    "cpu"
    "memory"
    "delay"
    "handles";
  grid-column-gap: 20px;
  grid-row-gap: 50px;
  margin-right: 20px;
}

html.grid-layout #graph {
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 200px 200px;
  grid-template-areas:
    "cpu memory"
    "delay handles";
}

#graph .sub-graph.cpu {
  grid-area: cpu;
}

#graph .sub-graph.memory {
  grid-area: memory;
}

#graph .sub-graph.delay {
  grid-area: delay;
}

#graph .sub-graph.handles {
  grid-area: handles;
}

/* Global Typography */

html {
  font-family: sans-serif;
}

html #banner, html #front-matter, html #graph, html #graph .hover text, html #recommendation .details {
  /* light text on dark background doesn't look so good in the browser compared
     to graphical design tools. This is because graphical design tools uses
     antialiasing, where browsers uses subpixel rendering. To make it look
     like in the design tool, use antialiased font rendering. More details,
     especially on why this is a bad idea:
       http://usabilitypost.com/2012/11/05/stop-fixing-font-smoothing/
  */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

html.light-theme #front-matter, html.light-theme #graph, html.light-theme #recommendation .details {
  -webkit-font-smoothing: unset;
  -moz-osx-font-smoothing: unset;
}

/* Banner layout */
#banner {
  display: flex;
  align-items: center;
  height: 65px;
  background: var(--banner-bg-color);
  position: relative;
}

#banner svg {
  fill: var(--banner-logo-color);
  margin-left: 28px;
}

#banner svg:last-child {
  position: absolute;
  height: 40px;
  right: 28px;
  top: 13px;
}

/* Menu layout */

#alert {
  border: 1px solid var(--alert-border-color);
  border-radius: 4px;
  background: var(--alert-bg-color);
  color: var(--alert-text-color);
  padding: 5px 13px;
  min-height: 22px; /* just for reducing the initial draw blink */
  max-height: 22px;
  transition: max-height 0.15s;
}

#alert.open {
  max-height: 10em;
}

#alert .summary {
  display: flex;
  height: 22px;
  align-items: center;
}

#alert .summary svg.alert {
  display: none;
  flex: 0 0 auto;
  height: 18px;
  width: 18px;
  fill: var(--alert-indicator-color);
}
#alert.has-issue .summary svg.alert {
  display: block;
}

#alert .summary .title {
  flex: 1 1 0px;
  padding: 0 8px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}

#alert .summary .title::before {
  content: 'Detected ';
}

#alert .summary .toggle {
  display: none;
  flex: 0 0 auto;
  /* crop empty space in the svg icon */
  position: relative;
  width: 22px;
  height: 22px;
  overflow: hidden;

  cursor: pointer;
}
#alert.has-issue .summary .toggle {
  display: block;
}

#alert .summary .toggle svg {
  /* crop empty space in the svg icon */
  position: absolute;
  top: -8px;
  left: -8px;
  width: 38px;
  height: 38px;

  fill: var(--alert-button-color);
}
#alert .summary .toggle svg.arrow-down {
  top: -6px;
}

#alert:not(.open) .summary .toggle svg.arrow-up { display: none; }
#alert.open .summary .toggle svg.arrow-down { display: none; }

#alert ul.details {
  margin: 8px 0 0 0;
  padding: 0;
  list-style: none;
}

#alert ul.details li {
  padding: 5px 0px;
  cursor: pointer;
}

#alert ul.details li::before {
  display: inline-block;
  width: 18px;
  content: '•';
  padding: 0 2px 0 6px;
}

#menu .toggle {
  float: right;
  cursor: pointer;
  height: 16px;
  padding: 4px;
  margin-left: 10px;
}

#menu svg {
  fill: var(--menu-button-color);
}

#toggle-grid svg {
  height: 16px;
  width: 16px;
}
html:not(.grid-layout) #toggle-grid svg.grid-1x4 { display: none; }
html.grid-layout #toggle-grid svg.grid-2x2 { display: none; }

svg#toggle-theme {
  height: 16px;
  width: 20px;
}

/* recommendation layout */
/* structual: the recommendation structual layout is rather complex, thus
   is is seperated here. The styleing layout follows bellow. */
#recommendation {
  display: flex;
  position: fixed;
  bottom: 0;
  z-index: 2;
  max-height: calc(100vh - 65px); /* 100% - #banner[height] */
  width: 100%;

  flex-direction: column;
  justify-content: flex-end;
  align-items: stretch;
}

#recommendation .details {
  flex: 0 1 auto;
  box-sizing: border-box;
  min-height: 255px; /* prevent jumps for no-issue and unknow-issue */

  display: none;
  overflow: hidden;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
}
#recommendation.open.read-more-open .details {
  min-height: calc(100vh - 65px - 65px); /* 100% - #banner[height] .bar[height] */
}

#recommendation.open.read-more-open .details .content {
  display: block;
  padding-right: 7px;
  overflow-y: scroll;
}

/* change the scroll area to be the entire content if the screen-size is
   very small */
@media (max-height: 385px) {
  #recommendation .details {
    min-height: unset;
  }
}


#recommendation.open .details {
  display: flex;
}

#recommendation .details .menu {
  flex: 0 0 auto;

  display: flex;
  min-height: 48px;
  overflow: hidden;
  box-sizing: border-box;
}

#recommendation .details .menu ul {
  flex: 1 1 0px;
  align-self: flex-end;
}

#recommendation .details .menu .close {
  flex: 0 0 24px;
  height: 24px;
  width: 24px;
  align-self: flex-start;
}

#recommendation .details .content {
  flex: 0 1 auto;
  /* in firefox `flex: 0 1 auto` takes up the content space instead of the
     available space. Set min-height to indicate that the auto height can
     be less than the content. */
  min-height: 0px;

  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  align-items: stretch;
}

#recommendation .details .content .summary-title {
  flex: 0 0 auto;
}

#recommendation .details .content .summary {
  flex: 0 0 auto;
}

#recommendation .details .content .read-more-button {
  flex: 0 0 auto;
}

#recommendation .details .content .read-more {
  display: none;
  flex: 0 1 auto;
  min-height: 0px; /* make auto be the available space instead of content space */
  padding-right: 7px;
  flex-direction: row;
  justify-content: center;
}
#recommendation.read-more-open .details .content .read-more {
  display: flex;
}

#recommendation .bar {
  flex: 0 0 65px;
  box-sizing: border-box;
  height: 65px;
  width: 100%;
}

/* recommendation styleing */
#recommendation-space {
  margin-bottom: 75px; /* #recommendation.bar[height] + 10px */
}

#recommendation .details {
  background: var(--recommend-bg-color);
  color: var(--recommend-text-color);
  padding: 18px 28px;
  font-size: 12pt;
  line-height: 1.5em;
  overscroll-behavior-y: contain; /* prevent scolling the main window */
}

#recommendation .content a {
  color: var(--recommend-link-color);
  text-decoration: none;
}

#recommendation ::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 7px;
}
#recommendation ::-webkit-scrollbar-thumb {
  border-radius: 4px;
  background-color: var(--special-scrollbar-bg);
  -webkit-box-shadow: 0 0 1px var(--special-shadow-bg);
}

#recommendation .content .summary-title {
  display: block;
  padding-top: 16px;
}
#recommendation .content .summary-title::before {
  content: 'Doctor has not found evidence of ';
}

#recommendation .content .summary-title::after {
  content: '. When such issues are present:'
}
#recommendation.detected .content .summary-title::before {
  content: 'Doctor has found ';
}
#recommendation.detected .content .summary-title::after {
  content: ':'
}


#recommendation .content .read-more-button, #recommendation .menu .show-hide-button {
  display: none;
  color: var(--recommend-link-color);
  cursor: pointer;
}
#recommendation .content .read-more-button::before {
  content: 'Read more';
}

#recommendation.read-more-open .content .read-more-button {
  margin-bottom: 10px;
}
#recommendation.read-more-open .content .read-more-button::before {
  content: 'Read less';
}

#recommendation .menu ul li .show-hide-button {
  display: block;
  align-self: unset;
}
#recommendation .menu ul li .menu-text.show-hide-button::before {
  content: 'Browse undetected issues ❮';
}
#recommendation.undetected-opened .menu ul li .menu-text.show-hide-button::before {
  content: 'Hide ❯';
}


#recommendation.has-read-more .content .read-more-button {
  display: block;
}

#recommendation.has-read-more .content .read-more p {
  line-height: 24px;
  margin-top: 18px;
  margin-bottom: 18px;
  text-align: left;
}

#recommendation.open.read-more-open .article {
 display: inline-block;
 max-width: 550px;
 margin-bottom: 128px;
}

#recommendation.open.read-more-open .article-menu {
 margin-right: 40px;
 max-width: 550px;
 position: sticky;
 top: 0;
 align-self: flex-start;
}

#recommendation .content .read-more h2:not(.plain), #recommendation.open.read-more-open .article-menu a {
  background: var(--recommend-title-bg-color);
  font-size: 12pt;
  padding: 12px;
  break-after: avoid;
  break-before: auto;
  margin: 0; /* let p and ul tags dominate margin collapse */
  font-weight: bold;
  color: var(--recommend-text-color);
}

#recommendation.open.read-more-open .article-menu a {
 display: block;
 margin-bottom: 6px;
 background-color: var(--article-menu-color);
}

#recommendation .content .read-more h2.plain {
  font-size: 12pt;
  padding-left: 12px;
}

#recommendation .content .read-more li {
  orphans: 4;
}

#recommendation .menu {
  border-bottom: 1px solid var(--recommend-menu-selected-color);
}

#recommendation .menu ul {
  list-style-type: none;
  padding: 0;
  margin: 0;
}

#recommendation .menu ul li {
  float: right;
  height: 35px;
  box-sizing: border-box;
  padding: 0px 4px 0 4px;
  border-bottom: 4px solid transparent;
  margin-right: 30px;
  cursor: pointer;
}

#recommendation .menu ul li.recommendation-tab {
  display: none;
}

#recommendation .menu ul li, 
#recommendation .menu ul li.detected,
#recommendation .menu ul li.selected,
#recommendation.undetected-opened .menu ul li.has-read-more {
  display: flex;
}

#recommendation .menu ul li.detected {
  float: left;
}

#recommendation .menu ul li.selected, #recommendation.open.read-more-open .article-menu a.selected {
  border-bottom: 4px solid var(--recommend-menu-selected-color);
  font-weight: bold;
}

#recommendation .menu ul li .menu-text {
  flex: 0 0 auto;
  align-self: center;
  display: block;
  line-height: 31px;
}

#recommendation .menu ul li .menu-text::before {
  display: block;
  width: 100%;
  content: attr(data-content);
  text-align: center;
}
/* Create a hidden element with the attr(data-content) content, but bold.
   This will make the element attain the size as if it had font-weight: bold;.
   This prevents jumping of the surrounding menu items when selected. */
#recommendation .menu ul li .menu-text::after {
  content: attr(data-content);
  display: block;
  font-weight: bold;
  height: 0;
  overflow: hidden;
  visibility: hidden;
}

#recommendation .menu ul li .warning-icon {
  flex: 0 0 auto;
  align-self: center;
  margin-left: 10px;
  height: 18px;
  width: 18px;
  display: none;
  fill: var(--recommend-menu-alert-color);
}
#recommendation .menu ul li.detected .warning-icon {
  display: block;
}

#recommendation .menu svg.close {
  fill: var(--recommend-close-color);
  cursor: pointer;
}

#recommendation .bar {
  border-top: 1px solid var(--recommendbar-top-line-color);
  background: var(--recommendbar-bg-color);
  overflow: hidden;
  cursor: pointer;
}

#recommendation .bar .text::after {
  display: block;
  margin-left: 37px;
  float: left;
  content: 'recommendations';
  font-variant: small-caps;
  font-size: 14pt;
  line-height: 64px;
  color: var(--recommendbar-text-color);
}

#recommendation .bar .arrow {
  float: left;
  margin: 14px 0px 12px 10px;
  height: 38px;
  width: 38px;
}

#recommendation .bar .arrow svg {
  fill: var(--recommendbar-text-color);
  width: 38px;
  height: 38px;
}

#recommendation:not(.open) .bar .arrow svg.arrow-down { display: none; }
#recommendation.open .bar .arrow svg.arrow-up { display: none; }

/* Graph layout */
#graph .sub-graph {
  position: relative;
}

#graph .sub-graph .header {
  /* margin-left: is the `graph g[margin-left] - .domain[stroke-width]` */
  margin: 0 20px 0 48px;
  height: 18px;
  color: var(--graph-text-color);
  font-size: 12pt;
  overflow: hidden;
}

#graph .sub-graph .header .title {
  float: left;
  height: 18px;
  margin-right: 20px;
}

#graph .sub-graph .header .title svg.alert {
  float: right;
  margin-left: 10px;
  height: 18px;
  width: 18px;
  visibility: hidden;
  cursor: pointer;
  fill: var(--graph-alert-color)
}

#graph .sub-graph .header .title .alert.visible {
  visibility: visible;
}

#graph .sub-graph .header .title .name::after {
  content: ' ';
}

#graph .sub-graph .header .legend {
  float: left;
  height: 18px;
  overflow: hidden;
}

#graph .sub-graph .header .legend .legend-item {
  float: left;
  height: 18px;
  margin-left: 20px;
  overflow: hidden;
}

#graph .sub-graph .header .legend .legend-item svg {
  float: left;
  margin-right: 6px;
}

#graph .sub-graph .header .legend .legend-item svg line {
  stroke-width: 2px;
  stroke: var(--graph-good-line-color);
}

#graph .sub-graph .header .legend .legend-item.bad svg line {
  stroke: var(--graph-bad-line-color);
}

#graph .sub-graph .header .legend .legend-item span {
  float: left;
  font-size: 10pt;
  line-height: 18px;
}

#graph .sub-graph .header .legend .legend-item .short-legend {
  display: none;
}

@media (max-width: 670px) {
  #graph .sub-graph .header .legend .legend-item .long-legend {
    display: none;
  }

  #graph .sub-graph .header .legend .legend-item .short-legend {
    display: unset;
  }

  #recommendation.open.read-more-open .article-menu {
   margin-right: 0;
   position: static;
   align-self: unset;
  }

  #recommendation.read-more-open .details .content .read-more {
   display: block; /* Allows .article-menu to move above content */
  }
}

#graph .sub-graph .hover-area {
  position: absolute;
  z-index: 1;
}

#graph .sub-graph .hover {
  position: absolute;
  display: none;
}

#graph .sub-graph .hover.visible {
  display: block;
}

#graph .sub-graph .hover .background, #graph .sub-graph .hover .pointer {
  fill: var(--hover-bg-color);
}

#graph .sub-graph .hover .line {
  fill: var(--hover-line-color);
}

#graph .sub-graph .hover text {
  alignment-baseline: central;
  fill: var(--hover-text-color);
  font-size: 10pt;
}

#graph .sub-graph .hover .title {
  font-weight: bold;
  text-anchor: middle;
}

#graph .sub-graph .hover .legend {
  font-weight: bold;
}

#graph .sub-graph .hover.above-curve .pointer.below-curve, #graph .sub-graph .hover.below-curve .pointer.above-curve {
  display: none;
}

#graph .sub-graph svg.chart {
  width: 100%;
  height: 180px;
}

#graph .sub-graph .chart .line {
  fill: none;
  stroke: var(--graph-good-line-color);
  stroke-width: 2px;
}

#graph .sub-graph .chart .line.bad {
  stroke: var(--graph-bad-line-color);
}

#graph .sub-graph .chart .tick line {
  stroke: var(--graph-tick-color);
  shape-rendering: crispEdges;
}

#graph .sub-graph .chart .tick text {
  fill: var(--graph-text-color);
  font-size: 10pt;
}

#graph .sub-graph .chart .domain {
  stroke: var(--graph-axis-color);
  stroke-width: 2px;
  shape-rendering: crispEdges;
}

#graph .sub-graph .chart .background {
  fill: var(--graph-bg-color);
}

#graph .sub-graph .chart .interval {
  fill: var(--graph-interval-color);
  display: none;
}

html.recommendation-open #graph .sub-graph .chart .interval {
  display: block;
}
</style>

      <div id="banner">
        <svg stroke="none" fill="#000" width="155" height="40" viewBox="0 0 115 40" xmlns="http://www.w3.org/2000/svg">
  <path d="m4.79 6.8l11.6-6.71c.31-.18.693-.18 1 0l10.8 6.24c.0473.959.0926 1.89.134 2.74.0445.938.0853 1.8.119 2.52.0324.681.0582 1.24.0764 1.63-.0138.00266-.0273.00544-.0407.00834-.0168.00334-.365.245-.333.44.075.465.061 1.15.061 1.15-.416.104-1.16.593-1.75 1.18-.972.967-.00702 5.16.365 6.11.013.0331.0958.0294.206.00765l1.76 5.75c-.341.661-.633.838-.798.881l-.00309-.0159s.0375-.125-.314-.114c-.352.01-1.53.0245-1.26.84.268.652 1.6.262 1.6.262s.143-.0658.129-.168l-.00382-.0197c.508-.115.899-.605 1.1-.92.302.262.747.645.982.833.092.178.335.337.877.39.473.0461 1.12-.0902.889-.774-.184-.553-1.13-.411-1.51-.308-.0408-.0178-.532-.242-.929-.902l2.05-6.48c.0529.0155.0859.0253.0859.0253.495-2.05.633-3.09.59-3.94-.0335-.668-.265-1.2-.59-1.64-.491-.673-2.06-1.05-2.06-1.05l-.115-1.17c-.01-.114-.303-.341-.37-.361-.0256-.00763-.0513-.0142-.077-.0197.00166-.0195.00207-.04.00109-.0615-.0188-.404-.0406-.964-.0659-1.64-.0338-.911-.073-2.03-.116-3.25-.0182-.516-.0364-1.04-.0546-1.57l4.47 2.59c.309.179.499.509.499.865v18.4c0 .357-.19.686-.499.865l-16.4 9.49-16.4-9.49c-.309-.179-.499-.509-.499-.865l-1.02e-14-18.4h4.44e-16c0-.357.19-.686.499-.865l3.54-2.05c.101 2.43.599 9.75.851 13.4-.761.12-1.46.461-2.02.977-.868.799-1.34 1.95-1.25 3.16.151 2.16 2.01 3.78 4.15 3.63 1.78-.124 3.23-1.44 3.55-3.19.0588-.323.0774-.654.0542-.986-.139-1.99-1.74-3.54-3.7-3.64-.257-3.76-.776-11.4-.887-13.8zm.144 14.5c.0234.34.0436.632.0596.866-1.11.217-1.94 1.18-1.94 2.34 0 1.32 1.08 2.39 2.41 2.39 1.33 0 2.41-1.07 2.41-2.39 0-1.21-.912-2.21-2.09-2.37-.016-.234-.0363-.532-.0602-.882 1.62.108 2.93 1.39 3.04 3.02.0192.274.00384.547-.0446.814-.266 1.45-1.49 2.56-2.99 2.66-1.81.126-3.37-1.23-3.49-3.02-.0697-.997.32-1.95 1.05-2.62.456-.42 1.02-.704 1.66-.817zm22.6.648c.0741-.0255.122-.0433.122-.0433s-.0577-.231-.143-.59c-.237-1-.731-2.19-.684-3.73s1.54-1.93 2.2-1.95c.951-.0279 2.64.597 2.3 2.59-.146.868-.33 1.85-.55 2.94.00624-.003.0376.00232.0848.013-.216.696-1.32 4.27-1.76 5.69-.385-1.19-1.25-3.87-1.57-4.92zm-15.7-14.9c-2.66 0-4.82 2.14-4.82 4.77 0 2.64 2.16 4.78 4.82 4.78 2.66 0 4.82-2.14 4.82-4.78 0-2.64-2.16-4.77-4.82-4.77zm9.87 0c-2.66 0-4.82 2.14-4.82 4.78 0 2.64 2.16 4.78 4.82 4.78s4.82-2.14 4.82-4.78c0-2.64-2.16-4.78-4.82-4.78zm-10.5 14.3c.0075.00227 2.37.843 6.26.863 3.89.0199 5.66-.676 6.35-.944.314-.122.146-.55-.246-.378-.605.265-2.64.827-6.1.827-3.46 0-6.12-.825-6.13-.827-.477-.206-.695.287-.128.459zm10.3 1.28c-.00584.00509-.57.523-1.33.753-.653.198-5.63.0847-6.3-.126-.484-.152-.752-.324-1.15-.827-.229-.288-.431-.072-.252.192.378.557.765.984 1.31 1.15.726.229 5.63.327 6.47.133.315-.0731 1.45-1.03 1.48-1.06.155-.155 0-.418-.229-.218zm-10.4-2.65c-.0265.004-.283.108-.361.162-.505.356-.522.968.156 1.96.132.194.393 0 .26-.181-.335-.458-.472-.826-.464-1.1.0141-.486.462-.537.473-.539.315-.0492.198-.347-.0651-.307zm12.4.405c.00349.00121.657.0956.573.737-.0406.312-.407.722-.409.723-.238.158.0538.404.21.236.0114-.0123.402-.48.496-.845.107-.421-.0218-.686-.367-.932-.0849-.0605-.363-.204-.389-.211-.231-.0653-.348.211-.114.293zm-11.7-4.18c-2.44 0-4.42-1.96-4.42-4.38 0-2.42 1.98-4.38 4.42-4.38 2.44 0 4.42 1.96 4.42 4.38 0 2.42-1.98 4.38-4.42 4.38zm-1.36-4.27c.872 0 1.58-.688 1.58-1.54 0-.849-.707-1.54-1.58-1.54-.872 0-1.58.688-1.58 1.54 0 .849.707 1.54 1.58 1.54zm11.2 4.27c-2.44 0-4.42-1.96-4.42-4.38 0-2.42 1.98-4.38 4.42-4.38 2.44 0 4.42 1.96 4.42 4.38 0 2.42-1.98 4.38-4.42 4.38zm-1.4-4.11c.872 0 1.58-.688 1.58-1.54 0-.849-.707-1.54-1.58-1.54-.872 0-1.58.688-1.58 1.54 0 .849.707 1.54 1.58 1.54z"/>
  <path d="m48.1 24.7v-11.7h2.46c1.18 0 2.11.117 2.8.35.735.228 1.4.616 2 1.16 1.21 1.11 1.82 2.56 1.82 4.36 0 1.81-.631 3.27-1.89 4.38-.634.558-1.3.946-1.99 1.16-.649.218-1.57.327-2.76.327h-2.43zm1.77-1.67h.799c.796 0 1.46-.0837 1.99-.251.527-.178 1-.459 1.43-.844.872-.796 1.31-1.83 1.31-3.11 0-1.29-.431-2.33-1.29-3.13-.776-.715-1.92-1.07-3.43-1.07h-.799v8.41zm9.24-4.26c0-1.65.606-3.07 1.82-4.26 1.21-1.19 2.66-1.78 4.35-1.78 1.67 0 3.11.598 4.31 1.8 1.2 1.2 1.8 2.63 1.8 4.31 0 1.69-.604 3.12-1.81 4.3-1.21 1.18-2.68 1.77-4.39 1.77-1.52 0-2.88-.525-4.09-1.57-1.33-1.16-1.99-2.68-1.99-4.56zm1.79.0228c0 1.3.436 2.37 1.31 3.2.867.837 1.87 1.26 3.01 1.26 1.23 0 2.27-.426 3.12-1.28.847-.862 1.27-1.91 1.27-3.15 0-1.25-.418-2.3-1.26-3.15-.832-.852-1.86-1.28-3.09-1.28-1.22 0-2.25.426-3.1 1.28-.842.842-1.26 1.88-1.26 3.12zm21.7-5.21v2.1c-1.02-.857-2.08-1.29-3.18-1.29-1.21 0-2.22.434-3.05 1.3-.832.862-1.25 1.92-1.25 3.16 0 1.23.416 2.27 1.25 3.12.832.847 1.85 1.27 3.06 1.27.624 0 1.15-.101 1.59-.304.243-.101.496-.238.757-.411.261-.172.536-.38.825-.624v2.14c-1.01.573-2.08.86-3.2.86-1.68 0-3.11-.586-4.3-1.76-1.18-1.18-1.77-2.61-1.77-4.28 0-1.5.494-2.83 1.48-4 1.22-1.44 2.79-2.15 4.72-2.15 1.05 0 2.07.287 3.06.86zm5.76 1.03v10.1h-1.77v-10.1h-2.7v-1.67h7.17v1.67h-2.69zm3.6 4.15c0-1.65.606-3.07 1.82-4.26 1.21-1.19 2.66-1.78 4.35-1.78 1.67 0 3.11.598 4.31 1.8 1.2 1.2 1.8 2.63 1.8 4.31 0 1.69-.604 3.12-1.81 4.3-1.21 1.18-2.68 1.77-4.39 1.77-1.52 0-2.88-.525-4.09-1.57-1.33-1.16-1.99-2.68-1.99-4.56zm1.79.0228c0 1.3.436 2.37 1.31 3.2.867.837 1.87 1.26 3.01 1.26 1.23 0 2.27-.426 3.12-1.28.847-.862 1.27-1.91 1.27-3.15 0-1.25-.418-2.3-1.26-3.15-.832-.852-1.86-1.28-3.09-1.28-1.22 0-2.25.426-3.1 1.28-.842.842-1.26 1.88-1.26 3.12zm17 .898l3.64 5.01h-2.17l-3.35-4.81h-.32v4.81h-1.77v-11.7h2.08c1.55 0 2.67.292 3.36.875.761.649 1.14 1.51 1.14 2.57 0 .832-.238 1.55-.715 2.15-.477.598-1.11.981-1.89 1.15zm-2.21-1.35h.563c1.68 0 2.52-.642 2.52-1.92 0-1.2-.817-1.8-2.45-1.8h-.631v3.73z"/>
</svg>

        <?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 18.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 202.2 62.4" style="enable-background:new 0 0 202.2 62.4;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#ED1828;}
	.st1{fill:#797A7C;}
</style>
<g>
	<g>
		<path class="st0" d="M54.3,10.3c-0.5,2.8-2.4,5.1-4.9,6.2C48.6,17,48,18,48,19.1v23.3c0,1.2,0.8,2.3,1.8,2.8
			c2.5,1.3,4.4,3.8,4.7,6.8c5-5.5,8-12.8,8-20.8C62.4,23.1,59.3,15.8,54.3,10.3z"/>
		<path class="st0" d="M12.1,45.2L12.1,45.2c1-0.4,1.7-1.5,1.7-2.8V31.8c0-1.1-0.6-2.2-1.5-2.7c-0.1,0-0.1-0.1-0.2-0.1c0,0,0,0,0,0
			h0c-2.7-1.4-4.6-4.3-4.6-7.6c0-4.7,3.9-8.6,8.6-8.6c4.7,0,8.6,3.9,8.6,8.6c0,1.1-0.2,2.1-0.6,3.2h0c-0.2,0.9,0,2.2,0.7,3
			l15.4,15.7h0c0.6,0.6,1.4,0.9,2.3,0.9c0.2,0,0.5,0,0.7-0.1c0.3-0.5,0.4-1.1,0.4-1.7V19.1c0-1.1-0.5-2.2-1.4-2.7
			c-0.1,0-0.1-0.1-0.2-0.1c0,0,0,0,0,0h0c-2.7-1.5-4.6-4.3-4.6-7.6c0-2.9,1.5-5.5,3.7-7.1C38,0.6,34.7,0,31.2,0C14,0,0,14,0,31.2
			C0,39,2.9,46.1,7.6,51.6C8,48.8,9.7,46.5,12.1,45.2z"/>
		<path class="st0" d="M45.9,12.9c2.3,0,4.2-1.9,4.2-4.2s-1.9-4.2-4.2-4.2c-2.3,0-4.2,1.9-4.2,4.2S43.6,12.9,45.9,12.9z"/>
		<path class="st1" d="M41.7,52.9c0,2.3,1.9,4.2,4.2,4.2c2.3,0,4.2-1.9,4.2-4.2c0-2.3-1.9-4.2-4.2-4.2
			C43.6,48.7,41.7,50.5,41.7,52.9z"/>
		<path class="st0" d="M37.4,52.8c0-1.1,0.2-2.1,0.6-3l0,0c0.1-0.4,0.2-0.7,0.2-1.1c0-0.9-0.4-1.7-1-2.3l0,0L21.7,30.6
			c-1.4-1.4-3.5-1.2-3.5,1.2v10.6c0,1.2,0.7,2.3,1.8,2.8c2.8,1.4,4.7,4.3,4.7,7.6c0,3.3-1.8,6.1-4.5,7.5c3.4,1.3,7.1,2,11,2
			c3.8,0,7.4-0.7,10.8-1.9C39.2,59,37.4,56.1,37.4,52.8z"/>
		<path class="st0" d="M16.1,48.7c-2.3,0-4.2,1.9-4.2,4.2c0,2.3,1.9,4.2,4.2,4.2c2.3,0,4.2-1.9,4.2-4.2
			C20.3,50.5,18.4,48.7,16.1,48.7z"/>
		<path class="st1" d="M20.3,21.4c0-2.3-1.9-4.2-4.2-4.2c-2.3,0-4.2,1.9-4.2,4.2s1.9,4.2,4.2,4.2C18.4,25.6,20.3,23.7,20.3,21.4z"/>
	</g>
	<g>
		<path class="st1" d="M79.8,39.7V29.7c0-4.1-1.5-6.2-4.5-6.2c-1.7,0-3,0.6-4.1,1.8c-1.1,1.2-1.6,2.7-1.6,4.5v9.9h-1.6V22.4h1.6v3.1
			h0.1c1.3-2.4,3.2-3.6,5.9-3.6c1.9,0,3.3,0.6,4.3,1.9c1,1.2,1.5,3,1.5,5.3v10.5H79.8z"/>
		<path class="st1" d="M86.9,31.1c0,2.4,0.5,4.2,1.6,5.6c1.1,1.3,2.6,2,4.5,2c1.9,0,3.8-0.7,5.7-2.1v1.7c-1.8,1.3-3.8,1.9-6,1.9
			c-2.2,0-4-0.8-5.4-2.4c-1.4-1.6-2.1-3.9-2.1-6.8c0-2.5,0.7-4.6,2.1-6.4c1.4-1.7,3.3-2.6,5.6-2.6c2.1,0,3.8,0.8,4.9,2.3
			c1.1,1.5,1.7,3.6,1.7,6.2v0.7H86.9z M98.1,29.7c-0.1-2-0.5-3.5-1.4-4.6c-0.9-1.1-2.1-1.7-3.7-1.7c-1.6,0-3,0.5-4,1.6
			c-1.1,1.1-1.7,2.6-2,4.7H98.1z"/>
		<path class="st1" d="M114.3,39.7v-3.5h-0.1c-0.6,1.2-1.4,2.1-2.4,2.8c-1.1,0.7-2.2,1.1-3.5,1.1c-1.6,0-2.9-0.5-3.9-1.4
			c-1-0.9-1.4-2.1-1.4-3.5c0-3,2-4.8,6-5.5l5.3-0.8c0-3.7-1.4-5.6-4.2-5.6c-1.9,0-3.7,0.8-5.5,2.3v-1.9c0.6-0.5,1.5-0.9,2.6-1.3
			c1.1-0.4,2.1-0.5,3.1-0.5c1.8,0,3.2,0.6,4.1,1.7c1,1.1,1.5,2.7,1.5,4.8v11.2H114.3z M109.6,31.1c-1.8,0.3-3.1,0.7-3.8,1.3
			c-0.7,0.6-1.1,1.5-1.1,2.8c0,1,0.3,1.9,1,2.5c0.7,0.7,1.6,1,2.8,1c1.7,0,3-0.6,4.1-1.8c1.1-1.2,1.7-2.8,1.7-4.8v-1.7L109.6,31.1z"
			/>
		<path class="st1" d="M129.2,24.1c-0.5-0.4-1.1-0.6-1.8-0.6c-1.4,0-2.5,0.7-3.4,2.1c-0.9,1.4-1.4,3.4-1.4,6v8.1h-1.5V22.4h1.5v3.8
			h0.1c0.4-1.3,1-2.3,1.9-3.1c0.9-0.7,1.8-1.1,3-1.1c0.6,0,1.2,0.1,1.7,0.3V24.1z"/>
		<path class="st0" d="M134.5,17.1v9.9h8.9v1.5h-8.9v11.3h-1.7V15.5h11.3v1.5H134.5z"/>
		<path class="st0" d="M155.4,40.1c-2.5,0-4.5-0.8-6-2.5c-1.5-1.7-2.2-3.8-2.2-6.5c0-2.9,0.8-5.1,2.3-6.7c1.5-1.6,3.6-2.4,6.1-2.4
			c2.5,0,4.4,0.8,5.8,2.4c1.4,1.6,2.1,3.8,2.1,6.7c0,2.7-0.7,4.9-2.2,6.5C160,39.3,158,40.1,155.4,40.1z M155.6,23.4
			c-2,0-3.7,0.7-4.9,2.1c-1.2,1.4-1.8,3.3-1.8,5.7c0,2.3,0.6,4.1,1.8,5.4c1.2,1.4,2.8,2.1,4.8,2.1c2.1,0,3.7-0.7,4.8-2
			c1.1-1.3,1.7-3.2,1.7-5.6c0-2.5-0.6-4.4-1.7-5.7C159.2,24.1,157.6,23.4,155.6,23.4z"/>
		<path class="st0" d="M176,24.1c-0.5-0.4-1.1-0.6-1.8-0.6c-1.4,0-2.5,0.7-3.4,2.1c-0.9,1.4-1.4,3.4-1.4,6v8.1h-1.5V22.4h1.5v3.8
			h0.1c0.4-1.3,1-2.3,1.9-3.1c0.9-0.7,1.8-1.1,3-1.1c0.6,0,1.2,0.1,1.7,0.3V24.1z"/>
		<path class="st0" d="M200.6,39.7V29.3c0-2.2-0.3-3.7-1-4.6c-0.7-0.9-1.8-1.3-3.2-1.3c-1.4,0-2.5,0.6-3.5,1.8
			c-1,1.2-1.5,2.6-1.5,4.4v10.1h-1.6V29.2c0-3.8-1.5-5.8-4.4-5.8c-1.4,0-2.6,0.6-3.5,1.8c-0.9,1.2-1.4,2.7-1.4,4.6v10H179V22.4h1.6
			v2.9h0.1c1.2-2.2,3-3.3,5.3-3.3c1.3,0,2.3,0.4,3.2,1.1c0.9,0.7,1.5,1.7,1.8,2.9c0.5-1.2,1.3-2.2,2.3-2.9c1-0.7,2.1-1,3.3-1
			c3.8,0,5.7,2.3,5.7,7v10.7H200.6z"/>
	</g>
</g>
</svg>

      </div>
      <div id="front-matter">
        <div id="alert"></div>
        <div id="menu"></div>
      </div>
      <div id="graph"></div>
      <div id="recommendation-space"></div>
      <div id="recommendation"></div>

      <template class="recommendation-text" data-issue="yes" data-type="summary" data-category="gc" data-menu="Garbage Collection" data-title="a potential Garbage Collection issue" data-order="1">
<ul>
<li>The process may have a memory management issue</li>
<li>Run the process with Node's <code>--inspect</code> flag (see <a href="https://nodejs.org/en/docs/inspector">Inspector Docs</a>)</li>
<li>Remotely profile the process with Chrome Devtools <em>Memory</em> tab</li>
</ul>
</template>
<template class="recommendation-text" data-issue="yes" data-type="read-more" data-category="gc" data-menu="Garbage Collection" data-title="a potential Garbage Collection issue" data-order="1">
<h2>Understanding the analysis</h2>
<p>JavaScript is Garbage Collected language. Rather than manually freeing objects, they
are simply "cleaned away" at some point after all references to an object have been removed.</p>
<p>At a basic level, the Garbage Collector traverses the JavaScript objects at various intervals to find any
"orphaned" objects (objects which no longer have any references). If there are too many
objects, and/or too many orphaned objects this can cause performance issues – because the Garbage
Collector uses the same thread as the JavaScript event loop. In other words, JavaScript execution
pauses while the Garbage Collector clears away de-referenced objects.</p>
<p>At a more detailed level, GC collection is triggered by memory activity, rather than time and
objects are classified by the GC into young and old. "Young" objects are
traversed (scavenged) more frequently, while "old" objects will stay in memory for longer. So there
are actually two GC types, a frequent scavenge of new space (short lived objects) and a less regular traversal of
old space (objects that survived enough new space scavenges).</p>
<p>Several heuristics may trigger detection of a GC issue, but they all center around high
memory usage.</p>
<p>One possible cause of a detected GC issue is a memory leak, where objects are being accidentally
allocated. However there are other (more common) cases where the is no leak but the memory strategy
needs to be adapted.</p>
<p>One such common case is when large objects (such as may be generated for big JSON payloads), are
created during periods of high activity (e.g. under request load). This can cause the objects
to be moved into old space – if they survive two (by default) GC scavenges – where they will live
for longer due to the less frequent scavenges. Objects can then build up in "old space" and
cause intermittent process stalling during Garbage Collection.</p>
<p>Depending on the use case this may be solved in different ways. For instance if the goal is to write
out serialized objects, then the output could be written to the response as strings (or buffers) directly
instead of creating the intermediate objects (or a combined strategy where part of the object is written out
from available state). It may just be a case that a functional approach (which is usually recommended) is
leading to the repeated creation of very similar objects, in which case the logical flow between functions
in a hot path could be adapted to reuse objects instead of create new objects.  </p>
<p>Another possibility is that a very high amount of short lived objects are created, filling up the
"young" space and triggering frequent GC sweeps – if this case <em>isn't</em> an unintended memory leak,
then then an object pooling strategy may be necessary.</p>
<p>To solve Garbage Collection issues we have to analyse the state of our process in order to track down the
root cause behind the high memory consumption.</p>
<h2>Next Steps</h2>
<ul>
<li>If the system is already deployed, mitigate the issue immediately by implementing
HTTP 503 Service Unavailable functionality (see <em>Load Shedding</em> in <strong>Reference</strong>)</li>
<li>Run <code>node --inspect &lt;FILENAME&gt;</code></li>
<li>Open Chrome and navigate to <a href="chrome://inspect">chrome://inspect</a></li>
<li>Under the <strong>Remote Target</strong> heading, there should be a target with the official Node.js icon</li>
<li>Click the <code>inspect</code> link for that target – this will connect Chrome Devtools to the Node processes remote debug interface</li>
<li>In Devtools, select the <em>Memory</em> tab</li>
<li>Select the <em>Take heap snapshot</em> radio box, and then click <em>Take snapshot</em></li>
<li>Put the process under load (in the same way that the process was load tested for Node Clinic)</li>
<li>Click <em>Profiles</em> in the left panel, then click <em>Take snapshot</em> again</li>
<li>Under the <em>HEAP SNAPSHOTS</em> left panel, select the second Snapshot (it will be called <em>Snapshot 2</em>)</li>
<li>Locate the dropdown box just above the "Constructor" column (most likely the dropdown box says <em>Summary</em>)</li>
<li>Click the dropdown, and select <em>Comparison</em> – this compares the before and after snapshots of the heap</li>
<li>Click the <em># Delta</em> and/or <em>Size Delta</em> columns to sort by the difference in object counts
or object size, categorized by constructor type</li>
<li>Use the interactive trees in the Constructor column to drill down into the specifics</li>
<li>Use the <em>Retainers</em> panel to understand the chain of object references</li>
<li>This can lead to useful clues about the origins of an object</li>
<li>Retained size (the aggregate total space used due to references <em>from</em> an object) may be important where a reference to a large amount of objects is relevant</li>
<li>Shallow size (the actual space used by the object itself) will be pertinent when there are particularly large objects in play</li>
</ul>
<p><strong>Advanced</strong>: Other Devtools memory profiling functionality, Record allocation profile and Record allocation timeline may also be very helpful</p>
<p><strong>Advanced</strong>: An alternative approach is to use a generate a core dump and use
a core dump analysis tool to list all JS objects in a core dump file (this approach isn't viable on macOS)</p>
<h2>Reference</h2>
<ul>
<li>Load Shedding</li>
<li>Express, Koa, Restify, <code>http</code>: <a href="https://www.npmjs.com/package/overload-protection">overload-protection</a></li>
<li>Hapi: <a href="https://hapijs.com/api#new-serveroptions">Server load sampleInterval option</a> &amp; <a href="https://hapijs.com/api#new-serveroptions">Server connections load maxEventLoopDelay</a></li>
<li>Fastify: <a href="https://www.npmjs.com/package/under-pressure">under-pressure</a></li>
<li>General: <a href="https://www.npmjs.com/package/loopbench">loopbench</a></li>
<li><a href="https://developers.google.com/web/tools/chrome-devtools/memory-problems/">Chrome Devtools Docs: Fix Memory Problems</a></li>
<li><a href="https://developers.google.com/web/tools/chrome-devtools/memory-problems/memory-101">Chrome Devtools Docs: Memory Terminology</a></li>
<li><a href="https://developers.google.com/web/tools/chrome-devtools/memory-problems/heap-snapshots">Chrome Devtools Docs: How to record heap snapshots</a></li>
<li><a href="https://nodejs.org/en/docs/inspector/">Node Docs: Inspector</a></li>
<li><strong>Advanced</strong>: <a href="https://github.com/nodejs/llnode">Core dump analysis tool for Linux: llnode</a></li>
<li><strong>Advanced</strong>: <a href="https://github.com/joyent/mdb_v8">Core dump analysis tool for SmartOS: mdb_v8</a></li>
<li><strong>Advanced</strong>: <a href="https://www.npmjs.com/package/autopsy">Core dump analysis tool for Linux which wraps SmartOS mdb</a></li>
</ul>
</template>
<template class="recommendation-text" data-issue="yes" data-type="summary" data-category="event-loop" data-menu="Event Loop" data-title="a potential Event Loop issue" data-order="2">
<ul>
<li>There may be one or more long running synchronous operations blocking the thread</li>
<li>Mitigate: Implement HTTP 503 event-loop protection</li>
<li>Diagnose: Use <a href="https://www.npmjs.com/package/0x">0x</a> to discover CPU intensive function calls</li>
</ul>
</template>
<template class="recommendation-text" data-issue="yes" data-type="read-more" data-category="event-loop" data-menu="Event Loop" data-title="a potential Event Loop issue" data-order="2">
<h2>Understanding the analysis</h2>
<p>JavaScript is a single-threaded event-driven non-blocking language.</p>
<p>In Node.js I/O tasks are delegated to the Operating System, JavaScript functions (callbacks)
are invoked once a related I/O operation is complete. At a rudimentary level, the process of
queueing events and later handling results in-thread is conceptually achieved with the
"Event Loop" abstraction.</p>
<p>At a (very) basic level the following pseudo-code demonstrates the Event Loop:
<code>while (event) handle(event)</code></p>
<p>The Event Loop paradigm leads to an ergonomic development experience for high concurrency programming
(relative to the multi-threaded paradigm).</p>
<p>However, since the Event Loop operates on a single thread this is essentially a shared
execution environment for every potentially concurrent action. This means that if the
execution time of any line of code exceeds an acceptable threshold it interferes with
processing of future events (for instance, an incoming HTTP request); new events cannot
be processed because the same thread that would be processing the event is currently
blocked by a long-running synchronous operation.</p>
<p>Asynchronous operations are those which queue an event for later handling, they tend to be
identified by an API that requires a callback, or uses promises (or async/await).</p>
<p>Whereas synchronous operations simply return a value. Long running synchronous operations are either
functions that perform blocking I/O (such as <code>fs.readFileSync</code>) or potentially resource intensive
algorithms (such as <code>JSON.stringify</code> or <code>react.renderToString</code>).</p>
<p>To solve the Event Loop issue, we need to find out where the synchronous bottleneck is.
This may (commonly) be identified as a single long-running synchronous function, or
the bottleneck may be distributed which would take rather more detective work.</p>
<h2>Next Steps</h2>
<ul>
<li>If the system is already deployed, mitigate the issue immediately by implementing
HTTP 503 Service Unavailable functionality (see <em>Load Shedding</em> in <strong>Reference</strong>)</li>
<li>This should allow the deployments Load Balance to route traffic to a different service instance</li>
<li>In the worse case the user receives the 503 in which case they must retry (this is still preferable to waiting for a timeout)</li>
<li>Use the <a href="https://www.npmjs.com/package/0x">0x</a> tool to generate a flamegraph (see <a href="#reference">Reference</a>).</li>
<li>Look for "hot" blocks, these are functions that are observed (at a higher relative frequency) to be at the top the stack per CPU sample – in other words, such functions are blocking the event loop</li>
<li>(In the case of a distributed bottleneck, start by looking for lots of wide tips at the top of the Flamegraph)</li>
</ul>
<h2>Reference</h2>
<ul>
<li>Load Shedding</li>
<li>Express, Koa, Restify, <code>http</code>: <a href="https://www.npmjs.com/package/overload-protection">overload-protection</a></li>
<li>Hapi: <a href="https://hapijs.com/api#new-serveroptions">Server load sampleInterval option</a> &amp; <a href="https://hapijs.com/api#new-serveroptions">Server connections load maxEventLoopDelay</a></li>
<li>Fastify: <a href="https://www.npmjs.com/package/under-pressure">under-pressure</a></li>
<li>General: <a href="https://www.npmjs.com/package/loopbench">loopbench</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop">Concurrency model and Event Loop
</a></li>
<li><a href="https://nodejs.org/en/docs/guides/blocking-vs-non-blocking/">Overview of Blocking vs Non-Blocking</a></li>
<li>Understanding Flamegraphs and how to use 0x: <a href="https://www.nearform.com/blog/tuning-node-js-app-performance-with-autocannon-and-0x/">Tuning Node.js app performance with autocannon and 0x</a></li>
</ul>
</template>
<template class="recommendation-text" data-issue="yes" data-type="summary" data-category="io" data-menu="I/O" data-title="a potential I/O issue" data-order="3">
<ul>
<li>There may be long-running asynchronous activities</li>
<li>This can mean that the bottleneck is not the Node process at all, but rather an I/O operation</li>
<li>The simplest current approach to solving this problem is by reasoning about external infrastructure</li>
</ul>
</template>
<template class="recommendation-text" data-issue="yes" data-type="read-more" data-category="io" data-menu="I/O" data-title="a potential I/O issue" data-order="3">
<h2>Understanding the analysis</h2>
<p>Node.js provides a platform for non-blocking I/O.
Unlike languages that typically block for IO (e.g. Java, PHP), Node.js passes I/O operations
to an accompanying C++ library (libuv) which delegates these operations to the Operating System.</p>
<p>Once an operation is complete, the notification bubbles up from the OS, through libuv, which can then
trigger any registered JavaScript functions (callbacks) for that operation. This is the typical
flow for any asynchronous I/O (where as <em>Sync API</em>'s will block, but should never be used in a
server/service request handling context).</p>
<p>The profiled process has been observed is unusually idle under load, typically this means
it's waiting for external I/O because there's nothing else to do until the I/O completes.</p>
<p>To solve I/O issues we have to track down the asynchronous call(s) which are taking an
abnormally long time to complete.</p>
<p>I/O root cause analysis is mostly a reasoning exercises, or requires advanced knowledge and
expertise with specialist Node.js logging flags and (very new) asynchronous tracking API's.</p>
<p>At nearForm we care a lot about this problem and we are developing a new tool to make
I/O debugging easier… stay tuned!</p>
<h2>Next Steps</h2>
<ul>
<li>Use (or create) an external architecture diagram (logical, hardware, whatever is available) to
understand all I/O "touch points", that is all I/O to/from the Node.js process (e.g. databases, network requests, filesystem…)</li>
<li>Measure the response times of each of the I/O touch points</li>
<li>One approach is to instrument the Node.js process with <code>console.time</code> before an asynchronous call
and <code>console.timeEnd</code> at the top of the callback (or promise <code>then</code> handler, or after an <code>await</code> or whatever the asynchronous abstraction)</li>
<li>Another approach is write benchmarks specifically for the I/O touch points<ul>
<li>Be sure to duplicate the exact conditions as generated in the Node.js process</li></ul></li>
<li>Run these measurements multiple times, look for unreasonably high response times</li>
<li>Once slow I/O touch points have been discovered a strategy for speeding up the I/O is required  </li>
</ul>
<p><strong>Advanced</strong>: For more advanced, lower overhead, timing functionality, check out the experimental <code>perf_hooks</code> API  </p>
<p><strong>Advanced:</strong> An alternative to the approach outlined above is to make use of the experimental
Node.js <code>async_hooks</code> API, in combination with a timer and stack trace generation.</p>
<h2>Reference</h2>
<ul>
<li><a href="https://nodejs.org/en/docs/guides/blocking-vs-non-blocking/">Overview of blocking vs non-blocking</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/time"><code>console.time</code></a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Console/timeEnd"><code>console.timeEnd</code></a></li>
<li><strong>Advanced</strong>: <a href="https://nodejs.org/api/perf_hooks.html">Node Docs: Perf Hooks</a></li>
<li><strong>Advanced</strong>: <a href="https://nodejs.org/dist/latest-v8.x/docs/api/async_hooks.html">Node Docs: Async Hooks</a></li>
<li><strong>Advanced</strong>: <a href="https://github.com/v8/v8/wiki/Stack-Trace-API">V8 Stack Trace API</a></li>
</ul>
</template>
<template class="recommendation-text" data-issue="yes" data-type="summary" data-category="unknown" data-menu="Unknown issue" data-title="an unknown issue" data-order="4">
<ul>
<li>We could not provide a recommendation for this issue.</li>
<li>Something else might be running in the system causing interference.</li>
</ul>
</template>
<template class="recommendation-text" data-issue="no" data-type="summary" data-category="none" data-menu="No issue" data-title="no issue" data-order="5">
<ul>
<li>Everything looks good!</li>
</ul>
</template>


      <script>require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict'

const d3 = require('./d3.js')
const icons = require('./icons.js')
const categories = require('./categories.js')
const EventEmitter = require('events')

function getTextNodeBoundingRect (node, container) {
  const getPseudoContent = (position) => container ? window.getComputedStyle(container, position).getPropertyValue('content') : ''
  const originalContent = node.textContent

  node.textContent = getPseudoContent(':before') + originalContent + getPseudoContent(':after')
  const range = document.createRange()
  range.selectNode(node)
  const boundingBox = range.getBoundingClientRect()
  node.textContent = originalContent

  return boundingBox
}

class Issue {
  constructor (id, detected, title) {
    this.graphId = `graph-${id}`
    this.detected = detected
    this.title = title
  }
}

class Alert extends EventEmitter {
  constructor () {
    super()

    this.analysis = null
    this.opened = false
    this.fullTitleWidth = null

    this.container = d3.select('#alert')

    this.summary = this.container.append('div')
      .classed('summary', true)

    this.alert = this.summary.append('svg')
      .classed('alert', true)
      .call(icons.insertIcon('warning'))

    this.title = this.summary.append('div')
      .classed('title', true)

    this.titleTextNode = document.createTextNode('')
    this.title.node().appendChild(this.titleTextNode)

    this.toggle = this.summary.append('div')
      .classed('toggle', true)
      .on('click', () => this.emit(this.opened ? 'close' : 'open'))
    this.toggle.append('svg')
      .classed('arrow-down', true)
      .call(icons.insertIcon('arrow-down'))
    this.toggle.append('svg')
      .classed('arrow-up', true)
      .call(icons.insertIcon('arrow-up'))

    this.details = this.container.append('ul')
      .classed('details', true)
  }

  setData (data) {
    this.analysis = data.analysis

    // Set issue marker
    const content = categories.getContent(this.analysis.issueCategory)
    this.container.classed('has-issue', content.issue)

    // Set items
    const issues = this.analysis.issues
    const memory = issues.memory.external || issues.memory.heapTotal ||
                   issues.memory.heapUsage || issues.memory.rss

    const issuesAsData = [
      new Issue('cpu', issues.cpu, 'CPU Usage'),
      new Issue('memory', memory, 'Memory Usage'),
      new Issue('delay', issues.delay, 'Event Loop Delay'),
      new Issue('handles', issues.handles, 'Active Handles')
    ].filter((issue) => issue.detected)

    this.details
      .selectAll('li')
      .data(issuesAsData)
      .enter()
        .append('li')
        .on('click', (d) => this.emit('click', d.graphId))
        .text((d) => d.title)

    this.titleTextNode.textContent = content.title

    this.fullTitleWidth = getTextNodeBoundingRect(this.titleTextNode, this.title.node()).width
  }

  draw () {
    const content = categories.getContent(this.analysis.issueCategory)
    this.titleTextNode.textContent = content.title

    // If there is not enough space, shorten the title text
    const titleNode = this.title.node()
    if (parseInt(window.getComputedStyle(titleNode).width) < this.fullTitleWidth) {
      this.titleTextNode.textContent = content.issue ? 'issue' : 'no issue'
    }
  }

  open () {
    this.opened = true
    this.container.classed('open', true)
  }

  close () {
    this.opened = false
    this.container.classed('open', false)
  }
}

module.exports = new Alert()

},{"./categories.js":2,"./d3.js":3,"./icons.js":8,"events":25}],2:[function(require,module,exports){
'use strict'
const d3 = require('./d3.js')

class CategoryContent {
  constructor (node) {
    this.category = node.dataset.category
    this.order = parseInt(node.dataset.order, 10)
    this.issue = node.dataset.issue === 'yes'
    this.menu = node.dataset.menu
    this.title = node.dataset.title
    this.summary = null
    this.readMore = null
    this.articleHeadings = null
  }

  addContent (node) {
    switch (node.dataset.type) {
      case 'summary':
        this.summary = document.adoptNode(node.content)
        break
      case 'read-more':
        this.readMore = document.adoptNode(node.content)
        break
      default:
        throw new Error('unknow type: ' + node.dataset.type)
    }
  }

  getSummary () {
    return this.summary.cloneNode(true)
  }

  hasSummary () {
    return this.summary !== null
  }

  getReadMore () {
    return this.readMore.cloneNode(true)
  }

  hasReadMore () {
    return this.readMore !== null
  }
}

class Categories {
  constructor () {
    const categories = new Map()
    for (const node of d3.selectAll('.recommendation-text').nodes()) {
      if (!categories.has(node.dataset.category)) {
        categories.set(node.dataset.category, new CategoryContent(node))
      }
      categories.get(node.dataset.category).addContent(node)
    }

    this.categories = categories
    this.categoriesAsArray = Array.from(
      this.categories.values()
    ).sort((a, b) => a.order - b.order)
  }

  getContent (category) {
    return this.categories.get(category)
  }

  asArray () {
    return this.categoriesAsArray
  }
}

module.exports = new Categories()

},{"./d3.js":3}],3:[function(require,module,exports){
'use strict'

// Reduce file size by only including the d3 modules that are used
Object.assign(
  module.exports,
  require('d3-array'),
  require('d3-axis'),
  require('d3-scale'),
  require('d3-selection'),
  require('d3-shape'),
  require('d3-time-format')
)

},{"d3-array":13,"d3-axis":14,"d3-scale":20,"d3-selection":21,"d3-shape":22,"d3-time-format":23}],4:[function(require,module,exports){
module.exports=
      {
        "traceEvent": [
{"pid":20617,"tid":775,"ts":131847297568,"tts":52561,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":1065,"tdur":1031,"args":{"startTimestamp":1516612771370.3235,"endTimestamp":1516612771371.3884}},
{"pid":20617,"tid":775,"ts":131847307580,"tts":62485,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":1223,"tdur":1189,"args":{"startTimestamp":1516612771380.3354,"endTimestamp":1516612771381.5583}},
{"pid":20617,"tid":775,"ts":131847350217,"tts":101811,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":624,"tdur":625,"args":{"startTimestamp":1516612771422.9724,"endTimestamp":1516612771423.5964}},
{"pid":20617,"tid":775,"ts":131847441682,"tts":173023,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":1259,"tdur":1259,"args":{"startTimestamp":1516612771514.4373,"endTimestamp":1516612771515.6963}},
{"pid":20617,"tid":775,"ts":131847585136,"tts":257980,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":2727,"tdur":2727,"args":{"startTimestamp":1516612771657.8914,"endTimestamp":1516612771660.6184}},
{"pid":20617,"tid":775,"ts":131847674737,"tts":315525,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":2439,"tdur":2439,"args":{"startTimestamp":1516612771747.4924,"endTimestamp":1516612771749.9314}},
{"pid":20617,"tid":775,"ts":131847859427,"tts":448149,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":1858,"tdur":1858,"args":{"startTimestamp":1516612771932.1824,"endTimestamp":1516612771934.0403}},
{"pid":20617,"tid":775,"ts":131849133260,"tts":634978,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":2967,"tdur":2891,"args":{"startTimestamp":1516612773206.0154,"endTimestamp":1516612773208.9824}},
{"pid":20617,"tid":775,"ts":131849156826,"tts":656847,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":1151,"tdur":1150,"args":{"startTimestamp":1516612773229.5813,"endTimestamp":1516612773230.7324}},
{"pid":20617,"tid":775,"ts":131849209394,"tts":708272,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":191,"tdur":191,"args":{"startTimestamp":1516612773282.1494,"endTimestamp":1516612773282.3403}},
{"pid":20617,"tid":775,"ts":131849254053,"tts":752891,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":260,"tdur":259,"args":{"startTimestamp":1516612773326.8083,"endTimestamp":1516612773327.0684}},
{"pid":20617,"tid":775,"ts":131849294804,"tts":793612,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":226,"tdur":223,"args":{"startTimestamp":1516612773367.5593,"endTimestamp":1516612773367.7854}},
{"pid":20617,"tid":775,"ts":131849338521,"tts":837285,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":210,"tdur":209,"args":{"startTimestamp":1516612773411.2764,"endTimestamp":1516612773411.4863}},
{"pid":20617,"tid":775,"ts":131849382244,"tts":880975,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":150,"tdur":149,"args":{"startTimestamp":1516612773454.9993,"endTimestamp":1516612773455.1494}},
{"pid":20617,"tid":775,"ts":131849428022,"tts":926736,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":130,"tdur":129,"args":{"startTimestamp":1516612773500.7773,"endTimestamp":1516612773500.9075}},
{"pid":20617,"tid":775,"ts":131849209612,"ph":"X","cat":"v8","name":"V8.GCMarkSweepCompact","dur":221367,"args":{"startTimestamp":1516612773282.3674,"endTimestamp":1516612773503.7344}},
{"pid":20617,"tid":775,"ts":131849478575,"tts":977025,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":122,"tdur":121,"args":{"startTimestamp":1516612773551.3303,"endTimestamp":1516612773551.4524}},
{"pid":20617,"tid":775,"ts":131849510297,"tts":1008721,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":105,"tdur":105,"args":{"startTimestamp":1516612773583.0525,"endTimestamp":1516612773583.1575}},
{"pid":20617,"tid":775,"ts":131849541786,"tts":1040198,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":96,"tdur":96,"args":{"startTimestamp":1516612773614.5413,"endTimestamp":1516612773614.6375}},
{"pid":20617,"tid":775,"ts":131849576075,"tts":1074471,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":130,"tdur":129,"args":{"startTimestamp":1516612773648.8303,"endTimestamp":1516612773648.9604}},
{"pid":20617,"tid":775,"ts":131849615739,"tts":1114112,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":126,"tdur":125,"args":{"startTimestamp":1516612773688.4944,"endTimestamp":1516612773688.6204}},
{"pid":20617,"tid":775,"ts":131849648223,"tts":1146578,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":102,"tdur":101,"args":{"startTimestamp":1516612773720.9783,"endTimestamp":1516612773721.0803}},
{"pid":20617,"tid":775,"ts":131849679873,"tts":1178217,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":97,"tdur":96,"args":{"startTimestamp":1516612773752.6284,"endTimestamp":1516612773752.7253}},
{"pid":20617,"tid":775,"ts":131849711335,"tts":1209663,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":98,"tdur":98,"args":{"startTimestamp":1516612773784.0903,"endTimestamp":1516612773784.1885}},
{"pid":20617,"tid":775,"ts":131849743176,"tts":1241491,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":96,"tdur":96,"args":{"startTimestamp":1516612773815.9314,"endTimestamp":1516612773816.0273}},
{"pid":20617,"tid":775,"ts":131849774641,"tts":1272937,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":95,"tdur":96,"args":{"startTimestamp":1516612773847.3965,"endTimestamp":1516612773847.4915}},
{"pid":20617,"tid":775,"ts":131849806095,"tts":1304384,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":95,"tdur":95,"args":{"startTimestamp":1516612773878.8503,"endTimestamp":1516612773878.9453}},
{"pid":20617,"tid":775,"ts":131849837705,"tts":1335985,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":95,"tdur":95,"args":{"startTimestamp":1516612773910.4604,"endTimestamp":1516612773910.5554}},
{"pid":20617,"tid":775,"ts":131849869236,"tts":1367491,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":96,"tdur":96,"args":{"startTimestamp":1516612773941.9915,"endTimestamp":1516612773942.0874}},
{"pid":20617,"tid":775,"ts":131849900928,"tts":1399169,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":116,"tdur":115,"args":{"startTimestamp":1516612773973.6833,"endTimestamp":1516612773973.7993}},
{"pid":20617,"tid":775,"ts":131849933458,"tts":1431653,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":102,"tdur":101,"args":{"startTimestamp":1516612774006.2134,"endTimestamp":1516612774006.3154}},
{"pid":20617,"tid":775,"ts":131849969350,"tts":1467506,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":185,"tdur":184,"args":{"startTimestamp":1516612774042.1055,"endTimestamp":1516612774042.2903}},
{"pid":20617,"tid":775,"ts":131850009872,"tts":1507919,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":177,"tdur":176,"args":{"startTimestamp":1516612774082.6274,"endTimestamp":1516612774082.8044}},
{"pid":20617,"tid":775,"ts":131850047369,"tts":1545139,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":108,"tdur":108,"args":{"startTimestamp":1516612774120.1243,"endTimestamp":1516612774120.2324}},
{"pid":20617,"tid":775,"ts":131850079087,"tts":1576857,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":99,"tdur":99,"args":{"startTimestamp":1516612774151.8423,"endTimestamp":1516612774151.9414}},
{"pid":20617,"tid":775,"ts":131850110612,"tts":1608381,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":97,"tdur":98,"args":{"startTimestamp":1516612774183.3674,"endTimestamp":1516612774183.4644}},
{"pid":20617,"tid":775,"ts":131850153656,"tts":1650726,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":267,"tdur":266,"args":{"startTimestamp":1516612774226.4114,"endTimestamp":1516612774226.6785}},
{"pid":20617,"tid":775,"ts":131850185160,"tts":1682162,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":364,"tdur":363,"args":{"startTimestamp":1516612774257.9153,"endTimestamp":1516612774258.2793}},
{"pid":20617,"tid":775,"ts":131850217119,"tts":1714037,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":102,"tdur":103,"args":{"startTimestamp":1516612774289.8743,"endTimestamp":1516612774289.9763}},
{"pid":20617,"tid":775,"ts":131850251372,"tts":1748204,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":117,"tdur":116,"args":{"startTimestamp":1516612774324.1274,"endTimestamp":1516612774324.2444}},
{"pid":20617,"tid":775,"ts":131850283417,"tts":1780218,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":105,"tdur":104,"args":{"startTimestamp":1516612774356.1724,"endTimestamp":1516612774356.2773}},
{"pid":20617,"tid":775,"ts":131850314998,"tts":1811762,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":101,"tdur":101,"args":{"startTimestamp":1516612774387.7534,"endTimestamp":1516612774387.8545}},
{"pid":20617,"tid":775,"ts":131850348263,"tts":1844976,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":101,"tdur":102,"args":{"startTimestamp":1516612774421.0183,"endTimestamp":1516612774421.1194}},
{"pid":20617,"tid":775,"ts":131850382757,"tts":1879416,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":114,"tdur":113,"args":{"startTimestamp":1516612774455.5125,"endTimestamp":1516612774455.6265}},
{"pid":20617,"tid":775,"ts":131850414475,"tts":1911121,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":90,"tdur":89,"args":{"startTimestamp":1516612774487.2305,"endTimestamp":1516612774487.3203}},
{"pid":20617,"tid":775,"ts":131850445978,"tts":1942606,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":93,"tdur":93,"args":{"startTimestamp":1516612774518.7334,"endTimestamp":1516612774518.8264}},
{"pid":20617,"tid":775,"ts":131850477416,"tts":1974034,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":86,"tdur":85,"args":{"startTimestamp":1516612774550.1714,"endTimestamp":1516612774550.2573}},
{"pid":20617,"tid":775,"ts":131850508885,"tts":2005491,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":92,"tdur":92,"args":{"startTimestamp":1516612774581.6404,"endTimestamp":1516612774581.7324}},
{"pid":20617,"tid":775,"ts":131850540230,"tts":2036824,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":83,"tdur":85,"args":{"startTimestamp":1516612774612.9854,"endTimestamp":1516612774613.0684}},
{"pid":20617,"tid":775,"ts":131850571733,"tts":2068312,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":96,"tdur":95,"args":{"startTimestamp":1516612774644.4883,"endTimestamp":1516612774644.5845}},
{"pid":20617,"tid":775,"ts":131850611512,"tts":2108058,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":96,"tdur":97,"args":{"startTimestamp":1516612774684.2673,"endTimestamp":1516612774684.3633}},
{"pid":20617,"tid":775,"ts":131850646934,"tts":2143468,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":223,"tdur":223,"args":{"startTimestamp":1516612774719.6895,"endTimestamp":1516612774719.9124}},
{"pid":20617,"tid":775,"ts":131850682999,"tts":2179493,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":103,"tdur":103,"args":{"startTimestamp":1516612774755.7544,"endTimestamp":1516612774755.8574}},
{"pid":20617,"tid":775,"ts":131850719224,"tts":2215688,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":100,"tdur":100,"args":{"startTimestamp":1516612774791.9795,"endTimestamp":1516612774792.0793}},
{"pid":20617,"tid":775,"ts":131850750697,"tts":2247150,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":85,"tdur":84,"args":{"startTimestamp":1516612774823.4524,"endTimestamp":1516612774823.5374}},
{"pid":20617,"tid":775,"ts":131850782668,"tts":2279097,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":102,"tdur":103,"args":{"startTimestamp":1516612774855.4233,"endTimestamp":1516612774855.5254}},
{"pid":20617,"tid":775,"ts":131850814057,"tts":2310474,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":87,"tdur":87,"args":{"startTimestamp":1516612774886.8123,"endTimestamp":1516612774886.8994}},
{"pid":20617,"tid":775,"ts":131850848924,"tts":2345311,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":96,"tdur":96,"args":{"startTimestamp":1516612774921.6794,"endTimestamp":1516612774921.7754}},
{"pid":20617,"tid":775,"ts":131850880361,"tts":2376738,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":89,"tdur":89,"args":{"startTimestamp":1516612774953.1165,"endTimestamp":1516612774953.2053}},
{"pid":20617,"tid":775,"ts":131850920292,"tts":2416597,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":124,"tdur":124,"args":{"startTimestamp":1516612774993.0474,"endTimestamp":1516612774993.1714}},
{"pid":20617,"tid":775,"ts":131850952217,"tts":2448514,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":102,"tdur":101,"args":{"startTimestamp":1516612775024.9724,"endTimestamp":1516612775025.0745}},
{"pid":20617,"tid":775,"ts":131850983797,"tts":2480049,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":91,"tdur":92,"args":{"startTimestamp":1516612775056.5525,"endTimestamp":1516612775056.6433}},
{"pid":20617,"tid":775,"ts":131851022899,"tts":2519110,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":89,"tdur":89,"args":{"startTimestamp":1516612775095.6543,"endTimestamp":1516612775095.7434}},
{"pid":20617,"tid":775,"ts":131851054799,"tts":2550991,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":96,"tdur":96,"args":{"startTimestamp":1516612775127.5544,"endTimestamp":1516612775127.6504}},
{"pid":20617,"tid":775,"ts":131851086329,"tts":2582508,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":96,"tdur":96,"args":{"startTimestamp":1516612775159.0845,"endTimestamp":1516612775159.1804}},
{"pid":20617,"tid":775,"ts":131851117910,"tts":2614069,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":99,"tdur":98,"args":{"startTimestamp":1516612775190.6653,"endTimestamp":1516612775190.7644}},
{"pid":20617,"tid":775,"ts":131851162625,"tts":2658599,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":123,"tdur":123,"args":{"startTimestamp":1516612775235.3804,"endTimestamp":1516612775235.5034}},
{"pid":20617,"tid":775,"ts":131851199747,"tts":2695662,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":137,"tdur":137,"args":{"startTimestamp":1516612775272.5024,"endTimestamp":1516612775272.6394}},
{"pid":20617,"tid":775,"ts":131851241318,"tts":2737199,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":162,"tdur":161,"args":{"startTimestamp":1516612775314.0735,"endTimestamp":1516612775314.2354}},
{"pid":20617,"tid":775,"ts":131851288459,"tts":2783759,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":128,"tdur":129,"args":{"startTimestamp":1516612775361.2144,"endTimestamp":1516612775361.3423}},
{"pid":20617,"tid":775,"ts":131851321302,"tts":2816591,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":90,"tdur":90,"args":{"startTimestamp":1516612775394.0574,"endTimestamp":1516612775394.1475}},
{"pid":20617,"tid":775,"ts":131851352985,"tts":2848251,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":111,"tdur":111,"args":{"startTimestamp":1516612775425.7405,"endTimestamp":1516612775425.8513}},
{"pid":20617,"tid":775,"ts":131851384928,"tts":2880182,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":110,"tdur":110,"args":{"startTimestamp":1516612775457.6833,"endTimestamp":1516612775457.7935}},
{"pid":20617,"tid":775,"ts":131851416635,"tts":2911845,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":105,"tdur":105,"args":{"startTimestamp":1516612775489.3904,"endTimestamp":1516612775489.4954}},
{"pid":20617,"tid":775,"ts":131851448124,"tts":2943321,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":95,"tdur":96,"args":{"startTimestamp":1516612775520.8794,"endTimestamp":1516612775520.9744}},
{"pid":20617,"tid":775,"ts":131851479513,"tts":2974700,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":121,"tdur":118,"args":{"startTimestamp":1516612775552.2683,"endTimestamp":1516612775552.3894}},
{"pid":20617,"tid":775,"ts":131851513877,"tts":3009037,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":102,"tdur":102,"args":{"startTimestamp":1516612775586.6323,"endTimestamp":1516612775586.7344}},
{"pid":20617,"tid":775,"ts":131851545366,"tts":3040515,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":91,"tdur":89,"args":{"startTimestamp":1516612775618.1213,"endTimestamp":1516612775618.2124}},
{"pid":20617,"tid":775,"ts":131851577282,"tts":3072382,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":112,"tdur":111,"args":{"startTimestamp":1516612775650.0374,"endTimestamp":1516612775650.1494}},
{"pid":20617,"tid":775,"ts":131851608827,"tts":3103915,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":94,"tdur":94,"args":{"startTimestamp":1516612775681.5823,"endTimestamp":1516612775681.6763}},
{"pid":20617,"tid":775,"ts":131851640857,"tts":3135930,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":103,"tdur":103,"args":{"startTimestamp":1516612775713.6123,"endTimestamp":1516612775713.7153}},
{"pid":20617,"tid":775,"ts":131851672453,"tts":3167515,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":88,"tdur":87,"args":{"startTimestamp":1516612775745.2083,"endTimestamp":1516612775745.2964}},
{"pid":20617,"tid":775,"ts":131851706087,"tts":3201084,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":108,"tdur":109,"args":{"startTimestamp":1516612775778.8423,"endTimestamp":1516612775778.9504}},
{"pid":20617,"tid":775,"ts":131851740972,"tts":3235932,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":89,"tdur":89,"args":{"startTimestamp":1516612775813.7273,"endTimestamp":1516612775813.8164}},
{"pid":20617,"tid":775,"ts":131851779965,"tts":3274888,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":97,"tdur":97,"args":{"startTimestamp":1516612775852.7205,"endTimestamp":1516612775852.8174}},
{"pid":20617,"tid":775,"ts":131851811384,"tts":3306296,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":88,"tdur":87,"args":{"startTimestamp":1516612775884.1394,"endTimestamp":1516612775884.2273}},
{"pid":20617,"tid":775,"ts":131851850588,"tts":3345463,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":96,"tdur":96,"args":{"startTimestamp":1516612775923.3433,"endTimestamp":1516612775923.4395}},
{"pid":20617,"tid":775,"ts":131851889705,"tts":3384528,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":102,"tdur":103,"args":{"startTimestamp":1516612775962.4604,"endTimestamp":1516612775962.5623}},
{"pid":20617,"tid":775,"ts":131851921257,"tts":3416066,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":91,"tdur":90,"args":{"startTimestamp":1516612775994.0125,"endTimestamp":1516612775994.1033}},
{"pid":20617,"tid":775,"ts":131851952890,"tts":3447543,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":96,"tdur":95,"args":{"startTimestamp":1516612776025.6453,"endTimestamp":1516612776025.7415}},
{"pid":20617,"tid":775,"ts":131851984279,"tts":3478920,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":88,"tdur":88,"args":{"startTimestamp":1516612776057.0344,"endTimestamp":1516612776057.1223}},
{"pid":20617,"tid":775,"ts":131852021440,"tts":3516056,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":95,"tdur":96,"args":{"startTimestamp":1516612776094.1953,"endTimestamp":1516612776094.2903}},
{"pid":20617,"tid":775,"ts":131852058738,"tts":3553334,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":95,"tdur":95,"args":{"startTimestamp":1516612776131.4934,"endTimestamp":1516612776131.5884}},
{"pid":20617,"tid":775,"ts":131852090857,"tts":3585412,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":105,"tdur":105,"args":{"startTimestamp":1516612776163.6123,"endTimestamp":1516612776163.7173}},
{"pid":20617,"tid":775,"ts":131852122351,"tts":3616894,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":92,"tdur":91,"args":{"startTimestamp":1516612776195.1064,"endTimestamp":1516612776195.1985}},
{"pid":20617,"tid":775,"ts":131852154968,"tts":3649362,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":147,"tdur":146,"args":{"startTimestamp":1516612776227.7234,"endTimestamp":1516612776227.8704}},
{"pid":20617,"tid":775,"ts":131852194621,"tts":3688931,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":164,"tdur":165,"args":{"startTimestamp":1516612776267.3765,"endTimestamp":1516612776267.5403}},
{"pid":20617,"tid":775,"ts":131852228338,"tts":3722603,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":101,"tdur":100,"args":{"startTimestamp":1516612776301.0933,"endTimestamp":1516612776301.1943}},
{"pid":20617,"tid":775,"ts":131852259958,"tts":3754184,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":134,"tdur":134,"args":{"startTimestamp":1516612776332.7134,"endTimestamp":1516612776332.8474}},
{"pid":20617,"tid":775,"ts":131852291934,"tts":3786063,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":102,"tdur":101,"args":{"startTimestamp":1516612776364.6895,"endTimestamp":1516612776364.7913}},
{"pid":20617,"tid":775,"ts":131852324182,"tts":3818300,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":102,"tdur":102,"args":{"startTimestamp":1516612776396.9373,"endTimestamp":1516612776397.0393}},
{"pid":20617,"tid":775,"ts":131852355848,"tts":3849932,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":105,"tdur":105,"args":{"startTimestamp":1516612776428.6033,"endTimestamp":1516612776428.7083}},
{"pid":20617,"tid":775,"ts":131852395108,"tts":3889147,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":113,"tdur":113,"args":{"startTimestamp":1516612776467.8633,"endTimestamp":1516612776467.9763}},
{"pid":20617,"tid":775,"ts":131852427286,"tts":3921303,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":109,"tdur":109,"args":{"startTimestamp":1516612776500.0413,"endTimestamp":1516612776500.1504}},
{"pid":20617,"tid":775,"ts":131852458688,"tts":3952695,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":84,"tdur":83,"args":{"startTimestamp":1516612776531.4434,"endTimestamp":1516612776531.5273}},
{"pid":20617,"tid":775,"ts":131852490183,"tts":3984170,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":91,"tdur":92,"args":{"startTimestamp":1516612776562.9385,"endTimestamp":1516612776563.0293}},
{"pid":20617,"tid":775,"ts":131852527820,"tts":4021793,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":121,"tdur":121,"args":{"startTimestamp":1516612776600.5754,"endTimestamp":1516612776600.6963}},
{"pid":20617,"tid":775,"ts":131852560843,"tts":4054768,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":92,"tdur":92,"args":{"startTimestamp":1516612776633.5984,"endTimestamp":1516612776633.6904}},
{"pid":20617,"tid":775,"ts":131852597077,"tts":4090961,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":115,"tdur":115,"args":{"startTimestamp":1516612776669.8323,"endTimestamp":1516612776669.9473}},
{"pid":20617,"tid":775,"ts":131852635923,"tts":4129744,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":116,"tdur":117,"args":{"startTimestamp":1516612776708.6785,"endTimestamp":1516612776708.7944}},
{"pid":20617,"tid":775,"ts":131852667544,"tts":4161354,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":89,"tdur":89,"args":{"startTimestamp":1516612776740.2993,"endTimestamp":1516612776740.3884}},
{"pid":20617,"tid":775,"ts":131852699279,"tts":4193066,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":100,"tdur":100,"args":{"startTimestamp":1516612776772.0344,"endTimestamp":1516612776772.1343}},
{"pid":20617,"tid":775,"ts":131852730750,"tts":4224526,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":90,"tdur":90,"args":{"startTimestamp":1516612776803.5054,"endTimestamp":1516612776803.5955}},
{"pid":20617,"tid":775,"ts":131852762617,"tts":4256381,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":103,"tdur":103,"args":{"startTimestamp":1516612776835.3723,"endTimestamp":1516612776835.4753}},
{"pid":20617,"tid":775,"ts":131852794159,"tts":4287910,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":93,"tdur":94,"args":{"startTimestamp":1516612776866.9143,"endTimestamp":1516612776867.0073}},
{"pid":20617,"tid":775,"ts":131852825720,"tts":4319447,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":98,"tdur":99,"args":{"startTimestamp":1516612776898.4753,"endTimestamp":1516612776898.5735}},
{"pid":20617,"tid":775,"ts":131852857307,"tts":4351023,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":99,"tdur":98,"args":{"startTimestamp":1516612776930.0623,"endTimestamp":1516612776930.1614}},
{"pid":20617,"tid":775,"ts":131852888960,"tts":4382655,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":93,"tdur":94,"args":{"startTimestamp":1516612776961.7153,"endTimestamp":1516612776961.8083}},
{"pid":20617,"tid":775,"ts":131852920375,"tts":4414059,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":89,"tdur":89,"args":{"startTimestamp":1516612776993.1304,"endTimestamp":1516612776993.2195}},
{"pid":20617,"tid":775,"ts":131852959973,"tts":4453593,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":99,"tdur":100,"args":{"startTimestamp":1516612777032.7283,"endTimestamp":1516612777032.8274}},
{"pid":20617,"tid":775,"ts":131852991558,"tts":4485179,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":98,"tdur":98,"args":{"startTimestamp":1516612777064.3135,"endTimestamp":1516612777064.4114}},
{"pid":20617,"tid":775,"ts":131853023040,"tts":4516657,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":96,"tdur":96,"args":{"startTimestamp":1516612777095.7954,"endTimestamp":1516612777095.8914}},
{"pid":20617,"tid":775,"ts":131853054702,"tts":4548306,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":102,"tdur":101,"args":{"startTimestamp":1516612777127.4573,"endTimestamp":1516612777127.5593}},
{"pid":20617,"tid":775,"ts":131853086392,"tts":4579980,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":99,"tdur":99,"args":{"startTimestamp":1516612777159.1475,"endTimestamp":1516612777159.2463}},
{"pid":20617,"tid":775,"ts":131853117960,"tts":4611536,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":95,"tdur":95,"args":{"startTimestamp":1516612777190.7153,"endTimestamp":1516612777190.8103}},
{"pid":20617,"tid":775,"ts":131853149525,"tts":4643079,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":98,"tdur":98,"args":{"startTimestamp":1516612777222.2803,"endTimestamp":1516612777222.3784}},
{"pid":20617,"tid":775,"ts":131853187570,"tts":4680898,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":111,"tdur":112,"args":{"startTimestamp":1516612777260.3254,"endTimestamp":1516612777260.4363}},
{"pid":20617,"tid":775,"ts":131853219190,"tts":4712473,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":96,"tdur":97,"args":{"startTimestamp":1516612777291.9453,"endTimestamp":1516612777292.0413}},
{"pid":20617,"tid":775,"ts":131853250885,"tts":4744138,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":102,"tdur":101,"args":{"startTimestamp":1516612777323.6404,"endTimestamp":1516612777323.7424}},
{"pid":20617,"tid":775,"ts":131853283296,"tts":4776442,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":113,"tdur":113,"args":{"startTimestamp":1516612777356.0513,"endTimestamp":1516612777356.1643}},
{"pid":20617,"tid":775,"ts":131853315246,"tts":4808324,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":123,"tdur":124,"args":{"startTimestamp":1516612777388.0015,"endTimestamp":1516612777388.1243}},
{"pid":20617,"tid":775,"ts":131853351002,"tts":4843938,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":105,"tdur":104,"args":{"startTimestamp":1516612777423.7573,"endTimestamp":1516612777423.8623}},
{"pid":20617,"tid":775,"ts":131853386703,"tts":4879619,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":129,"tdur":129,"args":{"startTimestamp":1516612777459.4583,"endTimestamp":1516612777459.5874}},
{"pid":20617,"tid":775,"ts":131853420034,"tts":4912918,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":101,"tdur":101,"args":{"startTimestamp":1516612777492.7893,"endTimestamp":1516612777492.8904}},
{"pid":20617,"tid":775,"ts":131853456784,"tts":4949626,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":106,"tdur":105,"args":{"startTimestamp":1516612777529.5393,"endTimestamp":1516612777529.6453}},
{"pid":20617,"tid":775,"ts":131853491039,"tts":4983835,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":111,"tdur":111,"args":{"startTimestamp":1516612777563.7944,"endTimestamp":1516612777563.9053}},
{"pid":20617,"tid":775,"ts":131853522581,"tts":5015320,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":90,"tdur":90,"args":{"startTimestamp":1516612777595.3364,"endTimestamp":1516612777595.4263}},
{"pid":20617,"tid":775,"ts":131853554540,"tts":5047261,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":99,"tdur":100,"args":{"startTimestamp":1516612777627.2954,"endTimestamp":1516612777627.3943}},
{"pid":20617,"tid":775,"ts":131853586066,"tts":5078763,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":94,"tdur":92,"args":{"startTimestamp":1516612777658.8213,"endTimestamp":1516612777658.9153}},
{"pid":20617,"tid":775,"ts":131853617604,"tts":5110283,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":97,"tdur":96,"args":{"startTimestamp":1516612777690.3594,"endTimestamp":1516612777690.4563}},
{"pid":20617,"tid":775,"ts":131853649093,"tts":5141760,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":91,"tdur":91,"args":{"startTimestamp":1516612777721.8484,"endTimestamp":1516612777721.9395}},
{"pid":20617,"tid":775,"ts":131853681100,"tts":5173685,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":112,"tdur":112,"args":{"startTimestamp":1516612777753.8555,"endTimestamp":1516612777753.9673}},
{"pid":20617,"tid":775,"ts":131853712501,"tts":5205076,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":87,"tdur":86,"args":{"startTimestamp":1516612777785.2563,"endTimestamp":1516612777785.3433}},
{"pid":20617,"tid":775,"ts":131853744172,"tts":5236722,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":95,"tdur":94,"args":{"startTimestamp":1516612777816.9275,"endTimestamp":1516612777817.0225}},
{"pid":20617,"tid":775,"ts":131853775619,"tts":5268157,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":85,"tdur":85,"args":{"startTimestamp":1516612777848.3743,"endTimestamp":1516612777848.4595}},
{"pid":20617,"tid":775,"ts":131853807107,"tts":5299598,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":91,"tdur":90,"args":{"startTimestamp":1516612777879.8623,"endTimestamp":1516612777879.9534}},
{"pid":20617,"tid":775,"ts":131853838621,"tts":5331072,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":89,"tdur":87,"args":{"startTimestamp":1516612777911.3765,"endTimestamp":1516612777911.4653}},
{"pid":20617,"tid":775,"ts":131853870895,"tts":5363266,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":107,"tdur":106,"args":{"startTimestamp":1516612777943.6504,"endTimestamp":1516612777943.7573}},
{"pid":20617,"tid":775,"ts":131853902594,"tts":5394941,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":102,"tdur":102,"args":{"startTimestamp":1516612777975.3494,"endTimestamp":1516612777975.4514}},
{"pid":20617,"tid":775,"ts":131853942763,"tts":5435070,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":168,"tdur":167,"args":{"startTimestamp":1516612778015.5183,"endTimestamp":1516612778015.6863}},
{"pid":20617,"tid":775,"ts":131853976262,"tts":5468544,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":101,"tdur":101,"args":{"startTimestamp":1516612778049.0173,"endTimestamp":1516612778049.1184}},
{"pid":20617,"tid":775,"ts":131854007899,"tts":5500135,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":110,"tdur":109,"args":{"startTimestamp":1516612778080.6543,"endTimestamp":1516612778080.7644}},
{"pid":20617,"tid":775,"ts":131854041795,"tts":5533988,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":132,"tdur":132,"args":{"startTimestamp":1516612778114.5503,"endTimestamp":1516612778114.6824}},
{"pid":20617,"tid":775,"ts":131854077456,"tts":5569362,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":110,"tdur":109,"args":{"startTimestamp":1516612778150.2114,"endTimestamp":1516612778150.3213}},
{"pid":20617,"tid":775,"ts":131854109392,"tts":5601279,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":96,"tdur":96,"args":{"startTimestamp":1516612778182.1475,"endTimestamp":1516612778182.2434}},
{"pid":20617,"tid":775,"ts":131854143448,"tts":5634927,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":129,"tdur":129,"args":{"startTimestamp":1516612778216.2034,"endTimestamp":1516612778216.3323}},
{"pid":20617,"tid":775,"ts":131854182943,"tts":5673922,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":142,"tdur":142,"args":{"startTimestamp":1516612778255.6985,"endTimestamp":1516612778255.8403}},
{"pid":20617,"tid":775,"ts":131854218948,"tts":5709652,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":123,"tdur":122,"args":{"startTimestamp":1516612778291.7034,"endTimestamp":1516612778291.8264}},
{"pid":20617,"tid":775,"ts":131854256444,"tts":5747127,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":166,"tdur":165,"args":{"startTimestamp":1516612778329.1995,"endTimestamp":1516612778329.3655}},
{"pid":20617,"tid":775,"ts":131854289969,"tts":5780634,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":98,"tdur":98,"args":{"startTimestamp":1516612778362.7244,"endTimestamp":1516612778362.8223}},
{"pid":20617,"tid":775,"ts":131854321662,"tts":5812285,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":94,"tdur":94,"args":{"startTimestamp":1516612778394.4175,"endTimestamp":1516612778394.5115}},
{"pid":20617,"tid":775,"ts":131854353365,"tts":5843977,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":94,"tdur":93,"args":{"startTimestamp":1516612778426.1204,"endTimestamp":1516612778426.2144}},
{"pid":20617,"tid":775,"ts":131854387559,"tts":5878126,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":147,"tdur":146,"args":{"startTimestamp":1516612778460.3145,"endTimestamp":1516612778460.4614}},
{"pid":20617,"tid":775,"ts":131854425092,"tts":5915605,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":139,"tdur":139,"args":{"startTimestamp":1516612778497.8474,"endTimestamp":1516612778497.9863}},
{"pid":20617,"tid":775,"ts":131854464930,"tts":5955094,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":162,"tdur":162,"args":{"startTimestamp":1516612778537.6853,"endTimestamp":1516612778537.8474}},
{"pid":20617,"tid":775,"ts":131854506497,"tts":5996588,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":121,"tdur":120,"args":{"startTimestamp":1516612778579.2524,"endTimestamp":1516612778579.3733}},
{"pid":20617,"tid":775,"ts":131854544220,"tts":6034311,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":125,"tdur":124,"args":{"startTimestamp":1516612778616.9753,"endTimestamp":1516612778617.1003}},
{"pid":20617,"tid":775,"ts":131854583199,"tts":6073275,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":119,"tdur":118,"args":{"startTimestamp":1516612778655.9543,"endTimestamp":1516612778656.0735}},
{"pid":20617,"tid":775,"ts":131854617859,"tts":6107895,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":108,"tdur":107,"args":{"startTimestamp":1516612778690.6143,"endTimestamp":1516612778690.7224}},
{"pid":20617,"tid":775,"ts":131854654968,"tts":6144899,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":107,"tdur":106,"args":{"startTimestamp":1516612778727.7234,"endTimestamp":1516612778727.8303}},
{"pid":20617,"tid":775,"ts":131854692344,"tts":6182256,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":125,"tdur":124,"args":{"startTimestamp":1516612778765.0994,"endTimestamp":1516612778765.2244}},
{"pid":20617,"tid":775,"ts":131854728107,"tts":6217934,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":132,"tdur":130,"args":{"startTimestamp":1516612778800.8623,"endTimestamp":1516612778800.9944}},
{"pid":20617,"tid":775,"ts":131854770945,"tts":6260505,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":134,"tdur":133,"args":{"startTimestamp":1516612778843.7004,"endTimestamp":1516612778843.8345}},
{"pid":20617,"tid":775,"ts":131854805793,"tts":6295295,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":110,"tdur":110,"args":{"startTimestamp":1516612778878.5483,"endTimestamp":1516612778878.6584}},
{"pid":20617,"tid":775,"ts":131854838828,"tts":6328314,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":106,"tdur":104,"args":{"startTimestamp":1516612778911.5833,"endTimestamp":1516612778911.6895}},
{"pid":20617,"tid":775,"ts":131854870279,"tts":6359764,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":99,"tdur":99,"args":{"startTimestamp":1516612778943.0344,"endTimestamp":1516612778943.1333}},
{"pid":20617,"tid":775,"ts":131854901778,"tts":6391252,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":92,"tdur":92,"args":{"startTimestamp":1516612778974.5334,"endTimestamp":1516612778974.6255}},
{"pid":20617,"tid":775,"ts":131854933254,"tts":6422725,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":87,"tdur":86,"args":{"startTimestamp":1516612779006.0093,"endTimestamp":1516612779006.0964}},
{"pid":20617,"tid":775,"ts":131854966992,"tts":6456101,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":117,"tdur":116,"args":{"startTimestamp":1516612779039.7473,"endTimestamp":1516612779039.8643}},
{"pid":20617,"tid":775,"ts":131855000147,"tts":6488882,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":117,"tdur":117,"args":{"startTimestamp":1516612779072.9023,"endTimestamp":1516612779073.0193}},
{"pid":20617,"tid":775,"ts":131855039749,"tts":6528436,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":122,"tdur":123,"args":{"startTimestamp":1516612779112.5044,"endTimestamp":1516612779112.6265}},
{"pid":20617,"tid":775,"ts":131855071854,"tts":6560464,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":103,"tdur":103,"args":{"startTimestamp":1516612779144.6094,"endTimestamp":1516612779144.7124}},
{"pid":20617,"tid":775,"ts":131855103915,"tts":6592443,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":99,"tdur":99,"args":{"startTimestamp":1516612779176.6704,"endTimestamp":1516612779176.7693}},
{"pid":20617,"tid":775,"ts":131855135496,"tts":6624011,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":92,"tdur":93,"args":{"startTimestamp":1516612779208.2515,"endTimestamp":1516612779208.3433}},
{"pid":20617,"tid":775,"ts":131855169128,"tts":6657626,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":141,"tdur":138,"args":{"startTimestamp":1516612779241.8833,"endTimestamp":1516612779242.0244}},
{"pid":20617,"tid":775,"ts":131855208767,"tts":6697198,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":174,"tdur":171,"args":{"startTimestamp":1516612779281.5225,"endTimestamp":1516612779281.6963}},
{"pid":20617,"tid":775,"ts":131855253525,"tts":6741913,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":197,"tdur":197,"args":{"startTimestamp":1516612779326.2803,"endTimestamp":1516612779326.4773}},
{"pid":20617,"tid":775,"ts":131855296480,"tts":6784847,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":131,"tdur":131,"args":{"startTimestamp":1516612779369.2354,"endTimestamp":1516612779369.3665}},
{"pid":20617,"tid":775,"ts":131855330145,"tts":6818500,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":103,"tdur":104,"args":{"startTimestamp":1516612779402.9004,"endTimestamp":1516612779403.0034}},
{"pid":20617,"tid":775,"ts":131855369680,"tts":6857993,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":105,"tdur":103,"args":{"startTimestamp":1516612779442.4353,"endTimestamp":1516612779442.5403}},
{"pid":20617,"tid":775,"ts":131855401155,"tts":6889460,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":105,"tdur":105,"args":{"startTimestamp":1516612779473.9104,"endTimestamp":1516612779474.0154}},
{"pid":20617,"tid":775,"ts":131855433532,"tts":6921834,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":98,"tdur":97,"args":{"startTimestamp":1516612779506.2874,"endTimestamp":1516612779506.3853}},
{"pid":20617,"tid":775,"ts":131855465139,"tts":6953428,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":109,"tdur":109,"args":{"startTimestamp":1516612779537.8943,"endTimestamp":1516612779538.0034}},
{"pid":20617,"tid":775,"ts":131855496630,"tts":6984919,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":83,"tdur":83,"args":{"startTimestamp":1516612779569.3853,"endTimestamp":1516612779569.4683}},
{"pid":20617,"tid":775,"ts":131855527970,"tts":7016259,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":96,"tdur":97,"args":{"startTimestamp":1516612779600.7253,"endTimestamp":1516612779600.8213}},
{"pid":20617,"tid":775,"ts":131855559484,"tts":7047760,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":90,"tdur":90,"args":{"startTimestamp":1516612779632.2393,"endTimestamp":1516612779632.3293}},
{"pid":20617,"tid":775,"ts":131855591074,"tts":7079343,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":147,"tdur":142,"args":{"startTimestamp":1516612779663.8293,"endTimestamp":1516612779663.9763}},
{"pid":20617,"tid":775,"ts":131855622518,"tts":7110779,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":88,"tdur":89,"args":{"startTimestamp":1516612779695.2734,"endTimestamp":1516612779695.3613}},
{"pid":20617,"tid":775,"ts":131855653883,"tts":7142134,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":99,"tdur":98,"args":{"startTimestamp":1516612779726.6384,"endTimestamp":1516612779726.7373}},
{"pid":20617,"tid":775,"ts":131855685264,"tts":7173513,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":84,"tdur":85,"args":{"startTimestamp":1516612779758.0193,"endTimestamp":1516612779758.1033}},
{"pid":20617,"tid":775,"ts":131855716671,"tts":7204921,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":94,"tdur":93,"args":{"startTimestamp":1516612779789.4263,"endTimestamp":1516612779789.5203}},
{"pid":20617,"tid":775,"ts":131855749422,"tts":7237657,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":111,"tdur":111,"args":{"startTimestamp":1516612779822.1775,"endTimestamp":1516612779822.2883}},
{"pid":20617,"tid":775,"ts":131855781105,"tts":7269324,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":91,"tdur":91,"args":{"startTimestamp":1516612779853.8604,"endTimestamp":1516612779853.9514}},
{"pid":20617,"tid":775,"ts":131855815930,"tts":7304005,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":134,"tdur":133,"args":{"startTimestamp":1516612779888.6853,"endTimestamp":1516612779888.8193}},
{"pid":20617,"tid":775,"ts":131855851385,"tts":7339273,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":133,"tdur":133,"args":{"startTimestamp":1516612779924.1404,"endTimestamp":1516612779924.2734}},
{"pid":20617,"tid":775,"ts":131855884147,"tts":7371937,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":103,"tdur":102,"args":{"startTimestamp":1516612779956.9023,"endTimestamp":1516612779957.0054}},
{"pid":20617,"tid":775,"ts":131855915635,"tts":7403418,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":109,"tdur":109,"args":{"startTimestamp":1516612779988.3904,"endTimestamp":1516612779988.4993}},
{"pid":20617,"tid":775,"ts":131855955463,"tts":7443015,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":123,"tdur":124,"args":{"startTimestamp":1516612780028.2183,"endTimestamp":1516612780028.3413}},
{"pid":20617,"tid":775,"ts":131855988909,"tts":7476386,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":236,"tdur":236,"args":{"startTimestamp":1516612780061.6643,"endTimestamp":1516612780061.9004}},
{"pid":20617,"tid":775,"ts":131856031610,"tts":7518887,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":109,"tdur":110,"args":{"startTimestamp":1516612780104.3655,"endTimestamp":1516612780104.4744}},
{"pid":20617,"tid":775,"ts":131856066085,"tts":7552628,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":131,"tdur":130,"args":{"startTimestamp":1516612780138.8403,"endTimestamp":1516612780138.9714}},
{"pid":20617,"tid":775,"ts":131856104321,"tts":7590686,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":113,"tdur":113,"args":{"startTimestamp":1516612780177.0764,"endTimestamp":1516612780177.1895}},
{"pid":20617,"tid":775,"ts":131856135942,"tts":7622283,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":110,"tdur":110,"args":{"startTimestamp":1516612780208.6973,"endTimestamp":1516612780208.8074}},
{"pid":20617,"tid":775,"ts":131856167485,"tts":7653802,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":97,"tdur":97,"args":{"startTimestamp":1516612780240.2405,"endTimestamp":1516612780240.3374}},
{"pid":20617,"tid":775,"ts":131856204837,"tts":7690944,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":130,"tdur":130,"args":{"startTimestamp":1516612780277.5923,"endTimestamp":1516612780277.7224}},
{"pid":20617,"tid":775,"ts":131856237523,"tts":7723522,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":125,"tdur":125,"args":{"startTimestamp":1516612780310.2783,"endTimestamp":1516612780310.4033}},
{"pid":20617,"tid":775,"ts":131856272266,"tts":7758030,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":198,"tdur":192,"args":{"startTimestamp":1516612780345.0215,"endTimestamp":1516612780345.2195}},
{"pid":20617,"tid":775,"ts":131856305415,"tts":7791038,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":120,"tdur":120,"args":{"startTimestamp":1516612780378.1704,"endTimestamp":1516612780378.2903}},
{"pid":20617,"tid":775,"ts":131856337396,"tts":7823003,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":104,"tdur":103,"args":{"startTimestamp":1516612780410.1514,"endTimestamp":1516612780410.2554}},
{"pid":20617,"tid":775,"ts":131856369254,"tts":7854847,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":115,"tdur":115,"args":{"startTimestamp":1516612780442.0093,"endTimestamp":1516612780442.1243}},
{"pid":20617,"tid":775,"ts":131856405558,"tts":7891128,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":104,"tdur":104,"args":{"startTimestamp":1516612780478.3135,"endTimestamp":1516612780478.4175}},
{"pid":20617,"tid":775,"ts":131856437066,"tts":7922633,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":108,"tdur":108,"args":{"startTimestamp":1516612780509.8213,"endTimestamp":1516612780509.9294}},
{"pid":20617,"tid":775,"ts":131856468660,"tts":7954216,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":99,"tdur":99,"args":{"startTimestamp":1516612780541.4153,"endTimestamp":1516612780541.5144}},
{"pid":20617,"tid":775,"ts":131856500177,"tts":7985733,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":97,"tdur":98,"args":{"startTimestamp":1516612780572.9324,"endTimestamp":1516612780573.0293}},
{"pid":20617,"tid":775,"ts":131856531628,"tts":8017177,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":92,"tdur":92,"args":{"startTimestamp":1516612780604.3833,"endTimestamp":1516612780604.4753}},
{"pid":20617,"tid":775,"ts":131856563023,"tts":8048571,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":86,"tdur":87,"args":{"startTimestamp":1516612780635.7783,"endTimestamp":1516612780635.8643}},
{"pid":20617,"tid":775,"ts":131856594647,"tts":8080196,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":101,"tdur":101,"args":{"startTimestamp":1516612780667.4023,"endTimestamp":1516612780667.5034}},
{"pid":20617,"tid":775,"ts":131856626182,"tts":8111720,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":108,"tdur":108,"args":{"startTimestamp":1516612780698.9373,"endTimestamp":1516612780699.0454}},
{"pid":20617,"tid":775,"ts":131856657562,"tts":8143100,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":79,"tdur":80,"args":{"startTimestamp":1516612780730.3174,"endTimestamp":1516612780730.3965}},
{"pid":20617,"tid":775,"ts":131856689095,"tts":8174626,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":108,"tdur":108,"args":{"startTimestamp":1516612780761.8503,"endTimestamp":1516612780761.9583}},
{"pid":20617,"tid":775,"ts":131856723859,"tts":8209371,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":91,"tdur":90,"args":{"startTimestamp":1516612780796.6143,"endTimestamp":1516612780796.7053}},
{"pid":20617,"tid":775,"ts":131856755436,"tts":8240915,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":106,"tdur":106,"args":{"startTimestamp":1516612780828.1914,"endTimestamp":1516612780828.2974}},
{"pid":20617,"tid":775,"ts":131856794488,"tts":8279962,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":91,"tdur":91,"args":{"startTimestamp":1516612780867.2434,"endTimestamp":1516612780867.3345}},
{"pid":20617,"tid":775,"ts":131856826287,"tts":8311671,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":108,"tdur":108,"args":{"startTimestamp":1516612780899.0425,"endTimestamp":1516612780899.1504}},
{"pid":20617,"tid":775,"ts":131856857709,"tts":8343086,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":90,"tdur":91,"args":{"startTimestamp":1516612780930.4644,"endTimestamp":1516612780930.5544}},
{"pid":20617,"tid":775,"ts":131856889197,"tts":8374567,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":94,"tdur":94,"args":{"startTimestamp":1516612780961.9524,"endTimestamp":1516612780962.0464}},
{"pid":20617,"tid":775,"ts":131856920587,"tts":8405957,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":94,"tdur":94,"args":{"startTimestamp":1516612780993.3423,"endTimestamp":1516612780993.4363}},
{"pid":20617,"tid":775,"ts":131856952283,"tts":8437570,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":98,"tdur":98,"args":{"startTimestamp":1516612781025.0383,"endTimestamp":1516612781025.1365}},
{"pid":20617,"tid":775,"ts":131856983897,"tts":8469184,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":97,"tdur":96,"args":{"startTimestamp":1516612781056.6523,"endTimestamp":1516612781056.7493}},
{"pid":20617,"tid":775,"ts":131857015388,"tts":8500663,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":101,"tdur":101,"args":{"startTimestamp":1516612781088.1433,"endTimestamp":1516612781088.2444}},
{"pid":20617,"tid":775,"ts":131857046842,"tts":8532117,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":82,"tdur":81,"args":{"startTimestamp":1516612781119.5974,"endTimestamp":1516612781119.6794}},
{"pid":20617,"tid":775,"ts":131857078644,"tts":8563892,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":99,"tdur":100,"args":{"startTimestamp":1516612781151.3994,"endTimestamp":1516612781151.4983}},
{"pid":20617,"tid":775,"ts":131857112954,"tts":8598088,"ph":"X","cat":"v8","name":"V8.GCScavenger","dur":137,"tdur":137,"args":{"startTimestamp":1516612781185.7095,"endTimestamp":1516612781185.8464}}
]
,
        "processStat": [
{"timestamp":1516612772106,"delay":3.058705,"cpu":0.15392031598845365,"memory":{"rss":41127936,"heapTotal":22470656,"heapUsed":15842160,"external":344742},"handles":3},
{"timestamp":1516612772122,"delay":2.785081999999999,"cpu":0.11771531852513735,"memory":{"rss":41181184,"heapTotal":22470656,"heapUsed":15885048,"external":344811},"handles":3},
{"timestamp":1516612772135,"delay":2.028129999999999,"cpu":0.0514626961963331,"memory":{"rss":41193472,"heapTotal":22470656,"heapUsed":15893608,"external":344880},"handles":3},
{"timestamp":1516612772146,"delay":1.0385679999999997,"cpu":0.038954328133866636,"memory":{"rss":41201664,"heapTotal":22470656,"heapUsed":15898016,"external":344949},"handles":3},
{"timestamp":1516612772157,"delay":0.47170000000000023,"cpu":0.035333326966968115,"memory":{"rss":41205760,"heapTotal":22470656,"heapUsed":15902296,"external":345018},"handles":3},
{"timestamp":1516612772170,"delay":1.706398,"cpu":0.03006902721059031,"memory":{"rss":41213952,"heapTotal":22470656,"heapUsed":15906576,"external":345087},"handles":3},
{"timestamp":1516612772182,"delay":1.7709039999999998,"cpu":0.0321130815441193,"memory":{"rss":41218048,"heapTotal":22470656,"heapUsed":15910856,"external":345156},"handles":3},
{"timestamp":1516612772195,"delay":2.923,"cpu":0.03242281204054786,"memory":{"rss":41222144,"heapTotal":22470656,"heapUsed":15915016,"external":345225},"handles":3},
{"timestamp":1516612772208,"delay":2.791366,"cpu":0.037447134262282855,"memory":{"rss":41226240,"heapTotal":22470656,"heapUsed":15919176,"external":345294},"handles":3},
{"timestamp":1516612772219,"delay":1.0917189999999994,"cpu":0.025965317008121103,"memory":{"rss":41230336,"heapTotal":22470656,"heapUsed":15923336,"external":345363},"handles":3},
{"timestamp":1516612772233,"delay":2.983644999999999,"cpu":0.03619938776822687,"memory":{"rss":41234432,"heapTotal":22470656,"heapUsed":15927496,"external":345432},"handles":3},
{"timestamp":1516612772245,"delay":1.697165,"cpu":0.03573515462934822,"memory":{"rss":41238528,"heapTotal":22470656,"heapUsed":15931656,"external":345501},"handles":3},
{"timestamp":1516612772257,"delay":2.3813519999999997,"cpu":0.040625611807175825,"memory":{"rss":41242624,"heapTotal":22470656,"heapUsed":15935816,"external":345570},"handles":3},
{"timestamp":1516612772271,"delay":2.920261,"cpu":0.03103652472655158,"memory":{"rss":41246720,"heapTotal":22470656,"heapUsed":15939976,"external":345639},"handles":3},
{"timestamp":1516612772280,"delay":0,"cpu":0.049681386263542564,"memory":{"rss":41250816,"heapTotal":22470656,"heapUsed":15944120,"external":345708},"handles":3},
{"timestamp":1516612772294,"delay":3.1183689999999995,"cpu":0.03719974640140097,"memory":{"rss":41254912,"heapTotal":22470656,"heapUsed":15948280,"external":345777},"handles":3},
{"timestamp":1516612772307,"delay":2.8667289999999994,"cpu":0.03489620400025523,"memory":{"rss":41259008,"heapTotal":22470656,"heapUsed":15952440,"external":345846},"handles":3},
{"timestamp":1516612772321,"delay":2.877825999999999,"cpu":0.02578074901773017,"memory":{"rss":41263104,"heapTotal":22470656,"heapUsed":15956600,"external":345915},"handles":3},
{"timestamp":1516612772330,"delay":0,"cpu":0.04226626754050102,"memory":{"rss":41267200,"heapTotal":22470656,"heapUsed":15960744,"external":345984},"handles":3},
{"timestamp":1516612772344,"delay":3.017363999999999,"cpu":0.03303280141816731,"memory":{"rss":41271296,"heapTotal":22470656,"heapUsed":15964904,"external":346053},"handles":3},
{"timestamp":1516612772356,"delay":1.8210540000000002,"cpu":0.039336593843493146,"memory":{"rss":41275392,"heapTotal":22470656,"heapUsed":15969064,"external":346122},"handles":3},
{"timestamp":1516612772367,"delay":0.3638130000000004,"cpu":0.03840285423907205,"memory":{"rss":41279488,"heapTotal":22470656,"heapUsed":15973224,"external":346191},"handles":3},
{"timestamp":1516612772378,"delay":1.159179,"cpu":0.03942942397464903,"memory":{"rss":41283584,"heapTotal":22470656,"heapUsed":15977384,"external":346260},"handles":3},
{"timestamp":1516612772389,"delay":0.5233419999999995,"cpu":0.04314218809956001,"memory":{"rss":41287680,"heapTotal":22470656,"heapUsed":15981544,"external":346329},"handles":3},
{"timestamp":1516612772402,"delay":2.9423579999999987,"cpu":0.0331469736813029,"memory":{"rss":41291776,"heapTotal":22470656,"heapUsed":15985704,"external":346398},"handles":3},
{"timestamp":1516612772413,"delay":0.572438,"cpu":0.040577206506200364,"memory":{"rss":41295872,"heapTotal":22470656,"heapUsed":15989864,"external":346467},"handles":3},
{"timestamp":1516612772426,"delay":3.0313470000000002,"cpu":0.03668078211715182,"memory":{"rss":41299968,"heapTotal":22470656,"heapUsed":15994024,"external":346536},"handles":3},
{"timestamp":1516612772440,"delay":2.985638999999999,"cpu":0.03380657663438819,"memory":{"rss":41304064,"heapTotal":22470656,"heapUsed":15998184,"external":346605},"handles":3},
{"timestamp":1516612772452,"delay":1.6882659999999987,"cpu":0.03285346175386495,"memory":{"rss":41308160,"heapTotal":22470656,"heapUsed":16002344,"external":346674},"handles":3},
{"timestamp":1516612772465,"delay":2.9226219999999987,"cpu":0.02932841338236157,"memory":{"rss":41316352,"heapTotal":22470656,"heapUsed":16006504,"external":346743},"handles":3},
{"timestamp":1516612772476,"delay":1.2790660000000003,"cpu":0.03635052760574324,"memory":{"rss":41320448,"heapTotal":22470656,"heapUsed":16010664,"external":346812},"handles":3},
{"timestamp":1516612772490,"delay":2.917627999999999,"cpu":0.025469072185698494,"memory":{"rss":41324544,"heapTotal":22470656,"heapUsed":16014824,"external":346881},"handles":3},
{"timestamp":1516612772502,"delay":1.6686040000000002,"cpu":0.0326517208056765,"memory":{"rss":41328640,"heapTotal":22470656,"heapUsed":16018984,"external":346950},"handles":3},
{"timestamp":1516612772511,"delay":0,"cpu":0.04004262805758572,"memory":{"rss":41332736,"heapTotal":22470656,"heapUsed":16023128,"external":347019},"handles":3},
{"timestamp":1516612772525,"delay":2.917973999999999,"cpu":0.029106731442562126,"memory":{"rss":41336832,"heapTotal":22470656,"heapUsed":16027288,"external":347088},"handles":3},
{"timestamp":1516612772537,"delay":1.67985,"cpu":0.03279151701434522,"memory":{"rss":41340928,"heapTotal":22470656,"heapUsed":16031448,"external":347157},"handles":3},
{"timestamp":1516612772550,"delay":2.9692429999999987,"cpu":0.028374824960870886,"memory":{"rss":41345024,"heapTotal":22470656,"heapUsed":16035608,"external":347226},"handles":3},
{"timestamp":1516612772561,"delay":0.47189199999999865,"cpu":0.036001135229431325,"memory":{"rss":41349120,"heapTotal":22470656,"heapUsed":16039768,"external":347295},"handles":3},
{"timestamp":1516612772574,"delay":2.9199399999999986,"cpu":0.02933450155341279,"memory":{"rss":41353216,"heapTotal":22470656,"heapUsed":16043928,"external":347364},"handles":3},
{"timestamp":1516612772587,"delay":2.922661999999999,"cpu":0.029637856348792534,"memory":{"rss":41357312,"heapTotal":22470656,"heapUsed":16048088,"external":347433},"handles":3},
{"timestamp":1516612772600,"delay":2.905201,"cpu":0.02944549255761301,"memory":{"rss":41361408,"heapTotal":22470656,"heapUsed":16052248,"external":347502},"handles":3},
{"timestamp":1516612772614,"delay":2.92394,"cpu":0.03125981705269446,"memory":{"rss":41365504,"heapTotal":22470656,"heapUsed":16056408,"external":347571},"handles":3},
{"timestamp":1516612772625,"delay":1.157026,"cpu":0.03414888519575019,"memory":{"rss":41369600,"heapTotal":22470656,"heapUsed":16060568,"external":347640},"handles":3},
{"timestamp":1516612772638,"delay":2.902987999999999,"cpu":0.029838049915259943,"memory":{"rss":41373696,"heapTotal":22470656,"heapUsed":16064728,"external":347709},"handles":3},
{"timestamp":1516612772651,"delay":2.918996,"cpu":0.030188104400682533,"memory":{"rss":41377792,"heapTotal":22470656,"heapUsed":16068888,"external":347778},"handles":3},
{"timestamp":1516612772664,"delay":1.9899500000000003,"cpu":0.032860854298808584,"memory":{"rss":41381888,"heapTotal":22470656,"heapUsed":16073048,"external":347847},"handles":3},
{"timestamp":1516612772674,"delay":0.3745789999999989,"cpu":0.04578499040780354,"memory":{"rss":41385984,"heapTotal":22470656,"heapUsed":16077208,"external":347916},"handles":3},
{"timestamp":1516612772688,"delay":2.743981999999999,"cpu":0.026836196096322176,"memory":{"rss":41394176,"heapTotal":22470656,"heapUsed":16081368,"external":347985},"handles":3},
{"timestamp":1516612772701,"delay":2.7510449999999995,"cpu":0.02595865672186084,"memory":{"rss":41398272,"heapTotal":22470656,"heapUsed":16085528,"external":348054},"handles":3},
{"timestamp":1516612772714,"delay":2.7851229999999987,"cpu":0.02753199949660242,"memory":{"rss":41402368,"heapTotal":22470656,"heapUsed":16089688,"external":348123},"handles":3},
{"timestamp":1516612772727,"delay":2.6612039999999997,"cpu":0.01800776608606891,"memory":{"rss":41406464,"heapTotal":22470656,"heapUsed":16093848,"external":348192},"handles":3},
{"timestamp":1516612772738,"delay":1.0851279999999992,"cpu":0.021740840520740944,"memory":{"rss":41410560,"heapTotal":22470656,"heapUsed":16098008,"external":348261},"handles":3},
{"timestamp":1516612772750,"delay":1.7507719999999996,"cpu":0.01787116625188541,"memory":{"rss":41414656,"heapTotal":22470656,"heapUsed":16102168,"external":348330},"handles":3},
{"timestamp":1516612772761,"delay":0.8396619999999988,"cpu":0.022140911773817305,"memory":{"rss":41422848,"heapTotal":22470656,"heapUsed":16106328,"external":348399},"handles":3},
{"timestamp":1516612772774,"delay":2.629607,"cpu":0.015202373280498753,"memory":{"rss":41426944,"heapTotal":22470656,"heapUsed":16110488,"external":348468},"handles":3},
{"timestamp":1516612772783,"delay":0,"cpu":0.025921618403875808,"memory":{"rss":41431040,"heapTotal":22470656,"heapUsed":16114632,"external":348537},"handles":3},
{"timestamp":1516612772796,"delay":2.806666,"cpu":0.031155649721793324,"memory":{"rss":41435136,"heapTotal":22470656,"heapUsed":16118792,"external":348606},"handles":3},
{"timestamp":1516612772807,"delay":0.4340529999999987,"cpu":0.040732014683076655,"memory":{"rss":41439232,"heapTotal":22470656,"heapUsed":16122952,"external":348675},"handles":3},
{"timestamp":1516612772820,"delay":2.7925309999999985,"cpu":0.03134641612359588,"memory":{"rss":41443328,"heapTotal":22470656,"heapUsed":16127112,"external":348744},"handles":3},
{"timestamp":1516612772832,"delay":1.5499089999999995,"cpu":0.026147392156942534,"memory":{"rss":41447424,"heapTotal":22470656,"heapUsed":16131272,"external":348813},"handles":3},
{"timestamp":1516612772843,"delay":0.30864599999999953,"cpu":0.03647423725676486,"memory":{"rss":41451520,"heapTotal":22470656,"heapUsed":16135432,"external":348882},"handles":3},
{"timestamp":1516612772854,"delay":0.44819299999999984,"cpu":0.042591096852824216,"memory":{"rss":41455616,"heapTotal":22470656,"heapUsed":16139592,"external":348951},"handles":3},
{"timestamp":1516612772864,"delay":0.2811810000000001,"cpu":0.044255616159271975,"memory":{"rss":41459712,"heapTotal":22470656,"heapUsed":16143760,"external":349020},"handles":3},
{"timestamp":1516612772877,"delay":3.009516999999999,"cpu":0.03489752924724262,"memory":{"rss":41463808,"heapTotal":22470656,"heapUsed":16147920,"external":349089},"handles":3},
{"timestamp":1516612772890,"delay":2.089623999999999,"cpu":0.030356609932616598,"memory":{"rss":41467904,"heapTotal":22470656,"heapUsed":16152080,"external":349158},"handles":3},
{"timestamp":1516612772901,"delay":0.7984299999999998,"cpu":0.03407902815501883,"memory":{"rss":41472000,"heapTotal":22470656,"heapUsed":16156240,"external":349227},"handles":3},
{"timestamp":1516612772912,"delay":0.5790740000000003,"cpu":0.03516375818904376,"memory":{"rss":41476096,"heapTotal":22470656,"heapUsed":16160400,"external":349296},"handles":3},
{"timestamp":1516612772923,"delay":0.401605,"cpu":0.047396531592960894,"memory":{"rss":41484288,"heapTotal":22470656,"heapUsed":16164560,"external":349365},"handles":3},
{"timestamp":1516612772936,"delay":2.804219,"cpu":0.028428129821896984,"memory":{"rss":41488384,"heapTotal":22470656,"heapUsed":16168720,"external":349434},"handles":3},
{"timestamp":1516612772946,"delay":0.2538129999999992,"cpu":0.034913841319321896,"memory":{"rss":41492480,"heapTotal":22470656,"heapUsed":16172880,"external":349503},"handles":3},
{"timestamp":1516612772959,"delay":2.815719999999999,"cpu":0.030665463977053185,"memory":{"rss":41496576,"heapTotal":22470656,"heapUsed":16177040,"external":349572},"handles":3},
{"timestamp":1516612772970,"delay":0.6710419999999999,"cpu":0.02661408323573274,"memory":{"rss":41500672,"heapTotal":22470656,"heapUsed":16181200,"external":349641},"handles":3},
{"timestamp":1516612772983,"delay":2.779287,"cpu":0.026996811324450257,"memory":{"rss":41504768,"heapTotal":22470656,"heapUsed":16185360,"external":349710},"handles":3},
{"timestamp":1516612772994,"delay":0.40592200000000034,"cpu":0.02633116027585062,"memory":{"rss":41508864,"heapTotal":22470656,"heapUsed":16189520,"external":349779},"handles":3},
{"timestamp":1516612773007,"delay":2.7353769999999997,"cpu":0.02771806441222745,"memory":{"rss":41512960,"heapTotal":22470656,"heapUsed":16193680,"external":349848},"handles":3},
{"timestamp":1516612773018,"delay":1.0255329999999994,"cpu":0.030746812875168943,"memory":{"rss":41521152,"heapTotal":22470656,"heapUsed":16197840,"external":349917},"handles":3},
{"timestamp":1516612773029,"delay":0.8342229999999997,"cpu":0.019383023591078012,"memory":{"rss":41525248,"heapTotal":22470656,"heapUsed":16202000,"external":349986},"handles":3},
{"timestamp":1516612773040,"delay":0.8872,"cpu":0.021125725622749652,"memory":{"rss":41529344,"heapTotal":22470656,"heapUsed":16206160,"external":350055},"handles":3},
{"timestamp":1516612773052,"delay":1.5539499999999986,"cpu":0.03141782680382034,"memory":{"rss":41533440,"heapTotal":22470656,"heapUsed":16210320,"external":350124},"handles":3},
{"timestamp":1516612773063,"delay":0.26793200000000006,"cpu":0.03506061395809789,"memory":{"rss":41541632,"heapTotal":22470656,"heapUsed":16214480,"external":350193},"handles":3},
{"timestamp":1516612773073,"delay":0.351246999999999,"cpu":0.03825626033269229,"memory":{"rss":41545728,"heapTotal":22470656,"heapUsed":16218672,"external":350262},"handles":3},
{"timestamp":1516612773085,"delay":0.8382480000000001,"cpu":0.03662953643430193,"memory":{"rss":41549824,"heapTotal":22470656,"heapUsed":16222832,"external":350331},"handles":3},
{"timestamp":1516612773095,"delay":0,"cpu":0.03896904381516581,"memory":{"rss":41553920,"heapTotal":22470656,"heapUsed":16226976,"external":350400},"handles":3},
{"timestamp":1516612773105,"delay":0.2673279999999991,"cpu":0.033991316922961846,"memory":{"rss":41558016,"heapTotal":22470656,"heapUsed":16231136,"external":350469},"handles":3},
{"timestamp":1516612773117,"delay":1.6495929999999994,"cpu":0.029786448333431047,"memory":{"rss":41562112,"heapTotal":22470656,"heapUsed":16235296,"external":350538},"handles":3},
{"timestamp":1516612773128,"delay":0.5172609999999995,"cpu":0.03936386099004294,"memory":{"rss":41566208,"heapTotal":22470656,"heapUsed":16239456,"external":350607},"handles":3},
{"timestamp":1516612773141,"delay":2.8334960000000002,"cpu":0.028830803391375195,"memory":{"rss":41570304,"heapTotal":22470656,"heapUsed":16243616,"external":350676},"handles":3},
{"timestamp":1516612773154,"delay":2.842701999999999,"cpu":0.03114609371143238,"memory":{"rss":41574400,"heapTotal":22470656,"heapUsed":16247776,"external":350745},"handles":3},
{"timestamp":1516612773166,"delay":1.2301719999999996,"cpu":0.029207032626036362,"memory":{"rss":41578496,"heapTotal":22470656,"heapUsed":16251936,"external":350814},"handles":3},
{"timestamp":1516612773177,"delay":0.501377999999999,"cpu":0.03028174016781417,"memory":{"rss":41582592,"heapTotal":22470656,"heapUsed":16256096,"external":350883},"handles":3},
{"timestamp":1516612773186,"delay":0,"cpu":0.02414159649886497,"memory":{"rss":41586688,"heapTotal":22470656,"heapUsed":16260240,"external":350952},"handles":3},
{"timestamp":1516612773198,"delay":1.8934489999999986,"cpu":0.629926609177876,"memory":{"rss":41824256,"heapTotal":22470656,"heapUsed":16455272,"external":351021},"handles":36},
{"timestamp":1516612774205,"delay":996.500054,"cpu":1.0018568762044002,"memory":{"rss":51802112,"heapTotal":31866880,"heapUsed":16939728,"external":49665},"handles":44},
{"timestamp":1516612775443,"delay":1227.6515749999999,"cpu":0.9981516809365352,"memory":{"rss":51965952,"heapTotal":31866880,"heapUsed":16786632,"external":49734},"handles":103},
{"timestamp":1516612778443,"delay":2989.682888,"cpu":0.9990229340535546,"memory":{"rss":52068352,"heapTotal":31866880,"heapUsed":16852728,"external":49803},"handles":103},
{"timestamp":1516612781209,"delay":2755.497492,"cpu":1.001600257462826,"memory":{"rss":53125120,"heapTotal":32391168,"heapUsed":16683584,"external":49872},"handles":95}
]
,
        "analysis": {"interval":[1516612775443,1516612778443],"issues":{"delay":true,"cpu":false,"memory":{"external":false,"rss":false,"heapTotal":false,"heapUsed":false},"handles":false},"issueCategory":"event-loop"}
      }
    
},{}],5:[function(require,module,exports){

const data = require('./data.json')

function loaddata (callback) {
  setTimeout(function () {
    callback(null, wrapData(data))
  })
}
module.exports = loaddata

function wrapData () {
  return new Data(data.analysis, data.processStat)
}

// Construct data container
class Data {
  constructor (analysis, data) {
    this.analysis = analysis
    this.data = data

    this.rawTimestamp = data.map((point) => point.timestamp)

    this.cpu = data.map((point) => ({
      x: new Date(point.timestamp),
      y: [point.cpu * 100]
    }))

    this.delay = data.map((point) => ({
      x: new Date(point.timestamp),
      y: [point.delay]
    }))

    const MB = Math.pow(1024, 2)
    this.memory = data.map((point) => ({
      x: new Date(point.timestamp),
      y: [
        point.memory.rss / MB,
        point.memory.heapTotal / MB,
        point.memory.heapUsed / MB
      ]
    }))

    this.handles = data.map((point) => ({
      x: new Date(point.timestamp),
      y: [point.handles]
    }))
  }

  getPoints (time) {
    const index = closestIndexByBinarySearch(
      this.rawTimestamp, time.getTime()
    )

    return {
      cpu: this.cpu[index],
      delay: this.delay[index],
      memory: this.memory[index],
      handles: this.handles[index]
    }
  }
}

function closestIndexByBinarySearch (array, searchValue) {
  let startIndex = 0
  let endIndex = array.length - 1
  let middleIndex = Math.floor((startIndex + endIndex) / 2)

  // continue until there are no elements between start and end
  while (endIndex - startIndex > 1) {
    if (searchValue <= array[middleIndex]) {
      endIndex = middleIndex
    } else {
      startIndex = middleIndex
    }

    middleIndex = Math.floor((startIndex + endIndex) / 2)
  }

  // startIndex and endIndex are now the two options, return
  // the one that is closest.
  if (array[endIndex] - searchValue <= searchValue - array[startIndex]) {
    return endIndex
  } else {
    return startIndex
  }
}

},{"./data.json":4}],6:[function(require,module,exports){
'use strict'

const d3 = require('./d3.js')
const EventEmitter = require('events')
const SubGraph = require('./sub-graph')

class Graph extends EventEmitter {
  constructor () {
    super()

    this.data = null
    this.container = d3.select('#graph')

    this.cpu = new SubGraph(this.container, {
      className: 'cpu',
      name: 'CPU Usage',
      unit: '%',
      shortLegend: ['Usage'],
      showLegend: false,
      lineStyle: [''],
      numLines: 1,
      ymin: 0,
      ymax: 100
    })

    this.memory = new SubGraph(this.container, {
      className: 'memory',
      name: 'Memory Usage',
      unit: 'MB',
      longLegend: ['RSS', 'Total Heap Allocated', 'Heap Used'],
      shortLegend: ['RSS', 'THA', 'HU'],
      showLegend: true,
      lineStyle: ['1, 2', '5, 3', ''],
      numLines: 3,
      ymin: 0
    })

    this.delay = new SubGraph(this.container, {
      className: 'delay',
      name: 'Event Loop Delay',
      unit: 'ms',
      shortLegend: ['Delay'],
      showLegend: false,
      lineStyle: [''],
      numLines: 1,
      ymin: 0,
      interpolation: 'curveStepBefore'
    })

    this.handles = new SubGraph(this.container, {
      className: 'handles',
      name: 'Active Handles',
      unit: '',
      shortLegend: ['Handles'],
      showLegend: false,
      lineStyle: [''],
      numLines: 1,
      ymin: 0,
      interpolation: 'curveStepBefore'
    })

    // relay events
    for (const subgraph of [this.cpu, this.memory, this.delay, this.handles]) {
      subgraph.on('hover-update', (unitX) => this.emit('hover-update', unitX))
      subgraph.on('hover-show', () => this.emit('hover-show'))
      subgraph.on('hover-hide', () => this.emit('hover-hide'))
      subgraph.on('alert-click', () => this.emit('alert-click'))
    }
  }

  hoverUpdate (unitX) {
    if (this.data === null) {
      throw new Error('data not loaded')
    }

    const points = this.data.getPoints(unitX)
    this.cpu.hoverUpdate(points.cpu)
    this.memory.hoverUpdate(points.memory)
    this.delay.hoverUpdate(points.delay)
    this.handles.hoverUpdate(points.handles)
  }

  hoverShow () {
    if (this.data === null) {
      throw new Error('data not loaded')
    }

    this.cpu.hoverShow()
    this.memory.hoverShow()
    this.delay.hoverShow()
    this.handles.hoverShow()
  }

  hoverHide () {
    if (this.data === null) {
      throw new Error('data not loaded')
    }

    this.cpu.hoverHide()
    this.memory.hoverHide()
    this.delay.hoverHide()
    this.handles.hoverHide()
  }

  setData (data) {
    this.data = data

    this.cpu.setData(data.cpu, data.analysis.interval, [
      data.analysis.issues.cpu
    ])
    this.delay.setData(data.delay, data.analysis.interval, [
      data.analysis.issues.delay
    ])
    this.handles.setData(data.handles, data.analysis.interval, [
      data.analysis.issues.handles
    ])
    this.memory.setData(data.memory, data.analysis.interval, [
      data.analysis.issues.memory.rss,
      data.analysis.issues.memory.heapTotal,
      data.analysis.issues.memory.heapUsed
    ])
  }

  draw () {
    this.cpu.draw()
    this.memory.draw()
    this.delay.draw()
    this.handles.draw()
  }
}

module.exports = new Graph()

},{"./d3.js":3,"./sub-graph":12,"events":25}],7:[function(require,module,exports){
'use strict'

const d3 = require('./d3.js')

class HoverBox {
  constructor (container, setup) {
    this.container = container
    this.setup = setup
    this.showen = false
    this.point = null

    this.size = {
      titleHeight: 36,
      lineWidth: 1,
      marginTop: 3,
      marginBottom: 3,
      titlePaddingTop: 5,
      legendHeight: 28,
      pointHeight: 10,
      containerHeight: container.node().getBoundingClientRect().height
    }

    const legendTopOffset = this.size.titleHeight + this.size.lineWidth +
                            this.size.marginTop

    const hoverBoxHeight = legendTopOffset + this.size.marginBottom +
                           this.setup.numLines * this.size.legendHeight

    this.height = hoverBoxHeight + this.size.pointHeight
    this.width = 136

    // create main svg element
    this.svg = this.container.append('svg')
      .classed('hover', true)
      .attr('width', this.width)
      .attr('height', this.height)

    this.dataBox = this.svg.append('g')
      .classed('data-box', true)

    // create background
    this.dataBox.append('rect')
      .classed('background', true)
      .attr('rx', 5)
      .attr('width', this.width)
      .attr('height', hoverBoxHeight)
    this.svg.append('path')
      .classed('pointer', true)
      .attr('d', `M${this.width / 2 - this.size.pointHeight} ${hoverBoxHeight} ` +
                 `L${this.width / 2} ${this.height} ` +
                 `L${this.width / 2 + this.size.pointHeight} ${hoverBoxHeight} Z`)
    this.svg.append('path')
      .classed('pointer', true)
      .classed('below-curve', true)
      .attr('d', `M${this.width / 2 - this.size.pointHeight} ${this.size.pointHeight} ` +
                 `L${this.width / 2} 0 ` +
                 `L${this.width / 2 + this.size.pointHeight} ${this.size.pointHeight} Z`)
    this.dataBox.append('rect')
      .classed('line', true)
      .attr('width', this.width)
      .attr('height', this.size.lineWidth)
      .attr('y', this.size.titleHeight)

    // create title text
    this.title = this.dataBox.append('text')
      .classed('title', true)
      .attr('y', this.size.titlePaddingTop)
      .attr('x', this.width / 2)
      .attr('dy', '1em')

    // create content text
    this.values = []
    for (let i = 0; i < this.setup.numLines; i++) {
      this.dataBox.append('text')
        .classed('legend', true)
        .attr('y', legendTopOffset + i * this.size.legendHeight)
        .attr('dy', '1em')
        .attr('x', 12)
        .text(this.setup.shortLegend[i])

      const valueText = this.dataBox.append('text')
        .classed('value', true)
        .attr('y', legendTopOffset + i * this.size.legendHeight)
        .attr('dy', '1em')
        .attr('x', 72)
      this.values.push(valueText)
    }
  }

  setPoint (point) {
    this.point = point
  }

  setPosition (x, y) {
    // Check if we should flip the hover box so it is below the data point, pointing up.
    // First check if any inner content of the hover box pokes above this graph area
    const titleOverflowsTop = y - this.height < 0 - this.size.titlePaddingTop

    // We shouldn't flip if this box starts closer to the container's bottom than the top
    // because it will overflow the bottom by further than it would have overflowed the top
    const startsCloserToTop = y < this.size.containerHeight / 2

    // So: flip if it overflows the top by less than flipping would overflow the bottom
    const belowCurve = titleOverflowsTop && startsCloserToTop

    this.dataBox.attr('transform', `translate(0, ${(belowCurve ? this.size.pointHeight : 0)})`)
    this.svg
      .style('top', Math.round(belowCurve ? y : y - this.height) + 'px')
      .style('left', Math.round(x - this.width / 2) + 'px')
      .classed('above-curve', !belowCurve)
      .classed('below-curve', belowCurve)
  }

  setDate (date) {
    this.title.text(d3.timeFormat('%I:%M:%S.%L %p')(date))
  }

  setData (data) {
    for (let i = 0; i < this.setup.numLines; i++) {
      this.values[i].text(data[i] + ' ' + this.setup.unit)
    }
  }

  show () {
    this.showen = true
    this.svg.classed('visible', true)
  }

  hide () {
    this.showen = false
    this.svg.classed('visible', false)
  }
}

module.exports = HoverBox

},{"./d3.js":3}],8:[function(require,module,exports){
'use strict'

const path = require('path')
/* global Node */

class Icon {
  constructor (name, content) {
    this.name = name

    // parse content though a documentFragment. Note that documentFragments
    // themself doesn't support innerHTML, so use a template element and
    // access its content property, which is a documentFragment itself.
    const template = document.createElement('template')
    template.innerHTML = content
    this.svgTemplateNode = document.adoptNode(template.content)
                                   .querySelector('svg')

    // Extract svg content into a template for easier insertion
    this.svgTemplateContent = document.createDocumentFragment()
    for (const child of this.svgTemplateNode.childNodes) {
      // svg can not have root text nodes, so skip these.
      if (child.nodeType === Node.TEXT_NODE) continue
      this.svgTemplateContent.appendChild(child)
    }
  }

  insert (svgNode) {
    for (const attr of this.svgTemplateNode.attributes) {
      svgNode.setAttribute(attr.name, attr.value)
    }
    svgNode.appendChild(this.svgTemplateContent.cloneNode(true))
  }
}

class Icons {
  constructor () {
    const icons = {
      'arrow-down': "<svg fill=\"#000\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z\"/>\n</svg>\n",
      'arrow-up': "<svg fill=\"#000\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z\"/>\n</svg>\n",
      'close': "<svg fill=\"#000\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n</svg>\n",
      'grid-1x4': "<svg fill=\"#000\" width=\"22px\" height=\"22px\" viewBox=\"0 0 22 22\" xmlns=\"http://www.w3.org/2000/svg\">\n  <rect x=\"0\" y=\"0\" width=\"22\" height=\"4\" rx=\"1\"></rect>\n  <rect x=\"0\" y=\"6\" width=\"22\" height=\"4\" rx=\"1\"></rect>\n  <rect x=\"0\" y=\"12\" width=\"22\" height=\"4\" rx=\"1\"></rect>\n  <rect x=\"0\" y=\"18\" width=\"22\" height=\"4\" rx=\"1\"></rect>\n</svg>\n",
      'grid-2x2': "<svg fill=\"#000\" width=\"22px\" height=\"22px\" viewBox=\"0 0 22 22\" xmlns=\"http://www.w3.org/2000/svg\">\n  <rect x=\"0\" y=\"0\" width=\"10\" height=\"10\" rx=\"1\"></rect>\n  <rect x=\"12\" y=\"0\" width=\"10\" height=\"10\" rx=\"1\"></rect>\n  <rect x=\"0\" y=\"12\" width=\"10\" height=\"10\" rx=\"1\"></rect>\n  <rect x=\"12\" y=\"12\" width=\"10\" height=\"10\" rx=\"1\"></rect>\n</svg>\n",
      'theme': "<svg fill=\"#000\" width=\"27px\" height=\"20px\" viewBox=\"0 0 27 20\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M26.8062827,10 C26.8062827,10.3935205 26.706558,10.792822 26.5071055,11.1979167 C25.1109379,13.859967 23.2336194,15.9924688 20.8750935,17.5954861 C18.5165676,19.1985034 16.0259418,20 13.4031414,20 C10.7803409,20 8.28971511,19.1956099 5.93118923,17.5868056 C3.57266335,15.9780012 1.6953448,13.8483929 0.299177263,11.1979167 C0.0997247569,10.792822 0,10.3935205 0,10 C0,9.60647951 0.0997247569,9.20717795 0.299177263,8.80208333 C1.6953448,6.15160712 3.57266335,4.02199878 5.93118923,2.41319444 C8.28971511,0.804390104 10.7803409,0 13.4031414,0 C16.0259418,0 18.5165676,0.804390104 20.8750935,2.41319444 C23.2336194,4.02199878 25.1109379,6.15160712 26.5071055,8.80208333 C26.706558,9.20717795 26.8062827,9.60647951 26.8062827,10 Z M13.4554974,16.5445026 C17.0699264,16.5445026 20,13.614429 20,10 C20,6.38557101 17.0699264,3.45549738 13.4554974,3.45549738 C9.84106839,3.45549738 6.91099476,6.38557101 6.91099476,10 C6.91099476,13.614429 9.84106839,16.5445026 13.4554974,16.5445026 Z\"></path>\n  <circle cx=\"13.4554974\" cy=\"9.89528796\" r=\"3.29842932\"></circle>\n</svg>\n",
      'warning': "<svg fill=\"#000\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"/>\n</svg>\n"
    }

    this._icons = new Map()
    for (const [key, content] of Object.entries(icons)) {
      this._icons.set(key, new Icon(key, content))
    }
  }

  insertIcon (name) {
    const icon = this._icons.get(name)
    return function (selection) {
      for (const node of selection.nodes()) {
        icon.insert(node)
      }
    }
  }
}

module.exports = new Icons()

},{"path":26}],9:[function(require,module,exports){
'use strict'

const loaddata = require('./data.js')

const menu = require('./menu.js')
const alert = require('./alert.js')
const graph = require('./graph.js')
const recommendation = require('./recommendation.js')

menu.on('toggle-theme', function () {
  document.documentElement.classList.toggle('light-theme')
})

menu.on('toggle-grid', function () {
  document.documentElement.classList.toggle('grid-layout')
  graph.draw()
})

alert.on('open', () => alert.open())
alert.on('close', () => alert.close())
alert.on('click', function (graphId) {
  document.getElementById(graphId).scrollIntoView({
    block: 'start',
    inline: 'nearest',
    behavior: 'smooth'
  })
})

graph.on('hover-show', () => graph.hoverShow())
graph.on('hover-hide', () => graph.hoverHide())
graph.on('hover-update', (unitX) => graph.hoverUpdate(unitX))

graph.on('alert-click', function () {
  document.documentElement.classList.add('recommendation-open')
  recommendation.openPanel()
  recommendation.draw()
})

recommendation.on('open-panel', function () {
  document.documentElement.classList.add('recommendation-open')
  recommendation.openPanel()
  recommendation.draw()
})
recommendation.on('close-panel', function () {
  recommendation.closePanel()
  // Remove class before draw so we can rescroll #main element
  document.documentElement.classList.remove('recommendation-open')
  recommendation.draw()
})

recommendation.on('change-page', function (category) {
  recommendation.setPage(category)
  recommendation.draw()
})

recommendation.on('open-read-more', function () {
  recommendation.openReadMore()
  recommendation.draw()
  recommendation.setPage(recommendation.selectedCategory)
  document.querySelector('body').classList.add('read-more-open')
})
recommendation.on('close-read-more', function () {
  recommendation.closeReadMore()
  recommendation.draw()
  document.querySelector('body').classList.remove('read-more-open')
})

recommendation.on('open-undetected', function () {
  recommendation.openUndetected()
  recommendation.draw()
})
recommendation.on('close-undetected', function () {
  recommendation.closeUndetected()
  recommendation.draw()
})

loaddata(function maybeDone (err, data) {
  if (err) throw err

  alert.setData(data)
  alert.draw()

  graph.setData(data)
  graph.draw()

  recommendation.setData(data)
  recommendation.draw()

  window.addEventListener('resize', function () {
    alert.draw()
    graph.draw()
  })
})

},{"./alert.js":1,"./data.js":5,"./graph.js":6,"./menu.js":10,"./recommendation.js":11}],10:[function(require,module,exports){

const d3 = require('./d3.js')
const icons = require('./icons')
const EventEmitter = require('events')

class Menu extends EventEmitter {
  constructor () {
    super()

    this.container = d3.select('#menu')

    this.setupThemeToggle()
    this.setupGridToggle()
  }

  setupGridToggle () {
    const gridButton = this.container.append('div')
      .classed('toggle', true)
      .attr('id', 'toggle-grid')
      .on('click', () => this.emit('toggle-grid'))

    gridButton.append('svg')
      .classed('grid-2x2', true)
      .call(icons.insertIcon('grid-2x2'))
    gridButton.append('svg')
      .classed('grid-1x4', true)
      .call(icons.insertIcon('grid-1x4'))
  }

  setupThemeToggle () {
    this.container.append('svg')
      .classed('toggle', true)
      .attr('id', 'toggle-theme')
      .on('click', () => this.emit('toggle-theme'))
      .call(icons.insertIcon('theme'))
  }
}

module.exports = new Menu()

},{"./d3.js":3,"./icons":8,"events":25}],11:[function(require,module,exports){
'use strict'

const d3 = require('./d3.js')
const icons = require('./icons.js')
const categories = require('./categories.js')
const EventEmitter = require('events')

class RecomendationWrapper {
  constructor (categoryContent) {
    this.content = categoryContent
    this.category = this.content.category
    this.menu = this.content.menu
    this.title = this.content.title

    this.selected = false
    this.detected = false

    this.articleHeadings = null
    this.articleSplits = []
    this.articleMenuItems = []

    this.selectedArticleSection = null
  }

  get order () {
    // always make the detected issue appear first
    return this.detected ? 0 : this.content.order
  }

  // should be done only when scrollingContainer's scrollTop === 0
  computeArticleSplits () {
    let startPos
    this.articleSplits = this.articleHeadings.map((articleHeading, i) => {
      const top = articleHeading.getBoundingClientRect().top
      if (i === 0) {
        startPos = top
      }
      return top - startPos
    })

    // Clear selection else nothing is selected when user returns to previously opened tab
    this.selectedArticleSection = null
  }

  updateSelectedArticleSection (scrollingContainer) {
    const scrollPos = scrollingContainer.node().scrollTop
    const maxScroll = scrollingContainer.node().scrollHeight - scrollingContainer.node().clientHeight
    let sectionIndex = scrollPos === maxScroll ? this.articleSplits.length - 1 : d3.bisect(this.articleSplits, scrollPos) - 1
    sectionIndex = Math.min(this.articleSplits.length - 1, sectionIndex)
    if (this.selectedArticleSection !== sectionIndex) {
      if (this.selectedArticleSection !== null) {
        this.articleMenuItems[this.selectedArticleSection].classList.remove('selected')
      }
      this.articleMenuItems[sectionIndex].classList.add('selected')
      this.selectedArticleSection = sectionIndex
    }
  }

  getSummary () { return this.content.getSummary() }
  hasSummary () { return this.content.hasSummary() }
  getReadMore () {
    const readMore = this.content.getReadMore()

    this.articleHeadings = Array.from(readMore.querySelectorAll('h2'))
    this.articleHeadings.forEach((articleHeading, i) => {
      articleHeading.id = `article-section-${i}`
    })

    this.articleMenuItems = this.articleHeadings.map((articleHeading) => {
      const link = document.createElement('a')
      link.href = '#' + articleHeading.id
      link.textContent = articleHeading.textContent
      d3.select(link).on('click', () => {
        window.event.preventDefault()
        d3.select('#' + articleHeading.id).node().scrollIntoView({ behavior: 'smooth', block: 'start' })
      })
      return link
    })

    return readMore
  }
  hasReadMore () { return this.content.hasReadMore() }
}

class Recomendation extends EventEmitter {
  constructor () {
    super()

    this.readMoreOpened = false
    this.panelOpened = false
    this.selectedCategory = 'unknown'

    // wrap content with selected and detected properties
    this.recommendations = new Map()
    this.recommendationsAsArray = []
    for (const categoryContent of categories.asArray()) {
      const wrapper = new RecomendationWrapper(categoryContent)
      this.recommendations.set(wrapper.category, wrapper)
      this.recommendationsAsArray.push(wrapper)
    }

    // create HTML structure
    this.space = d3.select('#recommendation-space')

    this.container = d3.select('#recommendation')
      .classed('open', this.panelOpened)

    this.details = this.container.append('div')
      .classed('details', true)
    this.menu = this.details.append('div')
      .classed('menu', true)
    this.content = this.details.append('div')
      .classed('content', true)
    this.summaryTitle = this.content.append('div')
      .classed('summary-title', true)
    this.summary = this.content.append('div')
      .classed('summary', true)
    this.readMoreButton = this.content.append('div')
      .classed('read-more-button', true)
      .on('click', () => this.emit(this.readMoreOpened ? 'close-read-more' : 'open-read-more'))
    this.readMore = this.content.append('div')
      .classed('read-more', true)

    this.articleMenu = this.readMore.append('nav')
      .classed('article-menu', true)

    this.readMoreArticle = this.readMore.append('article')
      .classed('article', true)

    this.pages = this.menu.append('ul')
    const pagesLiEnter = this.pages
      .selectAll('li')
      .data(this.recommendationsAsArray, (d) => d.category)
      .enter()
        .append('li')
          .classed('recommendation-tab', true)
          .on('click', (d) => this.emit('change-page', d.category))
    pagesLiEnter.append('span')
      .classed('menu-text', true)
      .attr('data-content', (d) => d.menu)
    pagesLiEnter.append('svg')
      .classed('warning-icon', true)
      .call(icons.insertIcon('warning'))

    // Add button to show-hide tabs described undetected issues
    this.pages.append('li')
      .classed('show-hide', true)
      .append('a')
        .classed('show-hide-button', true)
        .classed('menu-text', true)
        .on('click', () => this.emit(this.undetectedOpened ? 'close-undetected' : 'open-undetected'))

    this.menu.append('svg')
      .classed('close', true)
      .on('click', () => this.emit('close-panel'))
      .call(icons.insertIcon('close'))

    this.bar = this.container.append('div')
      .classed('bar', true)
      .on('click', () => this.emit(this.panelOpened ? 'close-panel' : 'open-panel'))
    this.bar.append('div')
      .classed('text', true)
    const arrow = this.bar.append('div')
      .classed('arrow', true)
    arrow.append('svg')
      .classed('arrow-up', true)
      .call(icons.insertIcon('arrow-up'))
    arrow.append('svg')
      .classed('arrow-down', true)
      .call(icons.insertIcon('arrow-down'))
  }

  setData (data) {
    this.defaultCategory = data.analysis.issueCategory
    this.recommendations.get(this.defaultCategory).detected = true

    // reorder pages, such that the detected page selector comes first
    this.pages
      .selectAll('li.recommendation-tab')
      .sort((a, b) => a.order - b.order)

    // set the default page
    this.setPage(this.defaultCategory)
  }

  setPage (newCategory) {
    const oldCategory = this.selectedCategory
    this.selectedCategory = newCategory
    this.recommendations.get(oldCategory).selected = false
    this.recommendations.get(newCategory).selected = true

    const recommendation = this.recommendations.get(this.selectedCategory)
    this.container.classed('has-read-more', recommendation.hasReadMore())
    this.readMoreArticle.html(null)
    this.articleMenu.html(null)
    if (recommendation.hasReadMore()) {
      this.readMoreArticle.node().appendChild(recommendation.getReadMore())

      this.articleMenu.append('h2')
        .classed('plain', true)
        .text('Jump to section')
      for (const menuItem of recommendation.articleMenuItems) {
        this.articleMenu.node().appendChild(menuItem)
      }

      if (this.readMoreOpened) {
        const content = this.content
        content.node().scrollTo(0, 0)
        recommendation.computeArticleSplits()
        recommendation.updateSelectedArticleSection(content)
        content
          .on('scroll.scroller', () => {
            recommendation.updateSelectedArticleSection(content)
          })
      }
    }
  }

  draw () {
    this.pages
      .selectAll('li.recommendation-tab')
      .data(this.recommendationsAsArray, (d) => d.category)
      .classed('detected', (d) => d.detected)
      .classed('selected', (d) => d.selected)
      .classed('has-read-more', (d) => d.hasReadMore())

    const recommendation = this.recommendations.get(this.selectedCategory)

    // update state classes
    this.container
      .classed('open', this.panelOpened)
      .classed('read-more-open', this.readMoreOpened)
      .classed('undetected-opened', this.undetectedOpened)
      .classed('detected', recommendation.detected)

    // set content
    this.summaryTitle
      .text(recommendation.title)

    this.summary.html(null)
    if (recommendation.hasSummary()) {
      this.summary.node().appendChild(recommendation.getSummary())
    }

    // set space height such that the fixed element don't have to hide
    // something in the background.
    this.space.style('height', this.details.node().offsetHeight + 'px')
  }

  openPanel () {
    this.panelOpened = true
  }
  closePanel () {
    this.panelOpened = false
  }

  openReadMore () {
    this.readMoreOpened = true
  }
  closeReadMore () {
    this.readMoreOpened = false
  }

  openUndetected () {
    this.undetectedOpened = true
  }
  closeUndetected () {
    this.undetectedOpened = false

    // If user hides undetected tabs while one is selected, switch to default tab
    if (!this.recommendations.get(this.selectedCategory).detected) {
      this.emit('change-page', this.defaultCategory)
    }
  }
}

module.exports = new Recomendation()

},{"./categories.js":2,"./d3.js":3,"./icons.js":8,"events":25}],12:[function(require,module,exports){
'use strict'

const d3 = require('./d3.js')
const icons = require('./icons.js')
const EventEmitter = require('events')
const HoverBox = require('./hover-box')

const margin = {top: 20, right: 20, bottom: 30, left: 50}
const headerHeight = 18

// https://bl.ocks.org/d3noob/402dd382a51a4f6eea487f9a35566de0
class SubGraph extends EventEmitter {
  constructor (container, setup) {
    super()

    this.setup = setup

    // setup graph container
    this.container = container.append('div')
      .attr('id', `graph-${setup.className}`)
      .classed('sub-graph', true)
      .classed(setup.className, true)

    // add headline
    this.header = this.container.append('div')
      .classed('header', true)

    this.title = this.header.append('div')
      .classed('title', true)

    this.title.append('span')
      .classed('name', true)
      .text(this.setup.name)

    this.title.append('span')
      .classed('unit', true)
      .text(this.setup.unit)

    this.alert = this.title.append('svg')
      .classed('alert', true)
      .on('click', () => this.emit('alert-click'))
      .call(icons.insertIcon('warning'))

    // add legned
    this.legendItems = []
    if (setup.showLegend) {
      const legend = this.header.append('div')
        .classed('legend', true)

      for (let i = 0; i < this.setup.numLines; i++) {
        const legendItem = legend.append('div')
          .classed('legend-item', true)

        legendItem.append('svg')
          .attr('width', 30)
          .attr('height', 18)
          .append('line')
            .attr('stroke-dasharray', this.setup.lineStyle[i])
            .attr('x1', 0)
            .attr('x2', 30)
            .attr('y1', 9)
            .attr('y2', 9)

        legendItem.append('span')
          .classed('long-legend', true)
          .text(this.setup.longLegend[i])
        legendItem.append('span')
          .classed('short-legend', true)
          .text(this.setup.shortLegend[i])

        this.legendItems.push(legendItem)
      }
    }

    // add hover box
    this.hover = new HoverBox(this.container, this.setup)

    // setup graph area
    this.svg = this.container.append('svg')
      .classed('chart', true)
    this.graph = this.svg.append('g')
      .attr('transform',
            'translate(' + margin.left + ',' + margin.top + ')')

    // setup hover events
    this.hoverArea = this.container.append('div')
      .classed('hover-area', true)
      .style('left', margin.left + 'px')
      .style('top', (margin.top + headerHeight) + 'px')
      .on('mousemove', () => {
        const positionX = d3.mouse(this.graph.node())[0]
        if (positionX >= 0) {
          const unitX = this.xScale.invert(positionX)
          this.emit('hover-update', unitX)
        }
      })
      .on('mouseleave', () => this.emit('hover-hide'))
      .on('mouseenter', () => this.emit('hover-show'))

    // add background node
    this.background = this.graph.append('rect')
      .classed('background', true)
      .attr('x', 0)
      .attr('y', 0)

    this.interval = this.graph.append('rect')
      .classed('interval', true)
      .attr('x', 0)
      .attr('y', 0)

    // define scales
    this.xScale = d3.scaleTime()
    this.yScale = d3.scaleLinear()

    // define axis
    this.xAxis = d3.axisBottom(this.xScale).ticks(10)
    this.xAxisElement = this.graph.append('g')

    this.yAxis = d3.axisLeft(this.yScale).ticks(4)
    this.yAxisElement = this.graph.append('g')

    // Define drawer functions and line elements
    this.lineDrawers = []
    this.lineElements = []
    for (let i = 0; i < this.setup.numLines; i++) {
      const lineDrawer = d3.line()
          .x((d) => this.xScale(d.x))
          .y((d) => this.yScale(d.y[i]))
          .curve(d3[this.setup.interpolation || 'curveLinear'])

      this.lineDrawers.push(lineDrawer)

      const lineElement = this.graph.append('path')
          .attr('class', 'line')
          .attr('stroke-dasharray', this.setup.lineStyle[i])

      this.lineElements.push(lineElement)
    }
  }

  getGraphSize () {
    const outerSize = this.svg.node().getBoundingClientRect()
    return {
      width: outerSize.width - margin.left - margin.right,
      height: outerSize.height - margin.top - margin.bottom
    }
  }

  setData (data, interval, issues) {
    // Update domain of scales
    this.xScale.domain(d3.extent(data, function (d) { return d.x }))

    // For the y-axis, ymin and ymax is supported, however they will
    // never truncate the data.
    let ymin = d3.min(data, function (d) { return Math.min(...d.y) })
    if (this.setup.hasOwnProperty('ymin')) {
      ymin = Math.min(ymin, this.setup.ymin)
    }
    let ymax = d3.max(data, function (d) { return Math.max(...d.y) })
    if (this.setup.hasOwnProperty('ymax')) {
      ymax = Math.max(ymax, this.setup.ymax)
    }
    this.yScale.domain([ymin, ymax])

    // Save interval
    this.interval.data([interval])

    // Attach data
    let foundIssue = false
    for (let i = 0; i < this.setup.numLines; i++) {
      this.lineElements[i].data([data])

      // Modify css classes for lines, title icon
      this.lineElements[i].classed('bad', issues[i])
      if (this.setup.showLegend) {
        this.legendItems[i].classed('bad', issues[i])
      }

      if (issues[i]) foundIssue = true
    }
    this.alert.classed('visible', foundIssue)
  }

  draw () {
    const { width, height } = this.getGraphSize()

    // set hover area size
    this.hoverArea
      .style('width', width + 'px')
      .style('height', height + 'px')

    // set background size
    this.background
      .attr('width', width)
      .attr('height', height)

    // set the ranges
    this.xScale.range([0, width])
    this.yScale.range([height, 0])

    // set interval size
    this.interval
      .attr('x', (d) => this.xScale(d[0]))
      .attr('width', (d) => this.xScale(d[1]) - this.xScale(d[0]))
      .attr('height', height)

    // update axis
    this.xAxisElement
        .attr('transform', 'translate(0,' + height + ')')
        .call(this.xAxis)
    this.yAxisElement
        .call(this.yAxis)

    // update lines
    for (let i = 0; i < this.setup.numLines; i++) {
      this.lineElements[i].attr('d', this.lineDrawers[i])
    }

    // since the xScale was changed, update the hover box
    if (this.hover.showen) {
      this.hoverUpdate(this.hover.point)
    }
  }

  hoverShow () {
    this.hover.show()
  }

  hoverHide () {
    this.hover.hide()
  }

  hoverUpdate (point) {
    if (!this.hover.showen) return

    // get position of curve there is at the top
    const xInGraphPositon = this.xScale(point.x)
    const yInGraphPositon = this.yScale(Math.max(...point.y))

    // calculate graph position relative to `this.container`.
    // The `this.container` has `position:relative`, which is why that is
    // the origin.
    const xPosition = xInGraphPositon + margin.left
    const yPosition = yInGraphPositon + margin.top + headerHeight

    this.hover.setPoint(point)
    this.hover.setPosition(xPosition, yPosition)
    this.hover.setDate(point.x)
    this.hover.setData(point.y.map((v) => this.yScale.tickFormat()(v)))
  }
}

module.exports = SubGraph

},{"./d3.js":3,"./hover-box":7,"./icons.js":8,"events":25}],13:[function(require,module,exports){
// https://d3js.org/d3-array/ Version 1.2.1. Copyright 2017 Mike Bostock.
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
	typeof define === 'function' && define.amd ? define(['exports'], factory) :
	(factory((global.d3 = global.d3 || {})));
}(this, (function (exports) { 'use strict';

var ascending = function(a, b) {
  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;
};

var bisector = function(compare) {
  if (compare.length === 1) compare = ascendingComparator(compare);
  return {
    left: function(a, x, lo, hi) {
      if (lo == null) lo = 0;
      if (hi == null) hi = a.length;
      while (lo < hi) {
        var mid = lo + hi >>> 1;
        if (compare(a[mid], x) < 0) lo = mid + 1;
        else hi = mid;
      }
      return lo;
    },
    right: function(a, x, lo, hi) {
      if (lo == null) lo = 0;
      if (hi == null) hi = a.length;
      while (lo < hi) {
        var mid = lo + hi >>> 1;
        if (compare(a[mid], x) > 0) hi = mid;
        else lo = mid + 1;
      }
      return lo;
    }
  };
};

function ascendingComparator(f) {
  return function(d, x) {
    return ascending(f(d), x);
  };
}

var ascendingBisect = bisector(ascending);
var bisectRight = ascendingBisect.right;
var bisectLeft = ascendingBisect.left;

var pairs = function(array, f) {
  if (f == null) f = pair;
  var i = 0, n = array.length - 1, p = array[0], pairs = new Array(n < 0 ? 0 : n);
  while (i < n) pairs[i] = f(p, p = array[++i]);
  return pairs;
};

function pair(a, b) {
  return [a, b];
}

var cross = function(values0, values1, reduce) {
  var n0 = values0.length,
      n1 = values1.length,
      values = new Array(n0 * n1),
      i0,
      i1,
      i,
      value0;

  if (reduce == null) reduce = pair;

  for (i0 = i = 0; i0 < n0; ++i0) {
    for (value0 = values0[i0], i1 = 0; i1 < n1; ++i1, ++i) {
      values[i] = reduce(value0, values1[i1]);
    }
  }

  return values;
};

var descending = function(a, b) {
  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;
};

var number = function(x) {
  return x === null ? NaN : +x;
};

var variance = function(values, valueof) {
  var n = values.length,
      m = 0,
      i = -1,
      mean = 0,
      value,
      delta,
      sum = 0;

  if (valueof == null) {
    while (++i < n) {
      if (!isNaN(value = number(values[i]))) {
        delta = value - mean;
        mean += delta / ++m;
        sum += delta * (value - mean);
      }
    }
  }

  else {
    while (++i < n) {
      if (!isNaN(value = number(valueof(values[i], i, values)))) {
        delta = value - mean;
        mean += delta / ++m;
        sum += delta * (value - mean);
      }
    }
  }

  if (m > 1) return sum / (m - 1);
};

var deviation = function(array, f) {
  var v = variance(array, f);
  return v ? Math.sqrt(v) : v;
};

var extent = function(values, valueof) {
  var n = values.length,
      i = -1,
      value,
      min,
      max;

  if (valueof == null) {
    while (++i < n) { // Find the first comparable value.
      if ((value = values[i]) != null && value >= value) {
        min = max = value;
        while (++i < n) { // Compare the remaining values.
          if ((value = values[i]) != null) {
            if (min > value) min = value;
            if (max < value) max = value;
          }
        }
      }
    }
  }

  else {
    while (++i < n) { // Find the first comparable value.
      if ((value = valueof(values[i], i, values)) != null && value >= value) {
        min = max = value;
        while (++i < n) { // Compare the remaining values.
          if ((value = valueof(values[i], i, values)) != null) {
            if (min > value) min = value;
            if (max < value) max = value;
          }
        }
      }
    }
  }

  return [min, max];
};

var array = Array.prototype;

var slice = array.slice;
var map = array.map;

var constant = function(x) {
  return function() {
    return x;
  };
};

var identity = function(x) {
  return x;
};

var range = function(start, stop, step) {
  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;

  var i = -1,
      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,
      range = new Array(n);

  while (++i < n) {
    range[i] = start + i * step;
  }

  return range;
};

var e10 = Math.sqrt(50);
var e5 = Math.sqrt(10);
var e2 = Math.sqrt(2);

var ticks = function(start, stop, count) {
  var reverse,
      i = -1,
      n,
      ticks,
      step;

  stop = +stop, start = +start, count = +count;
  if (start === stop && count > 0) return [start];
  if (reverse = stop < start) n = start, start = stop, stop = n;
  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];

  if (step > 0) {
    start = Math.ceil(start / step);
    stop = Math.floor(stop / step);
    ticks = new Array(n = Math.ceil(stop - start + 1));
    while (++i < n) ticks[i] = (start + i) * step;
  } else {
    start = Math.floor(start * step);
    stop = Math.ceil(stop * step);
    ticks = new Array(n = Math.ceil(start - stop + 1));
    while (++i < n) ticks[i] = (start - i) / step;
  }

  if (reverse) ticks.reverse();

  return ticks;
};

function tickIncrement(start, stop, count) {
  var step = (stop - start) / Math.max(0, count),
      power = Math.floor(Math.log(step) / Math.LN10),
      error = step / Math.pow(10, power);
  return power >= 0
      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)
      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);
}

function tickStep(start, stop, count) {
  var step0 = Math.abs(stop - start) / Math.max(0, count),
      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),
      error = step0 / step1;
  if (error >= e10) step1 *= 10;
  else if (error >= e5) step1 *= 5;
  else if (error >= e2) step1 *= 2;
  return stop < start ? -step1 : step1;
}

var sturges = function(values) {
  return Math.ceil(Math.log(values.length) / Math.LN2) + 1;
};

var histogram = function() {
  var value = identity,
      domain = extent,
      threshold = sturges;

  function histogram(data) {
    var i,
        n = data.length,
        x,
        values = new Array(n);

    for (i = 0; i < n; ++i) {
      values[i] = value(data[i], i, data);
    }

    var xz = domain(values),
        x0 = xz[0],
        x1 = xz[1],
        tz = threshold(values, x0, x1);

    // Convert number of thresholds into uniform thresholds.
    if (!Array.isArray(tz)) {
      tz = tickStep(x0, x1, tz);
      tz = range(Math.ceil(x0 / tz) * tz, Math.floor(x1 / tz) * tz, tz); // exclusive
    }

    // Remove any thresholds outside the domain.
    var m = tz.length;
    while (tz[0] <= x0) tz.shift(), --m;
    while (tz[m - 1] > x1) tz.pop(), --m;

    var bins = new Array(m + 1),
        bin;

    // Initialize bins.
    for (i = 0; i <= m; ++i) {
      bin = bins[i] = [];
      bin.x0 = i > 0 ? tz[i - 1] : x0;
      bin.x1 = i < m ? tz[i] : x1;
    }

    // Assign data to bins by value, ignoring any outside the domain.
    for (i = 0; i < n; ++i) {
      x = values[i];
      if (x0 <= x && x <= x1) {
        bins[bisectRight(tz, x, 0, m)].push(data[i]);
      }
    }

    return bins;
  }

  histogram.value = function(_) {
    return arguments.length ? (value = typeof _ === "function" ? _ : constant(_), histogram) : value;
  };

  histogram.domain = function(_) {
    return arguments.length ? (domain = typeof _ === "function" ? _ : constant([_[0], _[1]]), histogram) : domain;
  };

  histogram.thresholds = function(_) {
    return arguments.length ? (threshold = typeof _ === "function" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), histogram) : threshold;
  };

  return histogram;
};

var quantile = function(values, p, valueof) {
  if (valueof == null) valueof = number;
  if (!(n = values.length)) return;
  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);
  if (p >= 1) return +valueof(values[n - 1], n - 1, values);
  var n,
      i = (n - 1) * p,
      i0 = Math.floor(i),
      value0 = +valueof(values[i0], i0, values),
      value1 = +valueof(values[i0 + 1], i0 + 1, values);
  return value0 + (value1 - value0) * (i - i0);
};

var freedmanDiaconis = function(values, min, max) {
  values = map.call(values, number).sort(ascending);
  return Math.ceil((max - min) / (2 * (quantile(values, 0.75) - quantile(values, 0.25)) * Math.pow(values.length, -1 / 3)));
};

var scott = function(values, min, max) {
  return Math.ceil((max - min) / (3.5 * deviation(values) * Math.pow(values.length, -1 / 3)));
};

var max = function(values, valueof) {
  var n = values.length,
      i = -1,
      value,
      max;

  if (valueof == null) {
    while (++i < n) { // Find the first comparable value.
      if ((value = values[i]) != null && value >= value) {
        max = value;
        while (++i < n) { // Compare the remaining values.
          if ((value = values[i]) != null && value > max) {
            max = value;
          }
        }
      }
    }
  }

  else {
    while (++i < n) { // Find the first comparable value.
      if ((value = valueof(values[i], i, values)) != null && value >= value) {
        max = value;
        while (++i < n) { // Compare the remaining values.
          if ((value = valueof(values[i], i, values)) != null && value > max) {
            max = value;
          }
        }
      }
    }
  }

  return max;
};

var mean = function(values, valueof) {
  var n = values.length,
      m = n,
      i = -1,
      value,
      sum = 0;

  if (valueof == null) {
    while (++i < n) {
      if (!isNaN(value = number(values[i]))) sum += value;
      else --m;
    }
  }

  else {
    while (++i < n) {
      if (!isNaN(value = number(valueof(values[i], i, values)))) sum += value;
      else --m;
    }
  }

  if (m) return sum / m;
};

var median = function(values, valueof) {
  var n = values.length,
      i = -1,
      value,
      numbers = [];

  if (valueof == null) {
    while (++i < n) {
      if (!isNaN(value = number(values[i]))) {
        numbers.push(value);
      }
    }
  }

  else {
    while (++i < n) {
      if (!isNaN(value = number(valueof(values[i], i, values)))) {
        numbers.push(value);
      }
    }
  }

  return quantile(numbers.sort(ascending), 0.5);
};

var merge = function(arrays) {
  var n = arrays.length,
      m,
      i = -1,
      j = 0,
      merged,
      array;

  while (++i < n) j += arrays[i].length;
  merged = new Array(j);

  while (--n >= 0) {
    array = arrays[n];
    m = array.length;
    while (--m >= 0) {
      merged[--j] = array[m];
    }
  }

  return merged;
};

var min = function(values, valueof) {
  var n = values.length,
      i = -1,
      value,
      min;

  if (valueof == null) {
    while (++i < n) { // Find the first comparable value.
      if ((value = values[i]) != null && value >= value) {
        min = value;
        while (++i < n) { // Compare the remaining values.
          if ((value = values[i]) != null && min > value) {
            min = value;
          }
        }
      }
    }
  }

  else {
    while (++i < n) { // Find the first comparable value.
      if ((value = valueof(values[i], i, values)) != null && value >= value) {
        min = value;
        while (++i < n) { // Compare the remaining values.
          if ((value = valueof(values[i], i, values)) != null && min > value) {
            min = value;
          }
        }
      }
    }
  }

  return min;
};

var permute = function(array, indexes) {
  var i = indexes.length, permutes = new Array(i);
  while (i--) permutes[i] = array[indexes[i]];
  return permutes;
};

var scan = function(values, compare) {
  if (!(n = values.length)) return;
  var n,
      i = 0,
      j = 0,
      xi,
      xj = values[j];

  if (compare == null) compare = ascending;

  while (++i < n) {
    if (compare(xi = values[i], xj) < 0 || compare(xj, xj) !== 0) {
      xj = xi, j = i;
    }
  }

  if (compare(xj, xj) === 0) return j;
};

var shuffle = function(array, i0, i1) {
  var m = (i1 == null ? array.length : i1) - (i0 = i0 == null ? 0 : +i0),
      t,
      i;

  while (m) {
    i = Math.random() * m-- | 0;
    t = array[m + i0];
    array[m + i0] = array[i + i0];
    array[i + i0] = t;
  }

  return array;
};

var sum = function(values, valueof) {
  var n = values.length,
      i = -1,
      value,
      sum = 0;

  if (valueof == null) {
    while (++i < n) {
      if (value = +values[i]) sum += value; // Note: zero and null are equivalent.
    }
  }

  else {
    while (++i < n) {
      if (value = +valueof(values[i], i, values)) sum += value;
    }
  }

  return sum;
};

var transpose = function(matrix) {
  if (!(n = matrix.length)) return [];
  for (var i = -1, m = min(matrix, length), transpose = new Array(m); ++i < m;) {
    for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {
      row[j] = matrix[j][i];
    }
  }
  return transpose;
};

function length(d) {
  return d.length;
}

var zip = function() {
  return transpose(arguments);
};

exports.bisect = bisectRight;
exports.bisectRight = bisectRight;
exports.bisectLeft = bisectLeft;
exports.ascending = ascending;
exports.bisector = bisector;
exports.cross = cross;
exports.descending = descending;
exports.deviation = deviation;
exports.extent = extent;
exports.histogram = histogram;
exports.thresholdFreedmanDiaconis = freedmanDiaconis;
exports.thresholdScott = scott;
exports.thresholdSturges = sturges;
exports.max = max;
exports.mean = mean;
exports.median = median;
exports.merge = merge;
exports.min = min;
exports.pairs = pairs;
exports.permute = permute;
exports.quantile = quantile;
exports.range = range;
exports.scan = scan;
exports.shuffle = shuffle;
exports.sum = sum;
exports.ticks = ticks;
exports.tickIncrement = tickIncrement;
exports.tickStep = tickStep;
exports.transpose = transpose;
exports.variance = variance;
exports.zip = zip;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{}],14:[function(require,module,exports){
// https://d3js.org/d3-axis/ Version 1.0.8. Copyright 2017 Mike Bostock.
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
	typeof define === 'function' && define.amd ? define(['exports'], factory) :
	(factory((global.d3 = global.d3 || {})));
}(this, (function (exports) { 'use strict';

var slice = Array.prototype.slice;

var identity = function(x) {
  return x;
};

var top = 1;
var right = 2;
var bottom = 3;
var left = 4;
var epsilon = 1e-6;

function translateX(x) {
  return "translate(" + (x + 0.5) + ",0)";
}

function translateY(y) {
  return "translate(0," + (y + 0.5) + ")";
}

function number(scale) {
  return function(d) {
    return +scale(d);
  };
}

function center(scale) {
  var offset = Math.max(0, scale.bandwidth() - 1) / 2; // Adjust for 0.5px offset.
  if (scale.round()) offset = Math.round(offset);
  return function(d) {
    return +scale(d) + offset;
  };
}

function entering() {
  return !this.__axis;
}

function axis(orient, scale) {
  var tickArguments = [],
      tickValues = null,
      tickFormat = null,
      tickSizeInner = 6,
      tickSizeOuter = 6,
      tickPadding = 3,
      k = orient === top || orient === left ? -1 : 1,
      x = orient === left || orient === right ? "x" : "y",
      transform = orient === top || orient === bottom ? translateX : translateY;

  function axis(context) {
    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,
        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,
        spacing = Math.max(tickSizeInner, 0) + tickPadding,
        range = scale.range(),
        range0 = +range[0] + 0.5,
        range1 = +range[range.length - 1] + 0.5,
        position = (scale.bandwidth ? center : number)(scale.copy()),
        selection = context.selection ? context.selection() : context,
        path = selection.selectAll(".domain").data([null]),
        tick = selection.selectAll(".tick").data(values, scale).order(),
        tickExit = tick.exit(),
        tickEnter = tick.enter().append("g").attr("class", "tick"),
        line = tick.select("line"),
        text = tick.select("text");

    path = path.merge(path.enter().insert("path", ".tick")
        .attr("class", "domain")
        .attr("stroke", "#000"));

    tick = tick.merge(tickEnter);

    line = line.merge(tickEnter.append("line")
        .attr("stroke", "#000")
        .attr(x + "2", k * tickSizeInner));

    text = text.merge(tickEnter.append("text")
        .attr("fill", "#000")
        .attr(x, k * spacing)
        .attr("dy", orient === top ? "0em" : orient === bottom ? "0.71em" : "0.32em"));

    if (context !== selection) {
      path = path.transition(context);
      tick = tick.transition(context);
      line = line.transition(context);
      text = text.transition(context);

      tickExit = tickExit.transition(context)
          .attr("opacity", epsilon)
          .attr("transform", function(d) { return isFinite(d = position(d)) ? transform(d) : this.getAttribute("transform"); });

      tickEnter
          .attr("opacity", epsilon)
          .attr("transform", function(d) { var p = this.parentNode.__axis; return transform(p && isFinite(p = p(d)) ? p : position(d)); });
    }

    tickExit.remove();

    path
        .attr("d", orient === left || orient == right
            ? "M" + k * tickSizeOuter + "," + range0 + "H0.5V" + range1 + "H" + k * tickSizeOuter
            : "M" + range0 + "," + k * tickSizeOuter + "V0.5H" + range1 + "V" + k * tickSizeOuter);

    tick
        .attr("opacity", 1)
        .attr("transform", function(d) { return transform(position(d)); });

    line
        .attr(x + "2", k * tickSizeInner);

    text
        .attr(x, k * spacing)
        .text(format);

    selection.filter(entering)
        .attr("fill", "none")
        .attr("font-size", 10)
        .attr("font-family", "sans-serif")
        .attr("text-anchor", orient === right ? "start" : orient === left ? "end" : "middle");

    selection
        .each(function() { this.__axis = position; });
  }

  axis.scale = function(_) {
    return arguments.length ? (scale = _, axis) : scale;
  };

  axis.ticks = function() {
    return tickArguments = slice.call(arguments), axis;
  };

  axis.tickArguments = function(_) {
    return arguments.length ? (tickArguments = _ == null ? [] : slice.call(_), axis) : tickArguments.slice();
  };

  axis.tickValues = function(_) {
    return arguments.length ? (tickValues = _ == null ? null : slice.call(_), axis) : tickValues && tickValues.slice();
  };

  axis.tickFormat = function(_) {
    return arguments.length ? (tickFormat = _, axis) : tickFormat;
  };

  axis.tickSize = function(_) {
    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;
  };

  axis.tickSizeInner = function(_) {
    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;
  };

  axis.tickSizeOuter = function(_) {
    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;
  };

  axis.tickPadding = function(_) {
    return arguments.length ? (tickPadding = +_, axis) : tickPadding;
  };

  return axis;
}

function axisTop(scale) {
  return axis(top, scale);
}

function axisRight(scale) {
  return axis(right, scale);
}

function axisBottom(scale) {
  return axis(bottom, scale);
}

function axisLeft(scale) {
  return axis(left, scale);
}

exports.axisTop = axisTop;
exports.axisRight = axisRight;
exports.axisBottom = axisBottom;
exports.axisLeft = axisLeft;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{}],15:[function(require,module,exports){
// https://d3js.org/d3-collection/ Version 1.0.4. Copyright 2017 Mike Bostock.
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
	typeof define === 'function' && define.amd ? define(['exports'], factory) :
	(factory((global.d3 = global.d3 || {})));
}(this, (function (exports) { 'use strict';

var prefix = "$";

function Map() {}

Map.prototype = map.prototype = {
  constructor: Map,
  has: function(key) {
    return (prefix + key) in this;
  },
  get: function(key) {
    return this[prefix + key];
  },
  set: function(key, value) {
    this[prefix + key] = value;
    return this;
  },
  remove: function(key) {
    var property = prefix + key;
    return property in this && delete this[property];
  },
  clear: function() {
    for (var property in this) if (property[0] === prefix) delete this[property];
  },
  keys: function() {
    var keys = [];
    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));
    return keys;
  },
  values: function() {
    var values = [];
    for (var property in this) if (property[0] === prefix) values.push(this[property]);
    return values;
  },
  entries: function() {
    var entries = [];
    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});
    return entries;
  },
  size: function() {
    var size = 0;
    for (var property in this) if (property[0] === prefix) ++size;
    return size;
  },
  empty: function() {
    for (var property in this) if (property[0] === prefix) return false;
    return true;
  },
  each: function(f) {
    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);
  }
};

function map(object, f) {
  var map = new Map;

  // Copy constructor.
  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });

  // Index array by numeric index or specified key function.
  else if (Array.isArray(object)) {
    var i = -1,
        n = object.length,
        o;

    if (f == null) while (++i < n) map.set(i, object[i]);
    else while (++i < n) map.set(f(o = object[i], i, object), o);
  }

  // Convert object to map.
  else if (object) for (var key in object) map.set(key, object[key]);

  return map;
}

var nest = function() {
  var keys = [],
      sortKeys = [],
      sortValues,
      rollup,
      nest;

  function apply(array, depth, createResult, setResult) {
    if (depth >= keys.length) {
      if (sortValues != null) array.sort(sortValues);
      return rollup != null ? rollup(array) : array;
    }

    var i = -1,
        n = array.length,
        key = keys[depth++],
        keyValue,
        value,
        valuesByKey = map(),
        values,
        result = createResult();

    while (++i < n) {
      if (values = valuesByKey.get(keyValue = key(value = array[i]) + "")) {
        values.push(value);
      } else {
        valuesByKey.set(keyValue, [value]);
      }
    }

    valuesByKey.each(function(values, key) {
      setResult(result, key, apply(values, depth, createResult, setResult));
    });

    return result;
  }

  function entries(map$$1, depth) {
    if (++depth > keys.length) return map$$1;
    var array, sortKey = sortKeys[depth - 1];
    if (rollup != null && depth >= keys.length) array = map$$1.entries();
    else array = [], map$$1.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });
    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;
  }

  return nest = {
    object: function(array) { return apply(array, 0, createObject, setObject); },
    map: function(array) { return apply(array, 0, createMap, setMap); },
    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },
    key: function(d) { keys.push(d); return nest; },
    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },
    sortValues: function(order) { sortValues = order; return nest; },
    rollup: function(f) { rollup = f; return nest; }
  };
};

function createObject() {
  return {};
}

function setObject(object, key, value) {
  object[key] = value;
}

function createMap() {
  return map();
}

function setMap(map$$1, key, value) {
  map$$1.set(key, value);
}

function Set() {}

var proto = map.prototype;

Set.prototype = set.prototype = {
  constructor: Set,
  has: proto.has,
  add: function(value) {
    value += "";
    this[prefix + value] = value;
    return this;
  },
  remove: proto.remove,
  clear: proto.clear,
  values: proto.keys,
  size: proto.size,
  empty: proto.empty,
  each: proto.each
};

function set(object, f) {
  var set = new Set;

  // Copy constructor.
  if (object instanceof Set) object.each(function(value) { set.add(value); });

  // Otherwise, assume it’s an array.
  else if (object) {
    var i = -1, n = object.length;
    if (f == null) while (++i < n) set.add(object[i]);
    else while (++i < n) set.add(f(object[i], i, object));
  }

  return set;
}

var keys = function(map) {
  var keys = [];
  for (var key in map) keys.push(key);
  return keys;
};

var values = function(map) {
  var values = [];
  for (var key in map) values.push(map[key]);
  return values;
};

var entries = function(map) {
  var entries = [];
  for (var key in map) entries.push({key: key, value: map[key]});
  return entries;
};

exports.nest = nest;
exports.set = set;
exports.map = map;
exports.keys = keys;
exports.values = values;
exports.entries = entries;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{}],16:[function(require,module,exports){
// https://d3js.org/d3-color/ Version 1.0.3. Copyright 2017 Mike Bostock.
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
	typeof define === 'function' && define.amd ? define(['exports'], factory) :
	(factory((global.d3 = global.d3 || {})));
}(this, (function (exports) { 'use strict';

var define = function(constructor, factory, prototype) {
  constructor.prototype = factory.prototype = prototype;
  prototype.constructor = constructor;
};

function extend(parent, definition) {
  var prototype = Object.create(parent.prototype);
  for (var key in definition) prototype[key] = definition[key];
  return prototype;
}

function Color() {}

var darker = 0.7;
var brighter = 1 / darker;

var reI = "\\s*([+-]?\\d+)\\s*";
var reN = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*";
var reP = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*";
var reHex3 = /^#([0-9a-f]{3})$/;
var reHex6 = /^#([0-9a-f]{6})$/;
var reRgbInteger = new RegExp("^rgb\\(" + [reI, reI, reI] + "\\)$");
var reRgbPercent = new RegExp("^rgb\\(" + [reP, reP, reP] + "\\)$");
var reRgbaInteger = new RegExp("^rgba\\(" + [reI, reI, reI, reN] + "\\)$");
var reRgbaPercent = new RegExp("^rgba\\(" + [reP, reP, reP, reN] + "\\)$");
var reHslPercent = new RegExp("^hsl\\(" + [reN, reP, reP] + "\\)$");
var reHslaPercent = new RegExp("^hsla\\(" + [reN, reP, reP, reN] + "\\)$");

var named = {
  aliceblue: 0xf0f8ff,
  antiquewhite: 0xfaebd7,
  aqua: 0x00ffff,
  aquamarine: 0x7fffd4,
  azure: 0xf0ffff,
  beige: 0xf5f5dc,
  bisque: 0xffe4c4,
  black: 0x000000,
  blanchedalmond: 0xffebcd,
  blue: 0x0000ff,
  blueviolet: 0x8a2be2,
  brown: 0xa52a2a,
  burlywood: 0xdeb887,
  cadetblue: 0x5f9ea0,
  chartreuse: 0x7fff00,
  chocolate: 0xd2691e,
  coral: 0xff7f50,
  cornflowerblue: 0x6495ed,
  cornsilk: 0xfff8dc,
  crimson: 0xdc143c,
  cyan: 0x00ffff,
  darkblue: 0x00008b,
  darkcyan: 0x008b8b,
  darkgoldenrod: 0xb8860b,
  darkgray: 0xa9a9a9,
  darkgreen: 0x006400,
  darkgrey: 0xa9a9a9,
  darkkhaki: 0xbdb76b,
  darkmagenta: 0x8b008b,
  darkolivegreen: 0x556b2f,
  darkorange: 0xff8c00,
  darkorchid: 0x9932cc,
  darkred: 0x8b0000,
  darksalmon: 0xe9967a,
  darkseagreen: 0x8fbc8f,
  darkslateblue: 0x483d8b,
  darkslategray: 0x2f4f4f,
  darkslategrey: 0x2f4f4f,
  darkturquoise: 0x00ced1,
  darkviolet: 0x9400d3,
  deeppink: 0xff1493,
  deepskyblue: 0x00bfff,
  dimgray: 0x696969,
  dimgrey: 0x696969,
  dodgerblue: 0x1e90ff,
  firebrick: 0xb22222,
  floralwhite: 0xfffaf0,
  forestgreen: 0x228b22,
  fuchsia: 0xff00ff,
  gainsboro: 0xdcdcdc,
  ghostwhite: 0xf8f8ff,
  gold: 0xffd700,
  goldenrod: 0xdaa520,
  gray: 0x808080,
  green: 0x008000,
  greenyellow: 0xadff2f,
  grey: 0x808080,
  honeydew: 0xf0fff0,
  hotpink: 0xff69b4,
  indianred: 0xcd5c5c,
  indigo: 0x4b0082,
  ivory: 0xfffff0,
  khaki: 0xf0e68c,
  lavender: 0xe6e6fa,
  lavenderblush: 0xfff0f5,
  lawngreen: 0x7cfc00,
  lemonchiffon: 0xfffacd,
  lightblue: 0xadd8e6,
  lightcoral: 0xf08080,
  lightcyan: 0xe0ffff,
  lightgoldenrodyellow: 0xfafad2,
  lightgray: 0xd3d3d3,
  lightgreen: 0x90ee90,
  lightgrey: 0xd3d3d3,
  lightpink: 0xffb6c1,
  lightsalmon: 0xffa07a,
  lightseagreen: 0x20b2aa,
  lightskyblue: 0x87cefa,
  lightslategray: 0x778899,
  lightslategrey: 0x778899,
  lightsteelblue: 0xb0c4de,
  lightyellow: 0xffffe0,
  lime: 0x00ff00,
  limegreen: 0x32cd32,
  linen: 0xfaf0e6,
  magenta: 0xff00ff,
  maroon: 0x800000,
  mediumaquamarine: 0x66cdaa,
  mediumblue: 0x0000cd,
  mediumorchid: 0xba55d3,
  mediumpurple: 0x9370db,
  mediumseagreen: 0x3cb371,
  mediumslateblue: 0x7b68ee,
  mediumspringgreen: 0x00fa9a,
  mediumturquoise: 0x48d1cc,
  mediumvioletred: 0xc71585,
  midnightblue: 0x191970,
  mintcream: 0xf5fffa,
  mistyrose: 0xffe4e1,
  moccasin: 0xffe4b5,
  navajowhite: 0xffdead,
  navy: 0x000080,
  oldlace: 0xfdf5e6,
  olive: 0x808000,
  olivedrab: 0x6b8e23,
  orange: 0xffa500,
  orangered: 0xff4500,
  orchid: 0xda70d6,
  palegoldenrod: 0xeee8aa,
  palegreen: 0x98fb98,
  paleturquoise: 0xafeeee,
  palevioletred: 0xdb7093,
  papayawhip: 0xffefd5,
  peachpuff: 0xffdab9,
  peru: 0xcd853f,
  pink: 0xffc0cb,
  plum: 0xdda0dd,
  powderblue: 0xb0e0e6,
  purple: 0x800080,
  rebeccapurple: 0x663399,
  red: 0xff0000,
  rosybrown: 0xbc8f8f,
  royalblue: 0x4169e1,
  saddlebrown: 0x8b4513,
  salmon: 0xfa8072,
  sandybrown: 0xf4a460,
  seagreen: 0x2e8b57,
  seashell: 0xfff5ee,
  sienna: 0xa0522d,
  silver: 0xc0c0c0,
  skyblue: 0x87ceeb,
  slateblue: 0x6a5acd,
  slategray: 0x708090,
  slategrey: 0x708090,
  snow: 0xfffafa,
  springgreen: 0x00ff7f,
  steelblue: 0x4682b4,
  tan: 0xd2b48c,
  teal: 0x008080,
  thistle: 0xd8bfd8,
  tomato: 0xff6347,
  turquoise: 0x40e0d0,
  violet: 0xee82ee,
  wheat: 0xf5deb3,
  white: 0xffffff,
  whitesmoke: 0xf5f5f5,
  yellow: 0xffff00,
  yellowgreen: 0x9acd32
};

define(Color, color, {
  displayable: function() {
    return this.rgb().displayable();
  },
  toString: function() {
    return this.rgb() + "";
  }
});

function color(format) {
  var m;
  format = (format + "").trim().toLowerCase();
  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00
      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000
      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)
      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)
      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)
      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)
      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)
      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)
      : named.hasOwnProperty(format) ? rgbn(named[format])
      : format === "transparent" ? new Rgb(NaN, NaN, NaN, 0)
      : null;
}

function rgbn(n) {
  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);
}

function rgba(r, g, b, a) {
  if (a <= 0) r = g = b = NaN;
  return new Rgb(r, g, b, a);
}

function rgbConvert(o) {
  if (!(o instanceof Color)) o = color(o);
  if (!o) return new Rgb;
  o = o.rgb();
  return new Rgb(o.r, o.g, o.b, o.opacity);
}

function rgb(r, g, b, opacity) {
  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);
}

function Rgb(r, g, b, opacity) {
  this.r = +r;
  this.g = +g;
  this.b = +b;
  this.opacity = +opacity;
}

define(Rgb, rgb, extend(Color, {
  brighter: function(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  darker: function(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  rgb: function() {
    return this;
  },
  displayable: function() {
    return (0 <= this.r && this.r <= 255)
        && (0 <= this.g && this.g <= 255)
        && (0 <= this.b && this.b <= 255)
        && (0 <= this.opacity && this.opacity <= 1);
  },
  toString: function() {
    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));
    return (a === 1 ? "rgb(" : "rgba(")
        + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + ", "
        + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + ", "
        + Math.max(0, Math.min(255, Math.round(this.b) || 0))
        + (a === 1 ? ")" : ", " + a + ")");
  }
}));

function hsla(h, s, l, a) {
  if (a <= 0) h = s = l = NaN;
  else if (l <= 0 || l >= 1) h = s = NaN;
  else if (s <= 0) h = NaN;
  return new Hsl(h, s, l, a);
}

function hslConvert(o) {
  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);
  if (!(o instanceof Color)) o = color(o);
  if (!o) return new Hsl;
  if (o instanceof Hsl) return o;
  o = o.rgb();
  var r = o.r / 255,
      g = o.g / 255,
      b = o.b / 255,
      min = Math.min(r, g, b),
      max = Math.max(r, g, b),
      h = NaN,
      s = max - min,
      l = (max + min) / 2;
  if (s) {
    if (r === max) h = (g - b) / s + (g < b) * 6;
    else if (g === max) h = (b - r) / s + 2;
    else h = (r - g) / s + 4;
    s /= l < 0.5 ? max + min : 2 - max - min;
    h *= 60;
  } else {
    s = l > 0 && l < 1 ? 0 : h;
  }
  return new Hsl(h, s, l, o.opacity);
}

function hsl(h, s, l, opacity) {
  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);
}

function Hsl(h, s, l, opacity) {
  this.h = +h;
  this.s = +s;
  this.l = +l;
  this.opacity = +opacity;
}

define(Hsl, hsl, extend(Color, {
  brighter: function(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  darker: function(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  rgb: function() {
    var h = this.h % 360 + (this.h < 0) * 360,
        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,
        l = this.l,
        m2 = l + (l < 0.5 ? l : 1 - l) * s,
        m1 = 2 * l - m2;
    return new Rgb(
      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),
      hsl2rgb(h, m1, m2),
      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),
      this.opacity
    );
  },
  displayable: function() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s))
        && (0 <= this.l && this.l <= 1)
        && (0 <= this.opacity && this.opacity <= 1);
  }
}));

/* From FvD 13.37, CSS Color Module Level 3 */
function hsl2rgb(h, m1, m2) {
  return (h < 60 ? m1 + (m2 - m1) * h / 60
      : h < 180 ? m2
      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60
      : m1) * 255;
}

var deg2rad = Math.PI / 180;
var rad2deg = 180 / Math.PI;

var Kn = 18;
var Xn = 0.950470;
var Yn = 1;
var Zn = 1.088830;
var t0 = 4 / 29;
var t1 = 6 / 29;
var t2 = 3 * t1 * t1;
var t3 = t1 * t1 * t1;

function labConvert(o) {
  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);
  if (o instanceof Hcl) {
    var h = o.h * deg2rad;
    return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);
  }
  if (!(o instanceof Rgb)) o = rgbConvert(o);
  var b = rgb2xyz(o.r),
      a = rgb2xyz(o.g),
      l = rgb2xyz(o.b),
      x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),
      y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),
      z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);
  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);
}

function lab(l, a, b, opacity) {
  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);
}

function Lab(l, a, b, opacity) {
  this.l = +l;
  this.a = +a;
  this.b = +b;
  this.opacity = +opacity;
}

define(Lab, lab, extend(Color, {
  brighter: function(k) {
    return new Lab(this.l + Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);
  },
  darker: function(k) {
    return new Lab(this.l - Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);
  },
  rgb: function() {
    var y = (this.l + 16) / 116,
        x = isNaN(this.a) ? y : y + this.a / 500,
        z = isNaN(this.b) ? y : y - this.b / 200;
    y = Yn * lab2xyz(y);
    x = Xn * lab2xyz(x);
    z = Zn * lab2xyz(z);
    return new Rgb(
      xyz2rgb( 3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB
      xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),
      xyz2rgb( 0.0556434 * x - 0.2040259 * y + 1.0572252 * z),
      this.opacity
    );
  }
}));

function xyz2lab(t) {
  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;
}

function lab2xyz(t) {
  return t > t1 ? t * t * t : t2 * (t - t0);
}

function xyz2rgb(x) {
  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);
}

function rgb2xyz(x) {
  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);
}

function hclConvert(o) {
  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);
  if (!(o instanceof Lab)) o = labConvert(o);
  var h = Math.atan2(o.b, o.a) * rad2deg;
  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);
}

function hcl(h, c, l, opacity) {
  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);
}

function Hcl(h, c, l, opacity) {
  this.h = +h;
  this.c = +c;
  this.l = +l;
  this.opacity = +opacity;
}

define(Hcl, hcl, extend(Color, {
  brighter: function(k) {
    return new Hcl(this.h, this.c, this.l + Kn * (k == null ? 1 : k), this.opacity);
  },
  darker: function(k) {
    return new Hcl(this.h, this.c, this.l - Kn * (k == null ? 1 : k), this.opacity);
  },
  rgb: function() {
    return labConvert(this).rgb();
  }
}));

var A = -0.14861;
var B = +1.78277;
var C = -0.29227;
var D = -0.90649;
var E = +1.97294;
var ED = E * D;
var EB = E * B;
var BC_DA = B * C - D * A;

function cubehelixConvert(o) {
  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);
  if (!(o instanceof Rgb)) o = rgbConvert(o);
  var r = o.r / 255,
      g = o.g / 255,
      b = o.b / 255,
      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),
      bl = b - l,
      k = (E * (g - l) - C * bl) / D,
      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1
      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;
  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);
}

function cubehelix(h, s, l, opacity) {
  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);
}

function Cubehelix(h, s, l, opacity) {
  this.h = +h;
  this.s = +s;
  this.l = +l;
  this.opacity = +opacity;
}

define(Cubehelix, cubehelix, extend(Color, {
  brighter: function(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);
  },
  darker: function(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);
  },
  rgb: function() {
    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,
        l = +this.l,
        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),
        cosh = Math.cos(h),
        sinh = Math.sin(h);
    return new Rgb(
      255 * (l + a * (A * cosh + B * sinh)),
      255 * (l + a * (C * cosh + D * sinh)),
      255 * (l + a * (E * cosh)),
      this.opacity
    );
  }
}));

exports.color = color;
exports.rgb = rgb;
exports.hsl = hsl;
exports.lab = lab;
exports.hcl = hcl;
exports.cubehelix = cubehelix;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{}],17:[function(require,module,exports){
// https://d3js.org/d3-format/ Version 1.2.2. Copyright 2018 Mike Bostock.
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
	typeof define === 'function' && define.amd ? define(['exports'], factory) :
	(factory((global.d3 = global.d3 || {})));
}(this, (function (exports) { 'use strict';

// Computes the decimal coefficient and exponent of the specified number x with
// significant digits p, where x is positive and p is in [1, 21] or undefined.
// For example, formatDecimal(1.23) returns ["123", 0].
var formatDecimal = function(x, p) {
  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf("e")) < 0) return null; // NaN, ±Infinity
  var i, coefficient = x.slice(0, i);

  // The string returned by toExponential either has the form \d\.\d+e[-+]\d+
  // (e.g., 1.2e+3) or the form \de[-+]\d+ (e.g., 1e+3).
  return [
    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,
    +x.slice(i + 1)
  ];
};

var exponent = function(x) {
  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;
};

var formatGroup = function(grouping, thousands) {
  return function(value, width) {
    var i = value.length,
        t = [],
        j = 0,
        g = grouping[0],
        length = 0;

    while (i > 0 && g > 0) {
      if (length + g + 1 > width) g = Math.max(1, width - length);
      t.push(value.substring(i -= g, i + g));
      if ((length += g + 1) > width) break;
      g = grouping[j = (j + 1) % grouping.length];
    }

    return t.reverse().join(thousands);
  };
};

var formatNumerals = function(numerals) {
  return function(value) {
    return value.replace(/[0-9]/g, function(i) {
      return numerals[+i];
    });
  };
};

var formatDefault = function(x, p) {
  x = x.toPrecision(p);

  out: for (var n = x.length, i = 1, i0 = -1, i1; i < n; ++i) {
    switch (x[i]) {
      case ".": i0 = i1 = i; break;
      case "0": if (i0 === 0) i0 = i; i1 = i; break;
      case "e": break out;
      default: if (i0 > 0) i0 = 0; break;
    }
  }

  return i0 > 0 ? x.slice(0, i0) + x.slice(i1 + 1) : x;
};

var prefixExponent;

var formatPrefixAuto = function(x, p) {
  var d = formatDecimal(x, p);
  if (!d) return x + "";
  var coefficient = d[0],
      exponent = d[1],
      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,
      n = coefficient.length;
  return i === n ? coefficient
      : i > n ? coefficient + new Array(i - n + 1).join("0")
      : i > 0 ? coefficient.slice(0, i) + "." + coefficient.slice(i)
      : "0." + new Array(1 - i).join("0") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!
};

var formatRounded = function(x, p) {
  var d = formatDecimal(x, p);
  if (!d) return x + "";
  var coefficient = d[0],
      exponent = d[1];
  return exponent < 0 ? "0." + new Array(-exponent).join("0") + coefficient
      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + "." + coefficient.slice(exponent + 1)
      : coefficient + new Array(exponent - coefficient.length + 2).join("0");
};

var formatTypes = {
  "": formatDefault,
  "%": function(x, p) { return (x * 100).toFixed(p); },
  "b": function(x) { return Math.round(x).toString(2); },
  "c": function(x) { return x + ""; },
  "d": function(x) { return Math.round(x).toString(10); },
  "e": function(x, p) { return x.toExponential(p); },
  "f": function(x, p) { return x.toFixed(p); },
  "g": function(x, p) { return x.toPrecision(p); },
  "o": function(x) { return Math.round(x).toString(8); },
  "p": function(x, p) { return formatRounded(x * 100, p); },
  "r": formatRounded,
  "s": formatPrefixAuto,
  "X": function(x) { return Math.round(x).toString(16).toUpperCase(); },
  "x": function(x) { return Math.round(x).toString(16); }
};

// [[fill]align][sign][symbol][0][width][,][.precision][type]
var re = /^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;

function formatSpecifier(specifier) {
  return new FormatSpecifier(specifier);
}

formatSpecifier.prototype = FormatSpecifier.prototype; // instanceof

function FormatSpecifier(specifier) {
  if (!(match = re.exec(specifier))) throw new Error("invalid format: " + specifier);

  var match,
      fill = match[1] || " ",
      align = match[2] || ">",
      sign = match[3] || "-",
      symbol = match[4] || "",
      zero = !!match[5],
      width = match[6] && +match[6],
      comma = !!match[7],
      precision = match[8] && +match[8].slice(1),
      type = match[9] || "";

  // The "n" type is an alias for ",g".
  if (type === "n") comma = true, type = "g";

  // Map invalid types to the default format.
  else if (!formatTypes[type]) type = "";

  // If zero fill is specified, padding goes after sign and before digits.
  if (zero || (fill === "0" && align === "=")) zero = true, fill = "0", align = "=";

  this.fill = fill;
  this.align = align;
  this.sign = sign;
  this.symbol = symbol;
  this.zero = zero;
  this.width = width;
  this.comma = comma;
  this.precision = precision;
  this.type = type;
}

FormatSpecifier.prototype.toString = function() {
  return this.fill
      + this.align
      + this.sign
      + this.symbol
      + (this.zero ? "0" : "")
      + (this.width == null ? "" : Math.max(1, this.width | 0))
      + (this.comma ? "," : "")
      + (this.precision == null ? "" : "." + Math.max(0, this.precision | 0))
      + this.type;
};

var identity = function(x) {
  return x;
};

var prefixes = ["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];

var formatLocale = function(locale) {
  var group = locale.grouping && locale.thousands ? formatGroup(locale.grouping, locale.thousands) : identity,
      currency = locale.currency,
      decimal = locale.decimal,
      numerals = locale.numerals ? formatNumerals(locale.numerals) : identity,
      percent = locale.percent || "%";

  function newFormat(specifier) {
    specifier = formatSpecifier(specifier);

    var fill = specifier.fill,
        align = specifier.align,
        sign = specifier.sign,
        symbol = specifier.symbol,
        zero = specifier.zero,
        width = specifier.width,
        comma = specifier.comma,
        precision = specifier.precision,
        type = specifier.type;

    // Compute the prefix and suffix.
    // For SI-prefix, the suffix is lazily computed.
    var prefix = symbol === "$" ? currency[0] : symbol === "#" && /[boxX]/.test(type) ? "0" + type.toLowerCase() : "",
        suffix = symbol === "$" ? currency[1] : /[%p]/.test(type) ? percent : "";

    // What format function should we use?
    // Is this an integer type?
    // Can this type generate exponential notation?
    var formatType = formatTypes[type],
        maybeSuffix = !type || /[defgprs%]/.test(type);

    // Set the default precision if not specified,
    // or clamp the specified precision to the supported range.
    // For significant precision, it must be in [1, 21].
    // For fixed precision, it must be in [0, 20].
    precision = precision == null ? (type ? 6 : 12)
        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))
        : Math.max(0, Math.min(20, precision));

    function format(value) {
      var valuePrefix = prefix,
          valueSuffix = suffix,
          i, n, c;

      if (type === "c") {
        valueSuffix = formatType(value) + valueSuffix;
        value = "";
      } else {
        value = +value;

        // Perform the initial formatting.
        var valueNegative = value < 0;
        value = formatType(Math.abs(value), precision);

        // If a negative value rounds to zero during formatting, treat as positive.
        if (valueNegative && +value === 0) valueNegative = false;

        // Compute the prefix and suffix.
        valuePrefix = (valueNegative ? (sign === "(" ? sign : "-") : sign === "-" || sign === "(" ? "" : sign) + valuePrefix;
        valueSuffix = (type === "s" ? prefixes[8 + prefixExponent / 3] : "") + valueSuffix + (valueNegative && sign === "(" ? ")" : "");

        // Break the formatted value into the integer “value” part that can be
        // grouped, and fractional or exponential “suffix” part that is not.
        if (maybeSuffix) {
          i = -1, n = value.length;
          while (++i < n) {
            if (c = value.charCodeAt(i), 48 > c || c > 57) {
              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;
              value = value.slice(0, i);
              break;
            }
          }
        }
      }

      // If the fill character is not "0", grouping is applied before padding.
      if (comma && !zero) value = group(value, Infinity);

      // Compute the padding.
      var length = valuePrefix.length + value.length + valueSuffix.length,
          padding = length < width ? new Array(width - length + 1).join(fill) : "";

      // If the fill character is "0", grouping is applied after padding.
      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = "";

      // Reconstruct the final output based on the desired alignment.
      switch (align) {
        case "<": value = valuePrefix + value + valueSuffix + padding; break;
        case "=": value = valuePrefix + padding + value + valueSuffix; break;
        case "^": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;
        default: value = padding + valuePrefix + value + valueSuffix; break;
      }

      return numerals(value);
    }

    format.toString = function() {
      return specifier + "";
    };

    return format;
  }

  function formatPrefix(specifier, value) {
    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = "f", specifier)),
        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,
        k = Math.pow(10, -e),
        prefix = prefixes[8 + e / 3];
    return function(value) {
      return f(k * value) + prefix;
    };
  }

  return {
    format: newFormat,
    formatPrefix: formatPrefix
  };
};

var locale;



defaultLocale({
  decimal: ".",
  thousands: ",",
  grouping: [3],
  currency: ["$", ""]
});

function defaultLocale(definition) {
  locale = formatLocale(definition);
  exports.format = locale.format;
  exports.formatPrefix = locale.formatPrefix;
  return locale;
}

var precisionFixed = function(step) {
  return Math.max(0, -exponent(Math.abs(step)));
};

var precisionPrefix = function(step, value) {
  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));
};

var precisionRound = function(step, max) {
  step = Math.abs(step), max = Math.abs(max) - step;
  return Math.max(0, exponent(max) - exponent(step)) + 1;
};

exports.formatDefaultLocale = defaultLocale;
exports.formatLocale = formatLocale;
exports.formatSpecifier = formatSpecifier;
exports.precisionFixed = precisionFixed;
exports.precisionPrefix = precisionPrefix;
exports.precisionRound = precisionRound;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{}],18:[function(require,module,exports){
// https://d3js.org/d3-interpolate/ Version 1.1.6. Copyright 2017 Mike Bostock.
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-color')) :
	typeof define === 'function' && define.amd ? define(['exports', 'd3-color'], factory) :
	(factory((global.d3 = global.d3 || {}),global.d3));
}(this, (function (exports,d3Color) { 'use strict';

function basis(t1, v0, v1, v2, v3) {
  var t2 = t1 * t1, t3 = t2 * t1;
  return ((1 - 3 * t1 + 3 * t2 - t3) * v0
      + (4 - 6 * t2 + 3 * t3) * v1
      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2
      + t3 * v3) / 6;
}

var basis$1 = function(values) {
  var n = values.length - 1;
  return function(t) {
    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),
        v1 = values[i],
        v2 = values[i + 1],
        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,
        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;
    return basis((t - i / n) * n, v0, v1, v2, v3);
  };
};

var basisClosed = function(values) {
  var n = values.length;
  return function(t) {
    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),
        v0 = values[(i + n - 1) % n],
        v1 = values[i % n],
        v2 = values[(i + 1) % n],
        v3 = values[(i + 2) % n];
    return basis((t - i / n) * n, v0, v1, v2, v3);
  };
};

var constant = function(x) {
  return function() {
    return x;
  };
};

function linear(a, d) {
  return function(t) {
    return a + t * d;
  };
}

function exponential(a, b, y) {
  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {
    return Math.pow(a + t * b, y);
  };
}

function hue(a, b) {
  var d = b - a;
  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);
}

function gamma(y) {
  return (y = +y) === 1 ? nogamma : function(a, b) {
    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);
  };
}

function nogamma(a, b) {
  var d = b - a;
  return d ? linear(a, d) : constant(isNaN(a) ? b : a);
}

var rgb$1 = ((function rgbGamma(y) {
  var color$$1 = gamma(y);

  function rgb$$1(start, end) {
    var r = color$$1((start = d3Color.rgb(start)).r, (end = d3Color.rgb(end)).r),
        g = color$$1(start.g, end.g),
        b = color$$1(start.b, end.b),
        opacity = nogamma(start.opacity, end.opacity);
    return function(t) {
      start.r = r(t);
      start.g = g(t);
      start.b = b(t);
      start.opacity = opacity(t);
      return start + "";
    };
  }

  rgb$$1.gamma = rgbGamma;

  return rgb$$1;
}))(1);

function rgbSpline(spline) {
  return function(colors) {
    var n = colors.length,
        r = new Array(n),
        g = new Array(n),
        b = new Array(n),
        i, color$$1;
    for (i = 0; i < n; ++i) {
      color$$1 = d3Color.rgb(colors[i]);
      r[i] = color$$1.r || 0;
      g[i] = color$$1.g || 0;
      b[i] = color$$1.b || 0;
    }
    r = spline(r);
    g = spline(g);
    b = spline(b);
    color$$1.opacity = 1;
    return function(t) {
      color$$1.r = r(t);
      color$$1.g = g(t);
      color$$1.b = b(t);
      return color$$1 + "";
    };
  };
}

var rgbBasis = rgbSpline(basis$1);
var rgbBasisClosed = rgbSpline(basisClosed);

var array = function(a, b) {
  var nb = b ? b.length : 0,
      na = a ? Math.min(nb, a.length) : 0,
      x = new Array(na),
      c = new Array(nb),
      i;

  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);
  for (; i < nb; ++i) c[i] = b[i];

  return function(t) {
    for (i = 0; i < na; ++i) c[i] = x[i](t);
    return c;
  };
};

var date = function(a, b) {
  var d = new Date;
  return a = +a, b -= a, function(t) {
    return d.setTime(a + b * t), d;
  };
};

var number = function(a, b) {
  return a = +a, b -= a, function(t) {
    return a + b * t;
  };
};

var object = function(a, b) {
  var i = {},
      c = {},
      k;

  if (a === null || typeof a !== "object") a = {};
  if (b === null || typeof b !== "object") b = {};

  for (k in b) {
    if (k in a) {
      i[k] = value(a[k], b[k]);
    } else {
      c[k] = b[k];
    }
  }

  return function(t) {
    for (k in i) c[k] = i[k](t);
    return c;
  };
};

var reA = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
var reB = new RegExp(reA.source, "g");

function zero(b) {
  return function() {
    return b;
  };
}

function one(b) {
  return function(t) {
    return b(t) + "";
  };
}

var string = function(a, b) {
  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b
      am, // current match in a
      bm, // current match in b
      bs, // string preceding current number in b, if any
      i = -1, // index in s
      s = [], // string constants and placeholders
      q = []; // number interpolators

  // Coerce inputs to strings.
  a = a + "", b = b + "";

  // Interpolate pairs of numbers in a & b.
  while ((am = reA.exec(a))
      && (bm = reB.exec(b))) {
    if ((bs = bm.index) > bi) { // a string precedes the next number in b
      bs = b.slice(bi, bs);
      if (s[i]) s[i] += bs; // coalesce with previous string
      else s[++i] = bs;
    }
    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match
      if (s[i]) s[i] += bm; // coalesce with previous string
      else s[++i] = bm;
    } else { // interpolate non-matching numbers
      s[++i] = null;
      q.push({i: i, x: number(am, bm)});
    }
    bi = reB.lastIndex;
  }

  // Add remains of b.
  if (bi < b.length) {
    bs = b.slice(bi);
    if (s[i]) s[i] += bs; // coalesce with previous string
    else s[++i] = bs;
  }

  // Special optimization for only a single match.
  // Otherwise, interpolate each of the numbers and rejoin the string.
  return s.length < 2 ? (q[0]
      ? one(q[0].x)
      : zero(b))
      : (b = q.length, function(t) {
          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);
          return s.join("");
        });
};

var value = function(a, b) {
  var t = typeof b, c;
  return b == null || t === "boolean" ? constant(b)
      : (t === "number" ? number
      : t === "string" ? ((c = d3Color.color(b)) ? (b = c, rgb$1) : string)
      : b instanceof d3Color.color ? rgb$1
      : b instanceof Date ? date
      : Array.isArray(b) ? array
      : typeof b.valueOf !== "function" && typeof b.toString !== "function" || isNaN(b) ? object
      : number)(a, b);
};

var round = function(a, b) {
  return a = +a, b -= a, function(t) {
    return Math.round(a + b * t);
  };
};

var degrees = 180 / Math.PI;

var identity = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};

var decompose = function(a, b, c, d, e, f) {
  var scaleX, scaleY, skewX;
  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;
  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;
  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;
  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;
  return {
    translateX: e,
    translateY: f,
    rotate: Math.atan2(b, a) * degrees,
    skewX: Math.atan(skewX) * degrees,
    scaleX: scaleX,
    scaleY: scaleY
  };
};

var cssNode;
var cssRoot;
var cssView;
var svgNode;

function parseCss(value) {
  if (value === "none") return identity;
  if (!cssNode) cssNode = document.createElement("DIV"), cssRoot = document.documentElement, cssView = document.defaultView;
  cssNode.style.transform = value;
  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue("transform");
  cssRoot.removeChild(cssNode);
  value = value.slice(7, -1).split(",");
  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);
}

function parseSvg(value) {
  if (value == null) return identity;
  if (!svgNode) svgNode = document.createElementNS("http://www.w3.org/2000/svg", "g");
  svgNode.setAttribute("transform", value);
  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;
  value = value.matrix;
  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);
}

function interpolateTransform(parse, pxComma, pxParen, degParen) {

  function pop(s) {
    return s.length ? s.pop() + " " : "";
  }

  function translate(xa, ya, xb, yb, s, q) {
    if (xa !== xb || ya !== yb) {
      var i = s.push("translate(", null, pxComma, null, pxParen);
      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});
    } else if (xb || yb) {
      s.push("translate(" + xb + pxComma + yb + pxParen);
    }
  }

  function rotate(a, b, s, q) {
    if (a !== b) {
      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path
      q.push({i: s.push(pop(s) + "rotate(", null, degParen) - 2, x: number(a, b)});
    } else if (b) {
      s.push(pop(s) + "rotate(" + b + degParen);
    }
  }

  function skewX(a, b, s, q) {
    if (a !== b) {
      q.push({i: s.push(pop(s) + "skewX(", null, degParen) - 2, x: number(a, b)});
    } else if (b) {
      s.push(pop(s) + "skewX(" + b + degParen);
    }
  }

  function scale(xa, ya, xb, yb, s, q) {
    if (xa !== xb || ya !== yb) {
      var i = s.push(pop(s) + "scale(", null, ",", null, ")");
      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});
    } else if (xb !== 1 || yb !== 1) {
      s.push(pop(s) + "scale(" + xb + "," + yb + ")");
    }
  }

  return function(a, b) {
    var s = [], // string constants and placeholders
        q = []; // number interpolators
    a = parse(a), b = parse(b);
    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);
    rotate(a.rotate, b.rotate, s, q);
    skewX(a.skewX, b.skewX, s, q);
    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);
    a = b = null; // gc
    return function(t) {
      var i = -1, n = q.length, o;
      while (++i < n) s[(o = q[i]).i] = o.x(t);
      return s.join("");
    };
  };
}

var interpolateTransformCss = interpolateTransform(parseCss, "px, ", "px)", "deg)");
var interpolateTransformSvg = interpolateTransform(parseSvg, ", ", ")", ")");

var rho = Math.SQRT2;
var rho2 = 2;
var rho4 = 4;
var epsilon2 = 1e-12;

function cosh(x) {
  return ((x = Math.exp(x)) + 1 / x) / 2;
}

function sinh(x) {
  return ((x = Math.exp(x)) - 1 / x) / 2;
}

function tanh(x) {
  return ((x = Math.exp(2 * x)) - 1) / (x + 1);
}

// p0 = [ux0, uy0, w0]
// p1 = [ux1, uy1, w1]
var zoom = function(p0, p1) {
  var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],
      ux1 = p1[0], uy1 = p1[1], w1 = p1[2],
      dx = ux1 - ux0,
      dy = uy1 - uy0,
      d2 = dx * dx + dy * dy,
      i,
      S;

  // Special case for u0 ≅ u1.
  if (d2 < epsilon2) {
    S = Math.log(w1 / w0) / rho;
    i = function(t) {
      return [
        ux0 + t * dx,
        uy0 + t * dy,
        w0 * Math.exp(rho * t * S)
      ];
    };
  }

  // General case.
  else {
    var d1 = Math.sqrt(d2),
        b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),
        b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),
        r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),
        r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);
    S = (r1 - r0) / rho;
    i = function(t) {
      var s = t * S,
          coshr0 = cosh(r0),
          u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));
      return [
        ux0 + u * dx,
        uy0 + u * dy,
        w0 * coshr0 / cosh(rho * s + r0)
      ];
    };
  }

  i.duration = S * 1000;

  return i;
};

function hsl$1(hue$$1) {
  return function(start, end) {
    var h = hue$$1((start = d3Color.hsl(start)).h, (end = d3Color.hsl(end)).h),
        s = nogamma(start.s, end.s),
        l = nogamma(start.l, end.l),
        opacity = nogamma(start.opacity, end.opacity);
    return function(t) {
      start.h = h(t);
      start.s = s(t);
      start.l = l(t);
      start.opacity = opacity(t);
      return start + "";
    };
  }
}

var hsl$2 = hsl$1(hue);
var hslLong = hsl$1(nogamma);

function lab$1(start, end) {
  var l = nogamma((start = d3Color.lab(start)).l, (end = d3Color.lab(end)).l),
      a = nogamma(start.a, end.a),
      b = nogamma(start.b, end.b),
      opacity = nogamma(start.opacity, end.opacity);
  return function(t) {
    start.l = l(t);
    start.a = a(t);
    start.b = b(t);
    start.opacity = opacity(t);
    return start + "";
  };
}

function hcl$1(hue$$1) {
  return function(start, end) {
    var h = hue$$1((start = d3Color.hcl(start)).h, (end = d3Color.hcl(end)).h),
        c = nogamma(start.c, end.c),
        l = nogamma(start.l, end.l),
        opacity = nogamma(start.opacity, end.opacity);
    return function(t) {
      start.h = h(t);
      start.c = c(t);
      start.l = l(t);
      start.opacity = opacity(t);
      return start + "";
    };
  }
}

var hcl$2 = hcl$1(hue);
var hclLong = hcl$1(nogamma);

function cubehelix$1(hue$$1) {
  return (function cubehelixGamma(y) {
    y = +y;

    function cubehelix$$1(start, end) {
      var h = hue$$1((start = d3Color.cubehelix(start)).h, (end = d3Color.cubehelix(end)).h),
          s = nogamma(start.s, end.s),
          l = nogamma(start.l, end.l),
          opacity = nogamma(start.opacity, end.opacity);
      return function(t) {
        start.h = h(t);
        start.s = s(t);
        start.l = l(Math.pow(t, y));
        start.opacity = opacity(t);
        return start + "";
      };
    }

    cubehelix$$1.gamma = cubehelixGamma;

    return cubehelix$$1;
  })(1);
}

var cubehelix$2 = cubehelix$1(hue);
var cubehelixLong = cubehelix$1(nogamma);

var quantize = function(interpolator, n) {
  var samples = new Array(n);
  for (var i = 0; i < n; ++i) samples[i] = interpolator(i / (n - 1));
  return samples;
};

exports.interpolate = value;
exports.interpolateArray = array;
exports.interpolateBasis = basis$1;
exports.interpolateBasisClosed = basisClosed;
exports.interpolateDate = date;
exports.interpolateNumber = number;
exports.interpolateObject = object;
exports.interpolateRound = round;
exports.interpolateString = string;
exports.interpolateTransformCss = interpolateTransformCss;
exports.interpolateTransformSvg = interpolateTransformSvg;
exports.interpolateZoom = zoom;
exports.interpolateRgb = rgb$1;
exports.interpolateRgbBasis = rgbBasis;
exports.interpolateRgbBasisClosed = rgbBasisClosed;
exports.interpolateHsl = hsl$2;
exports.interpolateHslLong = hslLong;
exports.interpolateLab = lab$1;
exports.interpolateHcl = hcl$2;
exports.interpolateHclLong = hclLong;
exports.interpolateCubehelix = cubehelix$2;
exports.interpolateCubehelixLong = cubehelixLong;
exports.quantize = quantize;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{"d3-color":16}],19:[function(require,module,exports){
// https://d3js.org/d3-path/ Version 1.0.5. Copyright 2017 Mike Bostock.
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
	typeof define === 'function' && define.amd ? define(['exports'], factory) :
	(factory((global.d3 = global.d3 || {})));
}(this, (function (exports) { 'use strict';

var pi = Math.PI;
var tau = 2 * pi;
var epsilon = 1e-6;
var tauEpsilon = tau - epsilon;

function Path() {
  this._x0 = this._y0 = // start of current subpath
  this._x1 = this._y1 = null; // end of current subpath
  this._ = "";
}

function path() {
  return new Path;
}

Path.prototype = path.prototype = {
  constructor: Path,
  moveTo: function(x, y) {
    this._ += "M" + (this._x0 = this._x1 = +x) + "," + (this._y0 = this._y1 = +y);
  },
  closePath: function() {
    if (this._x1 !== null) {
      this._x1 = this._x0, this._y1 = this._y0;
      this._ += "Z";
    }
  },
  lineTo: function(x, y) {
    this._ += "L" + (this._x1 = +x) + "," + (this._y1 = +y);
  },
  quadraticCurveTo: function(x1, y1, x, y) {
    this._ += "Q" + (+x1) + "," + (+y1) + "," + (this._x1 = +x) + "," + (this._y1 = +y);
  },
  bezierCurveTo: function(x1, y1, x2, y2, x, y) {
    this._ += "C" + (+x1) + "," + (+y1) + "," + (+x2) + "," + (+y2) + "," + (this._x1 = +x) + "," + (this._y1 = +y);
  },
  arcTo: function(x1, y1, x2, y2, r) {
    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;
    var x0 = this._x1,
        y0 = this._y1,
        x21 = x2 - x1,
        y21 = y2 - y1,
        x01 = x0 - x1,
        y01 = y0 - y1,
        l01_2 = x01 * x01 + y01 * y01;

    // Is the radius negative? Error.
    if (r < 0) throw new Error("negative radius: " + r);

    // Is this path empty? Move to (x1,y1).
    if (this._x1 === null) {
      this._ += "M" + (this._x1 = x1) + "," + (this._y1 = y1);
    }

    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.
    else if (!(l01_2 > epsilon)) {}

    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?
    // Equivalently, is (x1,y1) coincident with (x2,y2)?
    // Or, is the radius zero? Line to (x1,y1).
    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {
      this._ += "L" + (this._x1 = x1) + "," + (this._y1 = y1);
    }

    // Otherwise, draw an arc!
    else {
      var x20 = x2 - x0,
          y20 = y2 - y0,
          l21_2 = x21 * x21 + y21 * y21,
          l20_2 = x20 * x20 + y20 * y20,
          l21 = Math.sqrt(l21_2),
          l01 = Math.sqrt(l01_2),
          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),
          t01 = l / l01,
          t21 = l / l21;

      // If the start tangent is not coincident with (x0,y0), line to.
      if (Math.abs(t01 - 1) > epsilon) {
        this._ += "L" + (x1 + t01 * x01) + "," + (y1 + t01 * y01);
      }

      this._ += "A" + r + "," + r + ",0,0," + (+(y01 * x20 > x01 * y20)) + "," + (this._x1 = x1 + t21 * x21) + "," + (this._y1 = y1 + t21 * y21);
    }
  },
  arc: function(x, y, r, a0, a1, ccw) {
    x = +x, y = +y, r = +r;
    var dx = r * Math.cos(a0),
        dy = r * Math.sin(a0),
        x0 = x + dx,
        y0 = y + dy,
        cw = 1 ^ ccw,
        da = ccw ? a0 - a1 : a1 - a0;

    // Is the radius negative? Error.
    if (r < 0) throw new Error("negative radius: " + r);

    // Is this path empty? Move to (x0,y0).
    if (this._x1 === null) {
      this._ += "M" + x0 + "," + y0;
    }

    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).
    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {
      this._ += "L" + x0 + "," + y0;
    }

    // Is this arc empty? We’re done.
    if (!r) return;

    // Does the angle go the wrong way? Flip the direction.
    if (da < 0) da = da % tau + tau;

    // Is this a complete circle? Draw two arcs to complete the circle.
    if (da > tauEpsilon) {
      this._ += "A" + r + "," + r + ",0,1," + cw + "," + (x - dx) + "," + (y - dy) + "A" + r + "," + r + ",0,1," + cw + "," + (this._x1 = x0) + "," + (this._y1 = y0);
    }

    // Is this arc non-empty? Draw an arc!
    else if (da > epsilon) {
      this._ += "A" + r + "," + r + ",0," + (+(da >= pi)) + "," + cw + "," + (this._x1 = x + r * Math.cos(a1)) + "," + (this._y1 = y + r * Math.sin(a1));
    }
  },
  rect: function(x, y, w, h) {
    this._ += "M" + (this._x0 = this._x1 = +x) + "," + (this._y0 = this._y1 = +y) + "h" + (+w) + "v" + (+h) + "h" + (-w) + "Z";
  },
  toString: function() {
    return this._;
  }
};

exports.path = path;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{}],20:[function(require,module,exports){
// https://d3js.org/d3-scale/ Version 1.0.7. Copyright 2017 Mike Bostock.
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-array'), require('d3-collection'), require('d3-interpolate'), require('d3-format'), require('d3-time'), require('d3-time-format'), require('d3-color')) :
	typeof define === 'function' && define.amd ? define(['exports', 'd3-array', 'd3-collection', 'd3-interpolate', 'd3-format', 'd3-time', 'd3-time-format', 'd3-color'], factory) :
	(factory((global.d3 = global.d3 || {}),global.d3,global.d3,global.d3,global.d3,global.d3,global.d3,global.d3));
}(this, (function (exports,d3Array,d3Collection,d3Interpolate,d3Format,d3Time,d3TimeFormat,d3Color) { 'use strict';

var array = Array.prototype;

var map$1 = array.map;
var slice = array.slice;

var implicit = {name: "implicit"};

function ordinal(range$$1) {
  var index = d3Collection.map(),
      domain = [],
      unknown = implicit;

  range$$1 = range$$1 == null ? [] : slice.call(range$$1);

  function scale(d) {
    var key = d + "", i = index.get(key);
    if (!i) {
      if (unknown !== implicit) return unknown;
      index.set(key, i = domain.push(d));
    }
    return range$$1[(i - 1) % range$$1.length];
  }

  scale.domain = function(_) {
    if (!arguments.length) return domain.slice();
    domain = [], index = d3Collection.map();
    var i = -1, n = _.length, d, key;
    while (++i < n) if (!index.has(key = (d = _[i]) + "")) index.set(key, domain.push(d));
    return scale;
  };

  scale.range = function(_) {
    return arguments.length ? (range$$1 = slice.call(_), scale) : range$$1.slice();
  };

  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };

  scale.copy = function() {
    return ordinal()
        .domain(domain)
        .range(range$$1)
        .unknown(unknown);
  };

  return scale;
}

function band() {
  var scale = ordinal().unknown(undefined),
      domain = scale.domain,
      ordinalRange = scale.range,
      range$$1 = [0, 1],
      step,
      bandwidth,
      round = false,
      paddingInner = 0,
      paddingOuter = 0,
      align = 0.5;

  delete scale.unknown;

  function rescale() {
    var n = domain().length,
        reverse = range$$1[1] < range$$1[0],
        start = range$$1[reverse - 0],
        stop = range$$1[1 - reverse];
    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);
    if (round) step = Math.floor(step);
    start += (stop - start - step * (n - paddingInner)) * align;
    bandwidth = step * (1 - paddingInner);
    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);
    var values = d3Array.range(n).map(function(i) { return start + step * i; });
    return ordinalRange(reverse ? values.reverse() : values);
  }

  scale.domain = function(_) {
    return arguments.length ? (domain(_), rescale()) : domain();
  };

  scale.range = function(_) {
    return arguments.length ? (range$$1 = [+_[0], +_[1]], rescale()) : range$$1.slice();
  };

  scale.rangeRound = function(_) {
    return range$$1 = [+_[0], +_[1]], round = true, rescale();
  };

  scale.bandwidth = function() {
    return bandwidth;
  };

  scale.step = function() {
    return step;
  };

  scale.round = function(_) {
    return arguments.length ? (round = !!_, rescale()) : round;
  };

  scale.padding = function(_) {
    return arguments.length ? (paddingInner = paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;
  };

  scale.paddingInner = function(_) {
    return arguments.length ? (paddingInner = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;
  };

  scale.paddingOuter = function(_) {
    return arguments.length ? (paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingOuter;
  };

  scale.align = function(_) {
    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;
  };

  scale.copy = function() {
    return band()
        .domain(domain())
        .range(range$$1)
        .round(round)
        .paddingInner(paddingInner)
        .paddingOuter(paddingOuter)
        .align(align);
  };

  return rescale();
}

function pointish(scale) {
  var copy = scale.copy;

  scale.padding = scale.paddingOuter;
  delete scale.paddingInner;
  delete scale.paddingOuter;

  scale.copy = function() {
    return pointish(copy());
  };

  return scale;
}

function point() {
  return pointish(band().paddingInner(1));
}

var constant = function(x) {
  return function() {
    return x;
  };
};

var number = function(x) {
  return +x;
};

var unit = [0, 1];

function deinterpolateLinear(a, b) {
  return (b -= (a = +a))
      ? function(x) { return (x - a) / b; }
      : constant(b);
}

function deinterpolateClamp(deinterpolate) {
  return function(a, b) {
    var d = deinterpolate(a = +a, b = +b);
    return function(x) { return x <= a ? 0 : x >= b ? 1 : d(x); };
  };
}

function reinterpolateClamp(reinterpolate) {
  return function(a, b) {
    var r = reinterpolate(a = +a, b = +b);
    return function(t) { return t <= 0 ? a : t >= 1 ? b : r(t); };
  };
}

function bimap(domain, range$$1, deinterpolate, reinterpolate) {
  var d0 = domain[0], d1 = domain[1], r0 = range$$1[0], r1 = range$$1[1];
  if (d1 < d0) d0 = deinterpolate(d1, d0), r0 = reinterpolate(r1, r0);
  else d0 = deinterpolate(d0, d1), r0 = reinterpolate(r0, r1);
  return function(x) { return r0(d0(x)); };
}

function polymap(domain, range$$1, deinterpolate, reinterpolate) {
  var j = Math.min(domain.length, range$$1.length) - 1,
      d = new Array(j),
      r = new Array(j),
      i = -1;

  // Reverse descending domains.
  if (domain[j] < domain[0]) {
    domain = domain.slice().reverse();
    range$$1 = range$$1.slice().reverse();
  }

  while (++i < j) {
    d[i] = deinterpolate(domain[i], domain[i + 1]);
    r[i] = reinterpolate(range$$1[i], range$$1[i + 1]);
  }

  return function(x) {
    var i = d3Array.bisect(domain, x, 1, j) - 1;
    return r[i](d[i](x));
  };
}

function copy(source, target) {
  return target
      .domain(source.domain())
      .range(source.range())
      .interpolate(source.interpolate())
      .clamp(source.clamp());
}

// deinterpolate(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].
// reinterpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding domain value x in [a,b].
function continuous(deinterpolate, reinterpolate) {
  var domain = unit,
      range$$1 = unit,
      interpolate$$1 = d3Interpolate.interpolate,
      clamp = false,
      piecewise,
      output,
      input;

  function rescale() {
    piecewise = Math.min(domain.length, range$$1.length) > 2 ? polymap : bimap;
    output = input = null;
    return scale;
  }

  function scale(x) {
    return (output || (output = piecewise(domain, range$$1, clamp ? deinterpolateClamp(deinterpolate) : deinterpolate, interpolate$$1)))(+x);
  }

  scale.invert = function(y) {
    return (input || (input = piecewise(range$$1, domain, deinterpolateLinear, clamp ? reinterpolateClamp(reinterpolate) : reinterpolate)))(+y);
  };

  scale.domain = function(_) {
    return arguments.length ? (domain = map$1.call(_, number), rescale()) : domain.slice();
  };

  scale.range = function(_) {
    return arguments.length ? (range$$1 = slice.call(_), rescale()) : range$$1.slice();
  };

  scale.rangeRound = function(_) {
    return range$$1 = slice.call(_), interpolate$$1 = d3Interpolate.interpolateRound, rescale();
  };

  scale.clamp = function(_) {
    return arguments.length ? (clamp = !!_, rescale()) : clamp;
  };

  scale.interpolate = function(_) {
    return arguments.length ? (interpolate$$1 = _, rescale()) : interpolate$$1;
  };

  return rescale();
}

var tickFormat = function(domain, count, specifier) {
  var start = domain[0],
      stop = domain[domain.length - 1],
      step = d3Array.tickStep(start, stop, count == null ? 10 : count),
      precision;
  specifier = d3Format.formatSpecifier(specifier == null ? ",f" : specifier);
  switch (specifier.type) {
    case "s": {
      var value = Math.max(Math.abs(start), Math.abs(stop));
      if (specifier.precision == null && !isNaN(precision = d3Format.precisionPrefix(step, value))) specifier.precision = precision;
      return d3Format.formatPrefix(specifier, value);
    }
    case "":
    case "e":
    case "g":
    case "p":
    case "r": {
      if (specifier.precision == null && !isNaN(precision = d3Format.precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === "e");
      break;
    }
    case "f":
    case "%": {
      if (specifier.precision == null && !isNaN(precision = d3Format.precisionFixed(step))) specifier.precision = precision - (specifier.type === "%") * 2;
      break;
    }
  }
  return d3Format.format(specifier);
};

function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function(count) {
    var d = domain();
    return d3Array.ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function(count, specifier) {
    return tickFormat(domain(), count, specifier);
  };

  scale.nice = function(count) {
    if (count == null) count = 10;

    var d = domain(),
        i0 = 0,
        i1 = d.length - 1,
        start = d[i0],
        stop = d[i1],
        step;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }

    step = d3Array.tickIncrement(start, stop, count);

    if (step > 0) {
      start = Math.floor(start / step) * step;
      stop = Math.ceil(stop / step) * step;
      step = d3Array.tickIncrement(start, stop, count);
    } else if (step < 0) {
      start = Math.ceil(start * step) / step;
      stop = Math.floor(stop * step) / step;
      step = d3Array.tickIncrement(start, stop, count);
    }

    if (step > 0) {
      d[i0] = Math.floor(start / step) * step;
      d[i1] = Math.ceil(stop / step) * step;
      domain(d);
    } else if (step < 0) {
      d[i0] = Math.ceil(start * step) / step;
      d[i1] = Math.floor(stop * step) / step;
      domain(d);
    }

    return scale;
  };

  return scale;
}

function linear() {
  var scale = continuous(deinterpolateLinear, d3Interpolate.interpolateNumber);

  scale.copy = function() {
    return copy(scale, linear());
  };

  return linearish(scale);
}

function identity() {
  var domain = [0, 1];

  function scale(x) {
    return +x;
  }

  scale.invert = scale;

  scale.domain = scale.range = function(_) {
    return arguments.length ? (domain = map$1.call(_, number), scale) : domain.slice();
  };

  scale.copy = function() {
    return identity().domain(domain);
  };

  return linearish(scale);
}

var nice = function(domain, interval) {
  domain = domain.slice();

  var i0 = 0,
      i1 = domain.length - 1,
      x0 = domain[i0],
      x1 = domain[i1],
      t;

  if (x1 < x0) {
    t = i0, i0 = i1, i1 = t;
    t = x0, x0 = x1, x1 = t;
  }

  domain[i0] = interval.floor(x0);
  domain[i1] = interval.ceil(x1);
  return domain;
};

function deinterpolate(a, b) {
  return (b = Math.log(b / a))
      ? function(x) { return Math.log(x / a) / b; }
      : constant(b);
}

function reinterpolate(a, b) {
  return a < 0
      ? function(t) { return -Math.pow(-b, t) * Math.pow(-a, 1 - t); }
      : function(t) { return Math.pow(b, t) * Math.pow(a, 1 - t); };
}

function pow10(x) {
  return isFinite(x) ? +("1e" + x) : x < 0 ? 0 : x;
}

function powp(base) {
  return base === 10 ? pow10
      : base === Math.E ? Math.exp
      : function(x) { return Math.pow(base, x); };
}

function logp(base) {
  return base === Math.E ? Math.log
      : base === 10 && Math.log10
      || base === 2 && Math.log2
      || (base = Math.log(base), function(x) { return Math.log(x) / base; });
}

function reflect(f) {
  return function(x) {
    return -f(-x);
  };
}

function log() {
  var scale = continuous(deinterpolate, reinterpolate).domain([1, 10]),
      domain = scale.domain,
      base = 10,
      logs = logp(10),
      pows = powp(10);

  function rescale() {
    logs = logp(base), pows = powp(base);
    if (domain()[0] < 0) logs = reflect(logs), pows = reflect(pows);
    return scale;
  }

  scale.base = function(_) {
    return arguments.length ? (base = +_, rescale()) : base;
  };

  scale.domain = function(_) {
    return arguments.length ? (domain(_), rescale()) : domain();
  };

  scale.ticks = function(count) {
    var d = domain(),
        u = d[0],
        v = d[d.length - 1],
        r;

    if (r = v < u) i = u, u = v, v = i;

    var i = logs(u),
        j = logs(v),
        p,
        k,
        t,
        n = count == null ? 10 : +count,
        z = [];

    if (!(base % 1) && j - i < n) {
      i = Math.round(i) - 1, j = Math.round(j) + 1;
      if (u > 0) for (; i < j; ++i) {
        for (k = 1, p = pows(i); k < base; ++k) {
          t = p * k;
          if (t < u) continue;
          if (t > v) break;
          z.push(t);
        }
      } else for (; i < j; ++i) {
        for (k = base - 1, p = pows(i); k >= 1; --k) {
          t = p * k;
          if (t < u) continue;
          if (t > v) break;
          z.push(t);
        }
      }
    } else {
      z = d3Array.ticks(i, j, Math.min(j - i, n)).map(pows);
    }

    return r ? z.reverse() : z;
  };

  scale.tickFormat = function(count, specifier) {
    if (specifier == null) specifier = base === 10 ? ".0e" : ",";
    if (typeof specifier !== "function") specifier = d3Format.format(specifier);
    if (count === Infinity) return specifier;
    if (count == null) count = 10;
    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?
    return function(d) {
      var i = d / pows(Math.round(logs(d)));
      if (i * base < base - 0.5) i *= base;
      return i <= k ? specifier(d) : "";
    };
  };

  scale.nice = function() {
    return domain(nice(domain(), {
      floor: function(x) { return pows(Math.floor(logs(x))); },
      ceil: function(x) { return pows(Math.ceil(logs(x))); }
    }));
  };

  scale.copy = function() {
    return copy(scale, log().base(base));
  };

  return scale;
}

function raise(x, exponent) {
  return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);
}

function pow() {
  var exponent = 1,
      scale = continuous(deinterpolate, reinterpolate),
      domain = scale.domain;

  function deinterpolate(a, b) {
    return (b = raise(b, exponent) - (a = raise(a, exponent)))
        ? function(x) { return (raise(x, exponent) - a) / b; }
        : constant(b);
  }

  function reinterpolate(a, b) {
    b = raise(b, exponent) - (a = raise(a, exponent));
    return function(t) { return raise(a + b * t, 1 / exponent); };
  }

  scale.exponent = function(_) {
    return arguments.length ? (exponent = +_, domain(domain())) : exponent;
  };

  scale.copy = function() {
    return copy(scale, pow().exponent(exponent));
  };

  return linearish(scale);
}

function sqrt() {
  return pow().exponent(0.5);
}

function quantile$1() {
  var domain = [],
      range$$1 = [],
      thresholds = [];

  function rescale() {
    var i = 0, n = Math.max(1, range$$1.length);
    thresholds = new Array(n - 1);
    while (++i < n) thresholds[i - 1] = d3Array.quantile(domain, i / n);
    return scale;
  }

  function scale(x) {
    if (!isNaN(x = +x)) return range$$1[d3Array.bisect(thresholds, x)];
  }

  scale.invertExtent = function(y) {
    var i = range$$1.indexOf(y);
    return i < 0 ? [NaN, NaN] : [
      i > 0 ? thresholds[i - 1] : domain[0],
      i < thresholds.length ? thresholds[i] : domain[domain.length - 1]
    ];
  };

  scale.domain = function(_) {
    if (!arguments.length) return domain.slice();
    domain = [];
    for (var i = 0, n = _.length, d; i < n; ++i) if (d = _[i], d != null && !isNaN(d = +d)) domain.push(d);
    domain.sort(d3Array.ascending);
    return rescale();
  };

  scale.range = function(_) {
    return arguments.length ? (range$$1 = slice.call(_), rescale()) : range$$1.slice();
  };

  scale.quantiles = function() {
    return thresholds.slice();
  };

  scale.copy = function() {
    return quantile$1()
        .domain(domain)
        .range(range$$1);
  };

  return scale;
}

function quantize() {
  var x0 = 0,
      x1 = 1,
      n = 1,
      domain = [0.5],
      range$$1 = [0, 1];

  function scale(x) {
    if (x <= x) return range$$1[d3Array.bisect(domain, x, 0, n)];
  }

  function rescale() {
    var i = -1;
    domain = new Array(n);
    while (++i < n) domain[i] = ((i + 1) * x1 - (i - n) * x0) / (n + 1);
    return scale;
  }

  scale.domain = function(_) {
    return arguments.length ? (x0 = +_[0], x1 = +_[1], rescale()) : [x0, x1];
  };

  scale.range = function(_) {
    return arguments.length ? (n = (range$$1 = slice.call(_)).length - 1, rescale()) : range$$1.slice();
  };

  scale.invertExtent = function(y) {
    var i = range$$1.indexOf(y);
    return i < 0 ? [NaN, NaN]
        : i < 1 ? [x0, domain[0]]
        : i >= n ? [domain[n - 1], x1]
        : [domain[i - 1], domain[i]];
  };

  scale.copy = function() {
    return quantize()
        .domain([x0, x1])
        .range(range$$1);
  };

  return linearish(scale);
}

function threshold() {
  var domain = [0.5],
      range$$1 = [0, 1],
      n = 1;

  function scale(x) {
    if (x <= x) return range$$1[d3Array.bisect(domain, x, 0, n)];
  }

  scale.domain = function(_) {
    return arguments.length ? (domain = slice.call(_), n = Math.min(domain.length, range$$1.length - 1), scale) : domain.slice();
  };

  scale.range = function(_) {
    return arguments.length ? (range$$1 = slice.call(_), n = Math.min(domain.length, range$$1.length - 1), scale) : range$$1.slice();
  };

  scale.invertExtent = function(y) {
    var i = range$$1.indexOf(y);
    return [domain[i - 1], domain[i]];
  };

  scale.copy = function() {
    return threshold()
        .domain(domain)
        .range(range$$1);
  };

  return scale;
}

var durationSecond = 1000;
var durationMinute = durationSecond * 60;
var durationHour = durationMinute * 60;
var durationDay = durationHour * 24;
var durationWeek = durationDay * 7;
var durationMonth = durationDay * 30;
var durationYear = durationDay * 365;

function date(t) {
  return new Date(t);
}

function number$1(t) {
  return t instanceof Date ? +t : +new Date(+t);
}

function calendar(year, month, week, day, hour, minute, second, millisecond, format$$1) {
  var scale = continuous(deinterpolateLinear, d3Interpolate.interpolateNumber),
      invert = scale.invert,
      domain = scale.domain;

  var formatMillisecond = format$$1(".%L"),
      formatSecond = format$$1(":%S"),
      formatMinute = format$$1("%I:%M"),
      formatHour = format$$1("%I %p"),
      formatDay = format$$1("%a %d"),
      formatWeek = format$$1("%b %d"),
      formatMonth = format$$1("%B"),
      formatYear = format$$1("%Y");

  var tickIntervals = [
    [second,  1,      durationSecond],
    [second,  5,  5 * durationSecond],
    [second, 15, 15 * durationSecond],
    [second, 30, 30 * durationSecond],
    [minute,  1,      durationMinute],
    [minute,  5,  5 * durationMinute],
    [minute, 15, 15 * durationMinute],
    [minute, 30, 30 * durationMinute],
    [  hour,  1,      durationHour  ],
    [  hour,  3,  3 * durationHour  ],
    [  hour,  6,  6 * durationHour  ],
    [  hour, 12, 12 * durationHour  ],
    [   day,  1,      durationDay   ],
    [   day,  2,  2 * durationDay   ],
    [  week,  1,      durationWeek  ],
    [ month,  1,      durationMonth ],
    [ month,  3,  3 * durationMonth ],
    [  year,  1,      durationYear  ]
  ];

  function tickFormat(date) {
    return (second(date) < date ? formatMillisecond
        : minute(date) < date ? formatSecond
        : hour(date) < date ? formatMinute
        : day(date) < date ? formatHour
        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)
        : year(date) < date ? formatMonth
        : formatYear)(date);
  }

  function tickInterval(interval, start, stop, step) {
    if (interval == null) interval = 10;

    // If a desired tick count is specified, pick a reasonable tick interval
    // based on the extent of the domain and a rough estimate of tick size.
    // Otherwise, assume interval is already a time interval and use it.
    if (typeof interval === "number") {
      var target = Math.abs(stop - start) / interval,
          i = d3Array.bisector(function(i) { return i[2]; }).right(tickIntervals, target);
      if (i === tickIntervals.length) {
        step = d3Array.tickStep(start / durationYear, stop / durationYear, interval);
        interval = year;
      } else if (i) {
        i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];
        step = i[1];
        interval = i[0];
      } else {
        step = Math.max(d3Array.tickStep(start, stop, interval), 1);
        interval = millisecond;
      }
    }

    return step == null ? interval : interval.every(step);
  }

  scale.invert = function(y) {
    return new Date(invert(y));
  };

  scale.domain = function(_) {
    return arguments.length ? domain(map$1.call(_, number$1)) : domain().map(date);
  };

  scale.ticks = function(interval, step) {
    var d = domain(),
        t0 = d[0],
        t1 = d[d.length - 1],
        r = t1 < t0,
        t;
    if (r) t = t0, t0 = t1, t1 = t;
    t = tickInterval(interval, t0, t1, step);
    t = t ? t.range(t0, t1 + 1) : []; // inclusive stop
    return r ? t.reverse() : t;
  };

  scale.tickFormat = function(count, specifier) {
    return specifier == null ? tickFormat : format$$1(specifier);
  };

  scale.nice = function(interval, step) {
    var d = domain();
    return (interval = tickInterval(interval, d[0], d[d.length - 1], step))
        ? domain(nice(d, interval))
        : scale;
  };

  scale.copy = function() {
    return copy(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format$$1));
  };

  return scale;
}

var time = function() {
  return calendar(d3Time.timeYear, d3Time.timeMonth, d3Time.timeWeek, d3Time.timeDay, d3Time.timeHour, d3Time.timeMinute, d3Time.timeSecond, d3Time.timeMillisecond, d3TimeFormat.timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]);
};

var utcTime = function() {
  return calendar(d3Time.utcYear, d3Time.utcMonth, d3Time.utcWeek, d3Time.utcDay, d3Time.utcHour, d3Time.utcMinute, d3Time.utcSecond, d3Time.utcMillisecond, d3TimeFormat.utcFormat).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]);
};

var colors = function(s) {
  return s.match(/.{6}/g).map(function(x) {
    return "#" + x;
  });
};

var category10 = colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");

var category20b = colors("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");

var category20c = colors("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");

var category20 = colors("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");

var cubehelix$1 = d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(300, 0.5, 0.0), d3Color.cubehelix(-240, 0.5, 1.0));

var warm = d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(-100, 0.75, 0.35), d3Color.cubehelix(80, 1.50, 0.8));

var cool = d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(260, 0.75, 0.35), d3Color.cubehelix(80, 1.50, 0.8));

var rainbow = d3Color.cubehelix();

var rainbow$1 = function(t) {
  if (t < 0 || t > 1) t -= Math.floor(t);
  var ts = Math.abs(t - 0.5);
  rainbow.h = 360 * t - 100;
  rainbow.s = 1.5 - 1.5 * ts;
  rainbow.l = 0.8 - 0.9 * ts;
  return rainbow + "";
};

function ramp(range$$1) {
  var n = range$$1.length;
  return function(t) {
    return range$$1[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];
  };
}

var viridis = ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));

var magma = ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));

var inferno = ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));

var plasma = ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));

function sequential(interpolator) {
  var x0 = 0,
      x1 = 1,
      clamp = false;

  function scale(x) {
    var t = (x - x0) / (x1 - x0);
    return interpolator(clamp ? Math.max(0, Math.min(1, t)) : t);
  }

  scale.domain = function(_) {
    return arguments.length ? (x0 = +_[0], x1 = +_[1], scale) : [x0, x1];
  };

  scale.clamp = function(_) {
    return arguments.length ? (clamp = !!_, scale) : clamp;
  };

  scale.interpolator = function(_) {
    return arguments.length ? (interpolator = _, scale) : interpolator;
  };

  scale.copy = function() {
    return sequential(interpolator).domain([x0, x1]).clamp(clamp);
  };

  return linearish(scale);
}

exports.scaleBand = band;
exports.scalePoint = point;
exports.scaleIdentity = identity;
exports.scaleLinear = linear;
exports.scaleLog = log;
exports.scaleOrdinal = ordinal;
exports.scaleImplicit = implicit;
exports.scalePow = pow;
exports.scaleSqrt = sqrt;
exports.scaleQuantile = quantile$1;
exports.scaleQuantize = quantize;
exports.scaleThreshold = threshold;
exports.scaleTime = time;
exports.scaleUtc = utcTime;
exports.schemeCategory10 = category10;
exports.schemeCategory20b = category20b;
exports.schemeCategory20c = category20c;
exports.schemeCategory20 = category20;
exports.interpolateCubehelixDefault = cubehelix$1;
exports.interpolateRainbow = rainbow$1;
exports.interpolateWarm = warm;
exports.interpolateCool = cool;
exports.interpolateViridis = viridis;
exports.interpolateMagma = magma;
exports.interpolateInferno = inferno;
exports.interpolatePlasma = plasma;
exports.scaleSequential = sequential;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{"d3-array":13,"d3-collection":15,"d3-color":16,"d3-format":17,"d3-interpolate":18,"d3-time":24,"d3-time-format":23}],21:[function(require,module,exports){
// https://d3js.org/d3-selection/ Version 1.2.0. Copyright 2017 Mike Bostock.
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
	typeof define === 'function' && define.amd ? define(['exports'], factory) :
	(factory((global.d3 = global.d3 || {})));
}(this, (function (exports) { 'use strict';

var xhtml = "http://www.w3.org/1999/xhtml";

var namespaces = {
  svg: "http://www.w3.org/2000/svg",
  xhtml: xhtml,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};

var namespace = function(name) {
  var prefix = name += "", i = prefix.indexOf(":");
  if (i >= 0 && (prefix = name.slice(0, i)) !== "xmlns") name = name.slice(i + 1);
  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;
};

function creatorInherit(name) {
  return function() {
    var document = this.ownerDocument,
        uri = this.namespaceURI;
    return uri === xhtml && document.documentElement.namespaceURI === xhtml
        ? document.createElement(name)
        : document.createElementNS(uri, name);
  };
}

function creatorFixed(fullname) {
  return function() {
    return this.ownerDocument.createElementNS(fullname.space, fullname.local);
  };
}

var creator = function(name) {
  var fullname = namespace(name);
  return (fullname.local
      ? creatorFixed
      : creatorInherit)(fullname);
};

var nextId = 0;

function local() {
  return new Local;
}

function Local() {
  this._ = "@" + (++nextId).toString(36);
}

Local.prototype = local.prototype = {
  constructor: Local,
  get: function(node) {
    var id = this._;
    while (!(id in node)) if (!(node = node.parentNode)) return;
    return node[id];
  },
  set: function(node, value) {
    return node[this._] = value;
  },
  remove: function(node) {
    return this._ in node && delete node[this._];
  },
  toString: function() {
    return this._;
  }
};

var matcher = function(selector) {
  return function() {
    return this.matches(selector);
  };
};

if (typeof document !== "undefined") {
  var element = document.documentElement;
  if (!element.matches) {
    var vendorMatches = element.webkitMatchesSelector
        || element.msMatchesSelector
        || element.mozMatchesSelector
        || element.oMatchesSelector;
    matcher = function(selector) {
      return function() {
        return vendorMatches.call(this, selector);
      };
    };
  }
}

var matcher$1 = matcher;

var filterEvents = {};

exports.event = null;

if (typeof document !== "undefined") {
  var element$1 = document.documentElement;
  if (!("onmouseenter" in element$1)) {
    filterEvents = {mouseenter: "mouseover", mouseleave: "mouseout"};
  }
}

function filterContextListener(listener, index, group) {
  listener = contextListener(listener, index, group);
  return function(event) {
    var related = event.relatedTarget;
    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {
      listener.call(this, event);
    }
  };
}

function contextListener(listener, index, group) {
  return function(event1) {
    var event0 = exports.event; // Events can be reentrant (e.g., focus).
    exports.event = event1;
    try {
      listener.call(this, this.__data__, index, group);
    } finally {
      exports.event = event0;
    }
  };
}

function parseTypenames(typenames) {
  return typenames.trim().split(/^|\s+/).map(function(t) {
    var name = "", i = t.indexOf(".");
    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);
    return {type: t, name: name};
  });
}

function onRemove(typename) {
  return function() {
    var on = this.__on;
    if (!on) return;
    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {
      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {
        this.removeEventListener(o.type, o.listener, o.capture);
      } else {
        on[++i] = o;
      }
    }
    if (++i) on.length = i;
    else delete this.__on;
  };
}

function onAdd(typename, value, capture) {
  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;
  return function(d, i, group) {
    var on = this.__on, o, listener = wrap(value, i, group);
    if (on) for (var j = 0, m = on.length; j < m; ++j) {
      if ((o = on[j]).type === typename.type && o.name === typename.name) {
        this.removeEventListener(o.type, o.listener, o.capture);
        this.addEventListener(o.type, o.listener = listener, o.capture = capture);
        o.value = value;
        return;
      }
    }
    this.addEventListener(typename.type, listener, capture);
    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};
    if (!on) this.__on = [o];
    else on.push(o);
  };
}

var selection_on = function(typename, value, capture) {
  var typenames = parseTypenames(typename + ""), i, n = typenames.length, t;

  if (arguments.length < 2) {
    var on = this.node().__on;
    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {
      for (i = 0, o = on[j]; i < n; ++i) {
        if ((t = typenames[i]).type === o.type && t.name === o.name) {
          return o.value;
        }
      }
    }
    return;
  }

  on = value ? onAdd : onRemove;
  if (capture == null) capture = false;
  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));
  return this;
};

function customEvent(event1, listener, that, args) {
  var event0 = exports.event;
  event1.sourceEvent = exports.event;
  exports.event = event1;
  try {
    return listener.apply(that, args);
  } finally {
    exports.event = event0;
  }
}

var sourceEvent = function() {
  var current = exports.event, source;
  while (source = current.sourceEvent) current = source;
  return current;
};

var point = function(node, event) {
  var svg = node.ownerSVGElement || node;

  if (svg.createSVGPoint) {
    var point = svg.createSVGPoint();
    point.x = event.clientX, point.y = event.clientY;
    point = point.matrixTransform(node.getScreenCTM().inverse());
    return [point.x, point.y];
  }

  var rect = node.getBoundingClientRect();
  return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];
};

var mouse = function(node) {
  var event = sourceEvent();
  if (event.changedTouches) event = event.changedTouches[0];
  return point(node, event);
};

function none() {}

var selector = function(selector) {
  return selector == null ? none : function() {
    return this.querySelector(selector);
  };
};

var selection_select = function(select) {
  if (typeof select !== "function") select = selector(select);

  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {
      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {
        if ("__data__" in node) subnode.__data__ = node.__data__;
        subgroup[i] = subnode;
      }
    }
  }

  return new Selection(subgroups, this._parents);
};

function empty() {
  return [];
}

var selectorAll = function(selector) {
  return selector == null ? empty : function() {
    return this.querySelectorAll(selector);
  };
};

var selection_selectAll = function(select) {
  if (typeof select !== "function") select = selectorAll(select);

  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        subgroups.push(select.call(node, node.__data__, i, group));
        parents.push(node);
      }
    }
  }

  return new Selection(subgroups, parents);
};

var selection_filter = function(match) {
  if (typeof match !== "function") match = matcher$1(match);

  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {
      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {
        subgroup.push(node);
      }
    }
  }

  return new Selection(subgroups, this._parents);
};

var sparse = function(update) {
  return new Array(update.length);
};

var selection_enter = function() {
  return new Selection(this._enter || this._groups.map(sparse), this._parents);
};

function EnterNode(parent, datum) {
  this.ownerDocument = parent.ownerDocument;
  this.namespaceURI = parent.namespaceURI;
  this._next = null;
  this._parent = parent;
  this.__data__ = datum;
}

EnterNode.prototype = {
  constructor: EnterNode,
  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },
  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },
  querySelector: function(selector) { return this._parent.querySelector(selector); },
  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }
};

var constant = function(x) {
  return function() {
    return x;
  };
};

var keyPrefix = "$"; // Protect against keys like “__proto__”.

function bindIndex(parent, group, enter, update, exit, data) {
  var i = 0,
      node,
      groupLength = group.length,
      dataLength = data.length;

  // Put any non-null nodes that fit into update.
  // Put any null nodes into enter.
  // Put any remaining data into enter.
  for (; i < dataLength; ++i) {
    if (node = group[i]) {
      node.__data__ = data[i];
      update[i] = node;
    } else {
      enter[i] = new EnterNode(parent, data[i]);
    }
  }

  // Put any non-null nodes that don’t fit into exit.
  for (; i < groupLength; ++i) {
    if (node = group[i]) {
      exit[i] = node;
    }
  }
}

function bindKey(parent, group, enter, update, exit, data, key) {
  var i,
      node,
      nodeByKeyValue = {},
      groupLength = group.length,
      dataLength = data.length,
      keyValues = new Array(groupLength),
      keyValue;

  // Compute the key for each node.
  // If multiple nodes have the same key, the duplicates are added to exit.
  for (i = 0; i < groupLength; ++i) {
    if (node = group[i]) {
      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);
      if (keyValue in nodeByKeyValue) {
        exit[i] = node;
      } else {
        nodeByKeyValue[keyValue] = node;
      }
    }
  }

  // Compute the key for each datum.
  // If there a node associated with this key, join and add it to update.
  // If there is not (or the key is a duplicate), add it to enter.
  for (i = 0; i < dataLength; ++i) {
    keyValue = keyPrefix + key.call(parent, data[i], i, data);
    if (node = nodeByKeyValue[keyValue]) {
      update[i] = node;
      node.__data__ = data[i];
      nodeByKeyValue[keyValue] = null;
    } else {
      enter[i] = new EnterNode(parent, data[i]);
    }
  }

  // Add any remaining nodes that were not bound to data to exit.
  for (i = 0; i < groupLength; ++i) {
    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {
      exit[i] = node;
    }
  }
}

var selection_data = function(value, key) {
  if (!value) {
    data = new Array(this.size()), j = -1;
    this.each(function(d) { data[++j] = d; });
    return data;
  }

  var bind = key ? bindKey : bindIndex,
      parents = this._parents,
      groups = this._groups;

  if (typeof value !== "function") value = constant(value);

  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {
    var parent = parents[j],
        group = groups[j],
        groupLength = group.length,
        data = value.call(parent, parent && parent.__data__, j, parents),
        dataLength = data.length,
        enterGroup = enter[j] = new Array(dataLength),
        updateGroup = update[j] = new Array(dataLength),
        exitGroup = exit[j] = new Array(groupLength);

    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);

    // Now connect the enter nodes to their following update node, such that
    // appendChild can insert the materialized enter node before this node,
    // rather than at the end of the parent node.
    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {
      if (previous = enterGroup[i0]) {
        if (i0 >= i1) i1 = i0 + 1;
        while (!(next = updateGroup[i1]) && ++i1 < dataLength);
        previous._next = next || null;
      }
    }
  }

  update = new Selection(update, parents);
  update._enter = enter;
  update._exit = exit;
  return update;
};

var selection_exit = function() {
  return new Selection(this._exit || this._groups.map(sparse), this._parents);
};

var selection_merge = function(selection) {

  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {
    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group0[i] || group1[i]) {
        merge[i] = node;
      }
    }
  }

  for (; j < m0; ++j) {
    merges[j] = groups0[j];
  }

  return new Selection(merges, this._parents);
};

var selection_order = function() {

  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {
    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {
      if (node = group[i]) {
        if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);
        next = node;
      }
    }
  }

  return this;
};

var selection_sort = function(compare) {
  if (!compare) compare = ascending;

  function compareNode(a, b) {
    return a && b ? compare(a.__data__, b.__data__) : !a - !b;
  }

  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        sortgroup[i] = node;
      }
    }
    sortgroup.sort(compareNode);
  }

  return new Selection(sortgroups, this._parents).order();
};

function ascending(a, b) {
  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;
}

var selection_call = function() {
  var callback = arguments[0];
  arguments[0] = this;
  callback.apply(null, arguments);
  return this;
};

var selection_nodes = function() {
  var nodes = new Array(this.size()), i = -1;
  this.each(function() { nodes[++i] = this; });
  return nodes;
};

var selection_node = function() {

  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {
      var node = group[i];
      if (node) return node;
    }
  }

  return null;
};

var selection_size = function() {
  var size = 0;
  this.each(function() { ++size; });
  return size;
};

var selection_empty = function() {
  return !this.node();
};

var selection_each = function(callback) {

  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {
      if (node = group[i]) callback.call(node, node.__data__, i, group);
    }
  }

  return this;
};

function attrRemove(name) {
  return function() {
    this.removeAttribute(name);
  };
}

function attrRemoveNS(fullname) {
  return function() {
    this.removeAttributeNS(fullname.space, fullname.local);
  };
}

function attrConstant(name, value) {
  return function() {
    this.setAttribute(name, value);
  };
}

function attrConstantNS(fullname, value) {
  return function() {
    this.setAttributeNS(fullname.space, fullname.local, value);
  };
}

function attrFunction(name, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null) this.removeAttribute(name);
    else this.setAttribute(name, v);
  };
}

function attrFunctionNS(fullname, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);
    else this.setAttributeNS(fullname.space, fullname.local, v);
  };
}

var selection_attr = function(name, value) {
  var fullname = namespace(name);

  if (arguments.length < 2) {
    var node = this.node();
    return fullname.local
        ? node.getAttributeNS(fullname.space, fullname.local)
        : node.getAttribute(fullname);
  }

  return this.each((value == null
      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === "function"
      ? (fullname.local ? attrFunctionNS : attrFunction)
      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));
};

var defaultView = function(node) {
  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node
      || (node.document && node) // node is a Window
      || node.defaultView; // node is a Document
};

function styleRemove(name) {
  return function() {
    this.style.removeProperty(name);
  };
}

function styleConstant(name, value, priority) {
  return function() {
    this.style.setProperty(name, value, priority);
  };
}

function styleFunction(name, value, priority) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null) this.style.removeProperty(name);
    else this.style.setProperty(name, v, priority);
  };
}

var selection_style = function(name, value, priority) {
  return arguments.length > 1
      ? this.each((value == null
            ? styleRemove : typeof value === "function"
            ? styleFunction
            : styleConstant)(name, value, priority == null ? "" : priority))
      : styleValue(this.node(), name);
};

function styleValue(node, name) {
  return node.style.getPropertyValue(name)
      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);
}

function propertyRemove(name) {
  return function() {
    delete this[name];
  };
}

function propertyConstant(name, value) {
  return function() {
    this[name] = value;
  };
}

function propertyFunction(name, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null) delete this[name];
    else this[name] = v;
  };
}

var selection_property = function(name, value) {
  return arguments.length > 1
      ? this.each((value == null
          ? propertyRemove : typeof value === "function"
          ? propertyFunction
          : propertyConstant)(name, value))
      : this.node()[name];
};

function classArray(string) {
  return string.trim().split(/^|\s+/);
}

function classList(node) {
  return node.classList || new ClassList(node);
}

function ClassList(node) {
  this._node = node;
  this._names = classArray(node.getAttribute("class") || "");
}

ClassList.prototype = {
  add: function(name) {
    var i = this._names.indexOf(name);
    if (i < 0) {
      this._names.push(name);
      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  remove: function(name) {
    var i = this._names.indexOf(name);
    if (i >= 0) {
      this._names.splice(i, 1);
      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  contains: function(name) {
    return this._names.indexOf(name) >= 0;
  }
};

function classedAdd(node, names) {
  var list = classList(node), i = -1, n = names.length;
  while (++i < n) list.add(names[i]);
}

function classedRemove(node, names) {
  var list = classList(node), i = -1, n = names.length;
  while (++i < n) list.remove(names[i]);
}

function classedTrue(names) {
  return function() {
    classedAdd(this, names);
  };
}

function classedFalse(names) {
  return function() {
    classedRemove(this, names);
  };
}

function classedFunction(names, value) {
  return function() {
    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);
  };
}

var selection_classed = function(name, value) {
  var names = classArray(name + "");

  if (arguments.length < 2) {
    var list = classList(this.node()), i = -1, n = names.length;
    while (++i < n) if (!list.contains(names[i])) return false;
    return true;
  }

  return this.each((typeof value === "function"
      ? classedFunction : value
      ? classedTrue
      : classedFalse)(names, value));
};

function textRemove() {
  this.textContent = "";
}

function textConstant(value) {
  return function() {
    this.textContent = value;
  };
}

function textFunction(value) {
  return function() {
    var v = value.apply(this, arguments);
    this.textContent = v == null ? "" : v;
  };
}

var selection_text = function(value) {
  return arguments.length
      ? this.each(value == null
          ? textRemove : (typeof value === "function"
          ? textFunction
          : textConstant)(value))
      : this.node().textContent;
};

function htmlRemove() {
  this.innerHTML = "";
}

function htmlConstant(value) {
  return function() {
    this.innerHTML = value;
  };
}

function htmlFunction(value) {
  return function() {
    var v = value.apply(this, arguments);
    this.innerHTML = v == null ? "" : v;
  };
}

var selection_html = function(value) {
  return arguments.length
      ? this.each(value == null
          ? htmlRemove : (typeof value === "function"
          ? htmlFunction
          : htmlConstant)(value))
      : this.node().innerHTML;
};

function raise() {
  if (this.nextSibling) this.parentNode.appendChild(this);
}

var selection_raise = function() {
  return this.each(raise);
};

function lower() {
  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);
}

var selection_lower = function() {
  return this.each(lower);
};

var selection_append = function(name) {
  var create = typeof name === "function" ? name : creator(name);
  return this.select(function() {
    return this.appendChild(create.apply(this, arguments));
  });
};

function constantNull() {
  return null;
}

var selection_insert = function(name, before) {
  var create = typeof name === "function" ? name : creator(name),
      select = before == null ? constantNull : typeof before === "function" ? before : selector(before);
  return this.select(function() {
    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);
  });
};

function remove() {
  var parent = this.parentNode;
  if (parent) parent.removeChild(this);
}

var selection_remove = function() {
  return this.each(remove);
};

var selection_datum = function(value) {
  return arguments.length
      ? this.property("__data__", value)
      : this.node().__data__;
};

function dispatchEvent(node, type, params) {
  var window = defaultView(node),
      event = window.CustomEvent;

  if (typeof event === "function") {
    event = new event(type, params);
  } else {
    event = window.document.createEvent("Event");
    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;
    else event.initEvent(type, false, false);
  }

  node.dispatchEvent(event);
}

function dispatchConstant(type, params) {
  return function() {
    return dispatchEvent(this, type, params);
  };
}

function dispatchFunction(type, params) {
  return function() {
    return dispatchEvent(this, type, params.apply(this, arguments));
  };
}

var selection_dispatch = function(type, params) {
  return this.each((typeof params === "function"
      ? dispatchFunction
      : dispatchConstant)(type, params));
};

var root = [null];

function Selection(groups, parents) {
  this._groups = groups;
  this._parents = parents;
}

function selection() {
  return new Selection([[document.documentElement]], root);
}

Selection.prototype = selection.prototype = {
  constructor: Selection,
  select: selection_select,
  selectAll: selection_selectAll,
  filter: selection_filter,
  data: selection_data,
  enter: selection_enter,
  exit: selection_exit,
  merge: selection_merge,
  order: selection_order,
  sort: selection_sort,
  call: selection_call,
  nodes: selection_nodes,
  node: selection_node,
  size: selection_size,
  empty: selection_empty,
  each: selection_each,
  attr: selection_attr,
  style: selection_style,
  property: selection_property,
  classed: selection_classed,
  text: selection_text,
  html: selection_html,
  raise: selection_raise,
  lower: selection_lower,
  append: selection_append,
  insert: selection_insert,
  remove: selection_remove,
  datum: selection_datum,
  on: selection_on,
  dispatch: selection_dispatch
};

var select = function(selector) {
  return typeof selector === "string"
      ? new Selection([[document.querySelector(selector)]], [document.documentElement])
      : new Selection([[selector]], root);
};

var selectAll = function(selector) {
  return typeof selector === "string"
      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])
      : new Selection([selector == null ? [] : selector], root);
};

var touch = function(node, touches, identifier) {
  if (arguments.length < 3) identifier = touches, touches = sourceEvent().changedTouches;

  for (var i = 0, n = touches ? touches.length : 0, touch; i < n; ++i) {
    if ((touch = touches[i]).identifier === identifier) {
      return point(node, touch);
    }
  }

  return null;
};

var touches = function(node, touches) {
  if (touches == null) touches = sourceEvent().touches;

  for (var i = 0, n = touches ? touches.length : 0, points = new Array(n); i < n; ++i) {
    points[i] = point(node, touches[i]);
  }

  return points;
};

exports.creator = creator;
exports.local = local;
exports.matcher = matcher$1;
exports.mouse = mouse;
exports.namespace = namespace;
exports.namespaces = namespaces;
exports.clientPoint = point;
exports.select = select;
exports.selectAll = selectAll;
exports.selection = selection;
exports.selector = selector;
exports.selectorAll = selectorAll;
exports.style = styleValue;
exports.touch = touch;
exports.touches = touches;
exports.window = defaultView;
exports.customEvent = customEvent;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{}],22:[function(require,module,exports){
// https://d3js.org/d3-shape/ Version 1.2.0. Copyright 2017 Mike Bostock.
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-path')) :
	typeof define === 'function' && define.amd ? define(['exports', 'd3-path'], factory) :
	(factory((global.d3 = global.d3 || {}),global.d3));
}(this, (function (exports,d3Path) { 'use strict';

var constant = function(x) {
  return function constant() {
    return x;
  };
};

var abs = Math.abs;
var atan2 = Math.atan2;
var cos = Math.cos;
var max = Math.max;
var min = Math.min;
var sin = Math.sin;
var sqrt = Math.sqrt;

var epsilon = 1e-12;
var pi = Math.PI;
var halfPi = pi / 2;
var tau = 2 * pi;

function acos(x) {
  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);
}

function asin(x) {
  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);
}

function arcInnerRadius(d) {
  return d.innerRadius;
}

function arcOuterRadius(d) {
  return d.outerRadius;
}

function arcStartAngle(d) {
  return d.startAngle;
}

function arcEndAngle(d) {
  return d.endAngle;
}

function arcPadAngle(d) {
  return d && d.padAngle; // Note: optional!
}

function intersect(x0, y0, x1, y1, x2, y2, x3, y3) {
  var x10 = x1 - x0, y10 = y1 - y0,
      x32 = x3 - x2, y32 = y3 - y2,
      t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / (y32 * x10 - x32 * y10);
  return [x0 + t * x10, y0 + t * y10];
}

// Compute perpendicular offset line of length rc.
// http://mathworld.wolfram.com/Circle-LineIntersection.html
function cornerTangents(x0, y0, x1, y1, r1, rc, cw) {
  var x01 = x0 - x1,
      y01 = y0 - y1,
      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),
      ox = lo * y01,
      oy = -lo * x01,
      x11 = x0 + ox,
      y11 = y0 + oy,
      x10 = x1 + ox,
      y10 = y1 + oy,
      x00 = (x11 + x10) / 2,
      y00 = (y11 + y10) / 2,
      dx = x10 - x11,
      dy = y10 - y11,
      d2 = dx * dx + dy * dy,
      r = r1 - rc,
      D = x11 * y10 - x10 * y11,
      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),
      cx0 = (D * dy - dx * d) / d2,
      cy0 = (-D * dx - dy * d) / d2,
      cx1 = (D * dy + dx * d) / d2,
      cy1 = (-D * dx + dy * d) / d2,
      dx0 = cx0 - x00,
      dy0 = cy0 - y00,
      dx1 = cx1 - x00,
      dy1 = cy1 - y00;

  // Pick the closer of the two intersection points.
  // TODO Is there a faster way to determine which intersection to use?
  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;

  return {
    cx: cx0,
    cy: cy0,
    x01: -ox,
    y01: -oy,
    x11: cx0 * (r1 / r - 1),
    y11: cy0 * (r1 / r - 1)
  };
}

var arc = function() {
  var innerRadius = arcInnerRadius,
      outerRadius = arcOuterRadius,
      cornerRadius = constant(0),
      padRadius = null,
      startAngle = arcStartAngle,
      endAngle = arcEndAngle,
      padAngle = arcPadAngle,
      context = null;

  function arc() {
    var buffer,
        r,
        r0 = +innerRadius.apply(this, arguments),
        r1 = +outerRadius.apply(this, arguments),
        a0 = startAngle.apply(this, arguments) - halfPi,
        a1 = endAngle.apply(this, arguments) - halfPi,
        da = abs(a1 - a0),
        cw = a1 > a0;

    if (!context) context = buffer = d3Path.path();

    // Ensure that the outer radius is always larger than the inner radius.
    if (r1 < r0) r = r1, r1 = r0, r0 = r;

    // Is it a point?
    if (!(r1 > epsilon)) context.moveTo(0, 0);

    // Or is it a circle or annulus?
    else if (da > tau - epsilon) {
      context.moveTo(r1 * cos(a0), r1 * sin(a0));
      context.arc(0, 0, r1, a0, a1, !cw);
      if (r0 > epsilon) {
        context.moveTo(r0 * cos(a1), r0 * sin(a1));
        context.arc(0, 0, r0, a1, a0, cw);
      }
    }

    // Or is it a circular or annular sector?
    else {
      var a01 = a0,
          a11 = a1,
          a00 = a0,
          a10 = a1,
          da0 = da,
          da1 = da,
          ap = padAngle.apply(this, arguments) / 2,
          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),
          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),
          rc0 = rc,
          rc1 = rc,
          t0,
          t1;

      // Apply padding? Note that since r1 ≥ r0, da1 ≥ da0.
      if (rp > epsilon) {
        var p0 = asin(rp / r0 * sin(ap)),
            p1 = asin(rp / r1 * sin(ap));
        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;
        else da0 = 0, a00 = a10 = (a0 + a1) / 2;
        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;
        else da1 = 0, a01 = a11 = (a0 + a1) / 2;
      }

      var x01 = r1 * cos(a01),
          y01 = r1 * sin(a01),
          x10 = r0 * cos(a10),
          y10 = r0 * sin(a10);

      // Apply rounded corners?
      if (rc > epsilon) {
        var x11 = r1 * cos(a11),
            y11 = r1 * sin(a11),
            x00 = r0 * cos(a00),
            y00 = r0 * sin(a00);

        // Restrict the corner radius according to the sector angle.
        if (da < pi) {
          var oc = da0 > epsilon ? intersect(x01, y01, x00, y00, x11, y11, x10, y10) : [x10, y10],
              ax = x01 - oc[0],
              ay = y01 - oc[1],
              bx = x11 - oc[0],
              by = y11 - oc[1],
              kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),
              lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);
          rc0 = min(rc, (r0 - lc) / (kc - 1));
          rc1 = min(rc, (r1 - lc) / (kc + 1));
        }
      }

      // Is the sector collapsed to a line?
      if (!(da1 > epsilon)) context.moveTo(x01, y01);

      // Does the sector’s outer ring have rounded corners?
      else if (rc1 > epsilon) {
        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);
        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);

        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);

        // Have the corners merged?
        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);

        // Otherwise, draw the two corners and the ring.
        else {
          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);
          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);
          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);
        }
      }

      // Or is the outer ring just a circular arc?
      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);

      // Is there no inner ring, and it’s a circular sector?
      // Or perhaps it’s an annular sector collapsed due to padding?
      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);

      // Does the sector’s inner ring (or point) have rounded corners?
      else if (rc0 > epsilon) {
        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);
        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);

        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);

        // Have the corners merged?
        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);

        // Otherwise, draw the two corners and the ring.
        else {
          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);
          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);
          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);
        }
      }

      // Or is the inner ring just a circular arc?
      else context.arc(0, 0, r0, a10, a00, cw);
    }

    context.closePath();

    if (buffer) return context = null, buffer + "" || null;
  }

  arc.centroid = function() {
    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,
        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;
    return [cos(a) * r, sin(a) * r];
  };

  arc.innerRadius = function(_) {
    return arguments.length ? (innerRadius = typeof _ === "function" ? _ : constant(+_), arc) : innerRadius;
  };

  arc.outerRadius = function(_) {
    return arguments.length ? (outerRadius = typeof _ === "function" ? _ : constant(+_), arc) : outerRadius;
  };

  arc.cornerRadius = function(_) {
    return arguments.length ? (cornerRadius = typeof _ === "function" ? _ : constant(+_), arc) : cornerRadius;
  };

  arc.padRadius = function(_) {
    return arguments.length ? (padRadius = _ == null ? null : typeof _ === "function" ? _ : constant(+_), arc) : padRadius;
  };

  arc.startAngle = function(_) {
    return arguments.length ? (startAngle = typeof _ === "function" ? _ : constant(+_), arc) : startAngle;
  };

  arc.endAngle = function(_) {
    return arguments.length ? (endAngle = typeof _ === "function" ? _ : constant(+_), arc) : endAngle;
  };

  arc.padAngle = function(_) {
    return arguments.length ? (padAngle = typeof _ === "function" ? _ : constant(+_), arc) : padAngle;
  };

  arc.context = function(_) {
    return arguments.length ? ((context = _ == null ? null : _), arc) : context;
  };

  return arc;
};

function Linear(context) {
  this._context = context;
}

Linear.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._point = 0;
  },
  lineEnd: function() {
    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x, y) {
    x = +x, y = +y;
    switch (this._point) {
      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;
      case 1: this._point = 2; // proceed
      default: this._context.lineTo(x, y); break;
    }
  }
};

var curveLinear = function(context) {
  return new Linear(context);
};

function x(p) {
  return p[0];
}

function y(p) {
  return p[1];
}

var line = function() {
  var x$$1 = x,
      y$$1 = y,
      defined = constant(true),
      context = null,
      curve = curveLinear,
      output = null;

  function line(data) {
    var i,
        n = data.length,
        d,
        defined0 = false,
        buffer;

    if (context == null) output = curve(buffer = d3Path.path());

    for (i = 0; i <= n; ++i) {
      if (!(i < n && defined(d = data[i], i, data)) === defined0) {
        if (defined0 = !defined0) output.lineStart();
        else output.lineEnd();
      }
      if (defined0) output.point(+x$$1(d, i, data), +y$$1(d, i, data));
    }

    if (buffer) return output = null, buffer + "" || null;
  }

  line.x = function(_) {
    return arguments.length ? (x$$1 = typeof _ === "function" ? _ : constant(+_), line) : x$$1;
  };

  line.y = function(_) {
    return arguments.length ? (y$$1 = typeof _ === "function" ? _ : constant(+_), line) : y$$1;
  };

  line.defined = function(_) {
    return arguments.length ? (defined = typeof _ === "function" ? _ : constant(!!_), line) : defined;
  };

  line.curve = function(_) {
    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;
  };

  line.context = function(_) {
    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;
  };

  return line;
};

var area = function() {
  var x0 = x,
      x1 = null,
      y0 = constant(0),
      y1 = y,
      defined = constant(true),
      context = null,
      curve = curveLinear,
      output = null;

  function area(data) {
    var i,
        j,
        k,
        n = data.length,
        d,
        defined0 = false,
        buffer,
        x0z = new Array(n),
        y0z = new Array(n);

    if (context == null) output = curve(buffer = d3Path.path());

    for (i = 0; i <= n; ++i) {
      if (!(i < n && defined(d = data[i], i, data)) === defined0) {
        if (defined0 = !defined0) {
          j = i;
          output.areaStart();
          output.lineStart();
        } else {
          output.lineEnd();
          output.lineStart();
          for (k = i - 1; k >= j; --k) {
            output.point(x0z[k], y0z[k]);
          }
          output.lineEnd();
          output.areaEnd();
        }
      }
      if (defined0) {
        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);
        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);
      }
    }

    if (buffer) return output = null, buffer + "" || null;
  }

  function arealine() {
    return line().defined(defined).curve(curve).context(context);
  }

  area.x = function(_) {
    return arguments.length ? (x0 = typeof _ === "function" ? _ : constant(+_), x1 = null, area) : x0;
  };

  area.x0 = function(_) {
    return arguments.length ? (x0 = typeof _ === "function" ? _ : constant(+_), area) : x0;
  };

  area.x1 = function(_) {
    return arguments.length ? (x1 = _ == null ? null : typeof _ === "function" ? _ : constant(+_), area) : x1;
  };

  area.y = function(_) {
    return arguments.length ? (y0 = typeof _ === "function" ? _ : constant(+_), y1 = null, area) : y0;
  };

  area.y0 = function(_) {
    return arguments.length ? (y0 = typeof _ === "function" ? _ : constant(+_), area) : y0;
  };

  area.y1 = function(_) {
    return arguments.length ? (y1 = _ == null ? null : typeof _ === "function" ? _ : constant(+_), area) : y1;
  };

  area.lineX0 =
  area.lineY0 = function() {
    return arealine().x(x0).y(y0);
  };

  area.lineY1 = function() {
    return arealine().x(x0).y(y1);
  };

  area.lineX1 = function() {
    return arealine().x(x1).y(y0);
  };

  area.defined = function(_) {
    return arguments.length ? (defined = typeof _ === "function" ? _ : constant(!!_), area) : defined;
  };

  area.curve = function(_) {
    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;
  };

  area.context = function(_) {
    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;
  };

  return area;
};

var descending = function(a, b) {
  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;
};

var identity = function(d) {
  return d;
};

var pie = function() {
  var value = identity,
      sortValues = descending,
      sort = null,
      startAngle = constant(0),
      endAngle = constant(tau),
      padAngle = constant(0);

  function pie(data) {
    var i,
        n = data.length,
        j,
        k,
        sum = 0,
        index = new Array(n),
        arcs = new Array(n),
        a0 = +startAngle.apply(this, arguments),
        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),
        a1,
        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),
        pa = p * (da < 0 ? -1 : 1),
        v;

    for (i = 0; i < n; ++i) {
      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {
        sum += v;
      }
    }

    // Optionally sort the arcs by previously-computed values or by data.
    if (sortValues != null) index.sort(function(i, j) { return sortValues(arcs[i], arcs[j]); });
    else if (sort != null) index.sort(function(i, j) { return sort(data[i], data[j]); });

    // Compute the arcs! They are stored in the original data's order.
    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {
      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {
        data: data[j],
        index: i,
        value: v,
        startAngle: a0,
        endAngle: a1,
        padAngle: p
      };
    }

    return arcs;
  }

  pie.value = function(_) {
    return arguments.length ? (value = typeof _ === "function" ? _ : constant(+_), pie) : value;
  };

  pie.sortValues = function(_) {
    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;
  };

  pie.sort = function(_) {
    return arguments.length ? (sort = _, sortValues = null, pie) : sort;
  };

  pie.startAngle = function(_) {
    return arguments.length ? (startAngle = typeof _ === "function" ? _ : constant(+_), pie) : startAngle;
  };

  pie.endAngle = function(_) {
    return arguments.length ? (endAngle = typeof _ === "function" ? _ : constant(+_), pie) : endAngle;
  };

  pie.padAngle = function(_) {
    return arguments.length ? (padAngle = typeof _ === "function" ? _ : constant(+_), pie) : padAngle;
  };

  return pie;
};

var curveRadialLinear = curveRadial(curveLinear);

function Radial(curve) {
  this._curve = curve;
}

Radial.prototype = {
  areaStart: function() {
    this._curve.areaStart();
  },
  areaEnd: function() {
    this._curve.areaEnd();
  },
  lineStart: function() {
    this._curve.lineStart();
  },
  lineEnd: function() {
    this._curve.lineEnd();
  },
  point: function(a, r) {
    this._curve.point(r * Math.sin(a), r * -Math.cos(a));
  }
};

function curveRadial(curve) {

  function radial(context) {
    return new Radial(curve(context));
  }

  radial._curve = curve;

  return radial;
}

function lineRadial(l) {
  var c = l.curve;

  l.angle = l.x, delete l.x;
  l.radius = l.y, delete l.y;

  l.curve = function(_) {
    return arguments.length ? c(curveRadial(_)) : c()._curve;
  };

  return l;
}

var lineRadial$1 = function() {
  return lineRadial(line().curve(curveRadialLinear));
};

var areaRadial = function() {
  var a = area().curve(curveRadialLinear),
      c = a.curve,
      x0 = a.lineX0,
      x1 = a.lineX1,
      y0 = a.lineY0,
      y1 = a.lineY1;

  a.angle = a.x, delete a.x;
  a.startAngle = a.x0, delete a.x0;
  a.endAngle = a.x1, delete a.x1;
  a.radius = a.y, delete a.y;
  a.innerRadius = a.y0, delete a.y0;
  a.outerRadius = a.y1, delete a.y1;
  a.lineStartAngle = function() { return lineRadial(x0()); }, delete a.lineX0;
  a.lineEndAngle = function() { return lineRadial(x1()); }, delete a.lineX1;
  a.lineInnerRadius = function() { return lineRadial(y0()); }, delete a.lineY0;
  a.lineOuterRadius = function() { return lineRadial(y1()); }, delete a.lineY1;

  a.curve = function(_) {
    return arguments.length ? c(curveRadial(_)) : c()._curve;
  };

  return a;
};

var pointRadial = function(x, y) {
  return [(y = +y) * Math.cos(x -= Math.PI / 2), y * Math.sin(x)];
};

var slice = Array.prototype.slice;

function linkSource(d) {
  return d.source;
}

function linkTarget(d) {
  return d.target;
}

function link(curve) {
  var source = linkSource,
      target = linkTarget,
      x$$1 = x,
      y$$1 = y,
      context = null;

  function link() {
    var buffer, argv = slice.call(arguments), s = source.apply(this, argv), t = target.apply(this, argv);
    if (!context) context = buffer = d3Path.path();
    curve(context, +x$$1.apply(this, (argv[0] = s, argv)), +y$$1.apply(this, argv), +x$$1.apply(this, (argv[0] = t, argv)), +y$$1.apply(this, argv));
    if (buffer) return context = null, buffer + "" || null;
  }

  link.source = function(_) {
    return arguments.length ? (source = _, link) : source;
  };

  link.target = function(_) {
    return arguments.length ? (target = _, link) : target;
  };

  link.x = function(_) {
    return arguments.length ? (x$$1 = typeof _ === "function" ? _ : constant(+_), link) : x$$1;
  };

  link.y = function(_) {
    return arguments.length ? (y$$1 = typeof _ === "function" ? _ : constant(+_), link) : y$$1;
  };

  link.context = function(_) {
    return arguments.length ? ((context = _ == null ? null : _), link) : context;
  };

  return link;
}

function curveHorizontal(context, x0, y0, x1, y1) {
  context.moveTo(x0, y0);
  context.bezierCurveTo(x0 = (x0 + x1) / 2, y0, x0, y1, x1, y1);
}

function curveVertical(context, x0, y0, x1, y1) {
  context.moveTo(x0, y0);
  context.bezierCurveTo(x0, y0 = (y0 + y1) / 2, x1, y0, x1, y1);
}

function curveRadial$1(context, x0, y0, x1, y1) {
  var p0 = pointRadial(x0, y0),
      p1 = pointRadial(x0, y0 = (y0 + y1) / 2),
      p2 = pointRadial(x1, y0),
      p3 = pointRadial(x1, y1);
  context.moveTo(p0[0], p0[1]);
  context.bezierCurveTo(p1[0], p1[1], p2[0], p2[1], p3[0], p3[1]);
}

function linkHorizontal() {
  return link(curveHorizontal);
}

function linkVertical() {
  return link(curveVertical);
}

function linkRadial() {
  var l = link(curveRadial$1);
  l.angle = l.x, delete l.x;
  l.radius = l.y, delete l.y;
  return l;
}

var circle = {
  draw: function(context, size) {
    var r = Math.sqrt(size / pi);
    context.moveTo(r, 0);
    context.arc(0, 0, r, 0, tau);
  }
};

var cross = {
  draw: function(context, size) {
    var r = Math.sqrt(size / 5) / 2;
    context.moveTo(-3 * r, -r);
    context.lineTo(-r, -r);
    context.lineTo(-r, -3 * r);
    context.lineTo(r, -3 * r);
    context.lineTo(r, -r);
    context.lineTo(3 * r, -r);
    context.lineTo(3 * r, r);
    context.lineTo(r, r);
    context.lineTo(r, 3 * r);
    context.lineTo(-r, 3 * r);
    context.lineTo(-r, r);
    context.lineTo(-3 * r, r);
    context.closePath();
  }
};

var tan30 = Math.sqrt(1 / 3);
var tan30_2 = tan30 * 2;

var diamond = {
  draw: function(context, size) {
    var y = Math.sqrt(size / tan30_2),
        x = y * tan30;
    context.moveTo(0, -y);
    context.lineTo(x, 0);
    context.lineTo(0, y);
    context.lineTo(-x, 0);
    context.closePath();
  }
};

var ka = 0.89081309152928522810;
var kr = Math.sin(pi / 10) / Math.sin(7 * pi / 10);
var kx = Math.sin(tau / 10) * kr;
var ky = -Math.cos(tau / 10) * kr;

var star = {
  draw: function(context, size) {
    var r = Math.sqrt(size * ka),
        x = kx * r,
        y = ky * r;
    context.moveTo(0, -r);
    context.lineTo(x, y);
    for (var i = 1; i < 5; ++i) {
      var a = tau * i / 5,
          c = Math.cos(a),
          s = Math.sin(a);
      context.lineTo(s * r, -c * r);
      context.lineTo(c * x - s * y, s * x + c * y);
    }
    context.closePath();
  }
};

var square = {
  draw: function(context, size) {
    var w = Math.sqrt(size),
        x = -w / 2;
    context.rect(x, x, w, w);
  }
};

var sqrt3 = Math.sqrt(3);

var triangle = {
  draw: function(context, size) {
    var y = -Math.sqrt(size / (sqrt3 * 3));
    context.moveTo(0, y * 2);
    context.lineTo(-sqrt3 * y, -y);
    context.lineTo(sqrt3 * y, -y);
    context.closePath();
  }
};

var c = -0.5;
var s = Math.sqrt(3) / 2;
var k = 1 / Math.sqrt(12);
var a = (k / 2 + 1) * 3;

var wye = {
  draw: function(context, size) {
    var r = Math.sqrt(size / a),
        x0 = r / 2,
        y0 = r * k,
        x1 = x0,
        y1 = r * k + r,
        x2 = -x1,
        y2 = y1;
    context.moveTo(x0, y0);
    context.lineTo(x1, y1);
    context.lineTo(x2, y2);
    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);
    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);
    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);
    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);
    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);
    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);
    context.closePath();
  }
};

var symbols = [
  circle,
  cross,
  diamond,
  square,
  star,
  triangle,
  wye
];

var symbol = function() {
  var type = constant(circle),
      size = constant(64),
      context = null;

  function symbol() {
    var buffer;
    if (!context) context = buffer = d3Path.path();
    type.apply(this, arguments).draw(context, +size.apply(this, arguments));
    if (buffer) return context = null, buffer + "" || null;
  }

  symbol.type = function(_) {
    return arguments.length ? (type = typeof _ === "function" ? _ : constant(_), symbol) : type;
  };

  symbol.size = function(_) {
    return arguments.length ? (size = typeof _ === "function" ? _ : constant(+_), symbol) : size;
  };

  symbol.context = function(_) {
    return arguments.length ? (context = _ == null ? null : _, symbol) : context;
  };

  return symbol;
};

var noop = function() {};

function point(that, x, y) {
  that._context.bezierCurveTo(
    (2 * that._x0 + that._x1) / 3,
    (2 * that._y0 + that._y1) / 3,
    (that._x0 + 2 * that._x1) / 3,
    (that._y0 + 2 * that._y1) / 3,
    (that._x0 + 4 * that._x1 + x) / 6,
    (that._y0 + 4 * that._y1 + y) / 6
  );
}

function Basis(context) {
  this._context = context;
}

Basis.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x0 = this._x1 =
    this._y0 = this._y1 = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    switch (this._point) {
      case 3: point(this, this._x1, this._y1); // proceed
      case 2: this._context.lineTo(this._x1, this._y1); break;
    }
    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x, y) {
    x = +x, y = +y;
    switch (this._point) {
      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;
      case 1: this._point = 2; break;
      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed
      default: point(this, x, y); break;
    }
    this._x0 = this._x1, this._x1 = x;
    this._y0 = this._y1, this._y1 = y;
  }
};

var basis = function(context) {
  return new Basis(context);
};

function BasisClosed(context) {
  this._context = context;
}

BasisClosed.prototype = {
  areaStart: noop,
  areaEnd: noop,
  lineStart: function() {
    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 =
    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    switch (this._point) {
      case 1: {
        this._context.moveTo(this._x2, this._y2);
        this._context.closePath();
        break;
      }
      case 2: {
        this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);
        this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);
        this._context.closePath();
        break;
      }
      case 3: {
        this.point(this._x2, this._y2);
        this.point(this._x3, this._y3);
        this.point(this._x4, this._y4);
        break;
      }
    }
  },
  point: function(x, y) {
    x = +x, y = +y;
    switch (this._point) {
      case 0: this._point = 1; this._x2 = x, this._y2 = y; break;
      case 1: this._point = 2; this._x3 = x, this._y3 = y; break;
      case 2: this._point = 3; this._x4 = x, this._y4 = y; this._context.moveTo((this._x0 + 4 * this._x1 + x) / 6, (this._y0 + 4 * this._y1 + y) / 6); break;
      default: point(this, x, y); break;
    }
    this._x0 = this._x1, this._x1 = x;
    this._y0 = this._y1, this._y1 = y;
  }
};

var basisClosed = function(context) {
  return new BasisClosed(context);
};

function BasisOpen(context) {
  this._context = context;
}

BasisOpen.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x0 = this._x1 =
    this._y0 = this._y1 = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x, y) {
    x = +x, y = +y;
    switch (this._point) {
      case 0: this._point = 1; break;
      case 1: this._point = 2; break;
      case 2: this._point = 3; var x0 = (this._x0 + 4 * this._x1 + x) / 6, y0 = (this._y0 + 4 * this._y1 + y) / 6; this._line ? this._context.lineTo(x0, y0) : this._context.moveTo(x0, y0); break;
      case 3: this._point = 4; // proceed
      default: point(this, x, y); break;
    }
    this._x0 = this._x1, this._x1 = x;
    this._y0 = this._y1, this._y1 = y;
  }
};

var basisOpen = function(context) {
  return new BasisOpen(context);
};

function Bundle(context, beta) {
  this._basis = new Basis(context);
  this._beta = beta;
}

Bundle.prototype = {
  lineStart: function() {
    this._x = [];
    this._y = [];
    this._basis.lineStart();
  },
  lineEnd: function() {
    var x = this._x,
        y = this._y,
        j = x.length - 1;

    if (j > 0) {
      var x0 = x[0],
          y0 = y[0],
          dx = x[j] - x0,
          dy = y[j] - y0,
          i = -1,
          t;

      while (++i <= j) {
        t = i / j;
        this._basis.point(
          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),
          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)
        );
      }
    }

    this._x = this._y = null;
    this._basis.lineEnd();
  },
  point: function(x, y) {
    this._x.push(+x);
    this._y.push(+y);
  }
};

var bundle = ((function custom(beta) {

  function bundle(context) {
    return beta === 1 ? new Basis(context) : new Bundle(context, beta);
  }

  bundle.beta = function(beta) {
    return custom(+beta);
  };

  return bundle;
}))(0.85);

function point$1(that, x, y) {
  that._context.bezierCurveTo(
    that._x1 + that._k * (that._x2 - that._x0),
    that._y1 + that._k * (that._y2 - that._y0),
    that._x2 + that._k * (that._x1 - x),
    that._y2 + that._k * (that._y1 - y),
    that._x2,
    that._y2
  );
}

function Cardinal(context, tension) {
  this._context = context;
  this._k = (1 - tension) / 6;
}

Cardinal.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x0 = this._x1 = this._x2 =
    this._y0 = this._y1 = this._y2 = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    switch (this._point) {
      case 2: this._context.lineTo(this._x2, this._y2); break;
      case 3: point$1(this, this._x1, this._y1); break;
    }
    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x, y) {
    x = +x, y = +y;
    switch (this._point) {
      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;
      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;
      case 2: this._point = 3; // proceed
      default: point$1(this, x, y); break;
    }
    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;
  }
};

var cardinal = ((function custom(tension) {

  function cardinal(context) {
    return new Cardinal(context, tension);
  }

  cardinal.tension = function(tension) {
    return custom(+tension);
  };

  return cardinal;
}))(0);

function CardinalClosed(context, tension) {
  this._context = context;
  this._k = (1 - tension) / 6;
}

CardinalClosed.prototype = {
  areaStart: noop,
  areaEnd: noop,
  lineStart: function() {
    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =
    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    switch (this._point) {
      case 1: {
        this._context.moveTo(this._x3, this._y3);
        this._context.closePath();
        break;
      }
      case 2: {
        this._context.lineTo(this._x3, this._y3);
        this._context.closePath();
        break;
      }
      case 3: {
        this.point(this._x3, this._y3);
        this.point(this._x4, this._y4);
        this.point(this._x5, this._y5);
        break;
      }
    }
  },
  point: function(x, y) {
    x = +x, y = +y;
    switch (this._point) {
      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;
      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;
      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;
      default: point$1(this, x, y); break;
    }
    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;
  }
};

var cardinalClosed = ((function custom(tension) {

  function cardinal(context) {
    return new CardinalClosed(context, tension);
  }

  cardinal.tension = function(tension) {
    return custom(+tension);
  };

  return cardinal;
}))(0);

function CardinalOpen(context, tension) {
  this._context = context;
  this._k = (1 - tension) / 6;
}

CardinalOpen.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x0 = this._x1 = this._x2 =
    this._y0 = this._y1 = this._y2 = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x, y) {
    x = +x, y = +y;
    switch (this._point) {
      case 0: this._point = 1; break;
      case 1: this._point = 2; break;
      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;
      case 3: this._point = 4; // proceed
      default: point$1(this, x, y); break;
    }
    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;
  }
};

var cardinalOpen = ((function custom(tension) {

  function cardinal(context) {
    return new CardinalOpen(context, tension);
  }

  cardinal.tension = function(tension) {
    return custom(+tension);
  };

  return cardinal;
}))(0);

function point$2(that, x, y) {
  var x1 = that._x1,
      y1 = that._y1,
      x2 = that._x2,
      y2 = that._y2;

  if (that._l01_a > epsilon) {
    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,
        n = 3 * that._l01_a * (that._l01_a + that._l12_a);
    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;
    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;
  }

  if (that._l23_a > epsilon) {
    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,
        m = 3 * that._l23_a * (that._l23_a + that._l12_a);
    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;
    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;
  }

  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);
}

function CatmullRom(context, alpha) {
  this._context = context;
  this._alpha = alpha;
}

CatmullRom.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x0 = this._x1 = this._x2 =
    this._y0 = this._y1 = this._y2 = NaN;
    this._l01_a = this._l12_a = this._l23_a =
    this._l01_2a = this._l12_2a = this._l23_2a =
    this._point = 0;
  },
  lineEnd: function() {
    switch (this._point) {
      case 2: this._context.lineTo(this._x2, this._y2); break;
      case 3: this.point(this._x2, this._y2); break;
    }
    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x, y) {
    x = +x, y = +y;

    if (this._point) {
      var x23 = this._x2 - x,
          y23 = this._y2 - y;
      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));
    }

    switch (this._point) {
      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;
      case 1: this._point = 2; break;
      case 2: this._point = 3; // proceed
      default: point$2(this, x, y); break;
    }

    this._l01_a = this._l12_a, this._l12_a = this._l23_a;
    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;
    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;
  }
};

var catmullRom = ((function custom(alpha) {

  function catmullRom(context) {
    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);
  }

  catmullRom.alpha = function(alpha) {
    return custom(+alpha);
  };

  return catmullRom;
}))(0.5);

function CatmullRomClosed(context, alpha) {
  this._context = context;
  this._alpha = alpha;
}

CatmullRomClosed.prototype = {
  areaStart: noop,
  areaEnd: noop,
  lineStart: function() {
    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =
    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;
    this._l01_a = this._l12_a = this._l23_a =
    this._l01_2a = this._l12_2a = this._l23_2a =
    this._point = 0;
  },
  lineEnd: function() {
    switch (this._point) {
      case 1: {
        this._context.moveTo(this._x3, this._y3);
        this._context.closePath();
        break;
      }
      case 2: {
        this._context.lineTo(this._x3, this._y3);
        this._context.closePath();
        break;
      }
      case 3: {
        this.point(this._x3, this._y3);
        this.point(this._x4, this._y4);
        this.point(this._x5, this._y5);
        break;
      }
    }
  },
  point: function(x, y) {
    x = +x, y = +y;

    if (this._point) {
      var x23 = this._x2 - x,
          y23 = this._y2 - y;
      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));
    }

    switch (this._point) {
      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;
      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;
      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;
      default: point$2(this, x, y); break;
    }

    this._l01_a = this._l12_a, this._l12_a = this._l23_a;
    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;
    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;
  }
};

var catmullRomClosed = ((function custom(alpha) {

  function catmullRom(context) {
    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);
  }

  catmullRom.alpha = function(alpha) {
    return custom(+alpha);
  };

  return catmullRom;
}))(0.5);

function CatmullRomOpen(context, alpha) {
  this._context = context;
  this._alpha = alpha;
}

CatmullRomOpen.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x0 = this._x1 = this._x2 =
    this._y0 = this._y1 = this._y2 = NaN;
    this._l01_a = this._l12_a = this._l23_a =
    this._l01_2a = this._l12_2a = this._l23_2a =
    this._point = 0;
  },
  lineEnd: function() {
    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x, y) {
    x = +x, y = +y;

    if (this._point) {
      var x23 = this._x2 - x,
          y23 = this._y2 - y;
      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));
    }

    switch (this._point) {
      case 0: this._point = 1; break;
      case 1: this._point = 2; break;
      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;
      case 3: this._point = 4; // proceed
      default: point$2(this, x, y); break;
    }

    this._l01_a = this._l12_a, this._l12_a = this._l23_a;
    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;
    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;
    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;
  }
};

var catmullRomOpen = ((function custom(alpha) {

  function catmullRom(context) {
    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);
  }

  catmullRom.alpha = function(alpha) {
    return custom(+alpha);
  };

  return catmullRom;
}))(0.5);

function LinearClosed(context) {
  this._context = context;
}

LinearClosed.prototype = {
  areaStart: noop,
  areaEnd: noop,
  lineStart: function() {
    this._point = 0;
  },
  lineEnd: function() {
    if (this._point) this._context.closePath();
  },
  point: function(x, y) {
    x = +x, y = +y;
    if (this._point) this._context.lineTo(x, y);
    else this._point = 1, this._context.moveTo(x, y);
  }
};

var linearClosed = function(context) {
  return new LinearClosed(context);
};

function sign(x) {
  return x < 0 ? -1 : 1;
}

// Calculate the slopes of the tangents (Hermite-type interpolation) based on
// the following paper: Steffen, M. 1990. A Simple Method for Monotonic
// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.
// NOV(II), P. 443, 1990.
function slope3(that, x2, y2) {
  var h0 = that._x1 - that._x0,
      h1 = x2 - that._x1,
      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),
      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),
      p = (s0 * h1 + s1 * h0) / (h0 + h1);
  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;
}

// Calculate a one-sided slope.
function slope2(that, t) {
  var h = that._x1 - that._x0;
  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;
}

// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations
// "you can express cubic Hermite interpolation in terms of cubic Bézier curves
// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1".
function point$3(that, t0, t1) {
  var x0 = that._x0,
      y0 = that._y0,
      x1 = that._x1,
      y1 = that._y1,
      dx = (x1 - x0) / 3;
  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);
}

function MonotoneX(context) {
  this._context = context;
}

MonotoneX.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x0 = this._x1 =
    this._y0 = this._y1 =
    this._t0 = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    switch (this._point) {
      case 2: this._context.lineTo(this._x1, this._y1); break;
      case 3: point$3(this, this._t0, slope2(this, this._t0)); break;
    }
    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();
    this._line = 1 - this._line;
  },
  point: function(x, y) {
    var t1 = NaN;

    x = +x, y = +y;
    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.
    switch (this._point) {
      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;
      case 1: this._point = 2; break;
      case 2: this._point = 3; point$3(this, slope2(this, t1 = slope3(this, x, y)), t1); break;
      default: point$3(this, this._t0, t1 = slope3(this, x, y)); break;
    }

    this._x0 = this._x1, this._x1 = x;
    this._y0 = this._y1, this._y1 = y;
    this._t0 = t1;
  }
};

function MonotoneY(context) {
  this._context = new ReflectContext(context);
}

(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {
  MonotoneX.prototype.point.call(this, y, x);
};

function ReflectContext(context) {
  this._context = context;
}

ReflectContext.prototype = {
  moveTo: function(x, y) { this._context.moveTo(y, x); },
  closePath: function() { this._context.closePath(); },
  lineTo: function(x, y) { this._context.lineTo(y, x); },
  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }
};

function monotoneX(context) {
  return new MonotoneX(context);
}

function monotoneY(context) {
  return new MonotoneY(context);
}

function Natural(context) {
  this._context = context;
}

Natural.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x = [];
    this._y = [];
  },
  lineEnd: function() {
    var x = this._x,
        y = this._y,
        n = x.length;

    if (n) {
      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);
      if (n === 2) {
        this._context.lineTo(x[1], y[1]);
      } else {
        var px = controlPoints(x),
            py = controlPoints(y);
        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {
          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);
        }
      }
    }

    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();
    this._line = 1 - this._line;
    this._x = this._y = null;
  },
  point: function(x, y) {
    this._x.push(+x);
    this._y.push(+y);
  }
};

// See https://www.particleincell.com/2012/bezier-splines/ for derivation.
function controlPoints(x) {
  var i,
      n = x.length - 1,
      m,
      a = new Array(n),
      b = new Array(n),
      r = new Array(n);
  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];
  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];
  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];
  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];
  a[n - 1] = r[n - 1] / b[n - 1];
  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];
  b[n - 1] = (x[n] + a[n - 1]) / 2;
  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];
  return [a, b];
}

var natural = function(context) {
  return new Natural(context);
};

function Step(context, t) {
  this._context = context;
  this._t = t;
}

Step.prototype = {
  areaStart: function() {
    this._line = 0;
  },
  areaEnd: function() {
    this._line = NaN;
  },
  lineStart: function() {
    this._x = this._y = NaN;
    this._point = 0;
  },
  lineEnd: function() {
    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);
    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();
    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;
  },
  point: function(x, y) {
    x = +x, y = +y;
    switch (this._point) {
      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;
      case 1: this._point = 2; // proceed
      default: {
        if (this._t <= 0) {
          this._context.lineTo(this._x, y);
          this._context.lineTo(x, y);
        } else {
          var x1 = this._x * (1 - this._t) + x * this._t;
          this._context.lineTo(x1, this._y);
          this._context.lineTo(x1, y);
        }
        break;
      }
    }
    this._x = x, this._y = y;
  }
};

var step = function(context) {
  return new Step(context, 0.5);
};

function stepBefore(context) {
  return new Step(context, 0);
}

function stepAfter(context) {
  return new Step(context, 1);
}

var none = function(series, order) {
  if (!((n = series.length) > 1)) return;
  for (var i = 1, j, s0, s1 = series[order[0]], n, m = s1.length; i < n; ++i) {
    s0 = s1, s1 = series[order[i]];
    for (j = 0; j < m; ++j) {
      s1[j][1] += s1[j][0] = isNaN(s0[j][1]) ? s0[j][0] : s0[j][1];
    }
  }
};

var none$1 = function(series) {
  var n = series.length, o = new Array(n);
  while (--n >= 0) o[n] = n;
  return o;
};

function stackValue(d, key) {
  return d[key];
}

var stack = function() {
  var keys = constant([]),
      order = none$1,
      offset = none,
      value = stackValue;

  function stack(data) {
    var kz = keys.apply(this, arguments),
        i,
        m = data.length,
        n = kz.length,
        sz = new Array(n),
        oz;

    for (i = 0; i < n; ++i) {
      for (var ki = kz[i], si = sz[i] = new Array(m), j = 0, sij; j < m; ++j) {
        si[j] = sij = [0, +value(data[j], ki, j, data)];
        sij.data = data[j];
      }
      si.key = ki;
    }

    for (i = 0, oz = order(sz); i < n; ++i) {
      sz[oz[i]].index = i;
    }

    offset(sz, oz);
    return sz;
  }

  stack.keys = function(_) {
    return arguments.length ? (keys = typeof _ === "function" ? _ : constant(slice.call(_)), stack) : keys;
  };

  stack.value = function(_) {
    return arguments.length ? (value = typeof _ === "function" ? _ : constant(+_), stack) : value;
  };

  stack.order = function(_) {
    return arguments.length ? (order = _ == null ? none$1 : typeof _ === "function" ? _ : constant(slice.call(_)), stack) : order;
  };

  stack.offset = function(_) {
    return arguments.length ? (offset = _ == null ? none : _, stack) : offset;
  };

  return stack;
};

var expand = function(series, order) {
  if (!((n = series.length) > 0)) return;
  for (var i, n, j = 0, m = series[0].length, y; j < m; ++j) {
    for (y = i = 0; i < n; ++i) y += series[i][j][1] || 0;
    if (y) for (i = 0; i < n; ++i) series[i][j][1] /= y;
  }
  none(series, order);
};

var diverging = function(series, order) {
  if (!((n = series.length) > 1)) return;
  for (var i, j = 0, d, dy, yp, yn, n, m = series[order[0]].length; j < m; ++j) {
    for (yp = yn = 0, i = 0; i < n; ++i) {
      if ((dy = (d = series[order[i]][j])[1] - d[0]) >= 0) {
        d[0] = yp, d[1] = yp += dy;
      } else if (dy < 0) {
        d[1] = yn, d[0] = yn += dy;
      } else {
        d[0] = yp;
      }
    }
  }
};

var silhouette = function(series, order) {
  if (!((n = series.length) > 0)) return;
  for (var j = 0, s0 = series[order[0]], n, m = s0.length; j < m; ++j) {
    for (var i = 0, y = 0; i < n; ++i) y += series[i][j][1] || 0;
    s0[j][1] += s0[j][0] = -y / 2;
  }
  none(series, order);
};

var wiggle = function(series, order) {
  if (!((n = series.length) > 0) || !((m = (s0 = series[order[0]]).length) > 0)) return;
  for (var y = 0, j = 1, s0, m, n; j < m; ++j) {
    for (var i = 0, s1 = 0, s2 = 0; i < n; ++i) {
      var si = series[order[i]],
          sij0 = si[j][1] || 0,
          sij1 = si[j - 1][1] || 0,
          s3 = (sij0 - sij1) / 2;
      for (var k = 0; k < i; ++k) {
        var sk = series[order[k]],
            skj0 = sk[j][1] || 0,
            skj1 = sk[j - 1][1] || 0;
        s3 += skj0 - skj1;
      }
      s1 += sij0, s2 += s3 * sij0;
    }
    s0[j - 1][1] += s0[j - 1][0] = y;
    if (s1) y -= s2 / s1;
  }
  s0[j - 1][1] += s0[j - 1][0] = y;
  none(series, order);
};

var ascending = function(series) {
  var sums = series.map(sum);
  return none$1(series).sort(function(a, b) { return sums[a] - sums[b]; });
};

function sum(series) {
  var s = 0, i = -1, n = series.length, v;
  while (++i < n) if (v = +series[i][1]) s += v;
  return s;
}

var descending$1 = function(series) {
  return ascending(series).reverse();
};

var insideOut = function(series) {
  var n = series.length,
      i,
      j,
      sums = series.map(sum),
      order = none$1(series).sort(function(a, b) { return sums[b] - sums[a]; }),
      top = 0,
      bottom = 0,
      tops = [],
      bottoms = [];

  for (i = 0; i < n; ++i) {
    j = order[i];
    if (top < bottom) {
      top += sums[j];
      tops.push(j);
    } else {
      bottom += sums[j];
      bottoms.push(j);
    }
  }

  return bottoms.reverse().concat(tops);
};

var reverse = function(series) {
  return none$1(series).reverse();
};

exports.arc = arc;
exports.area = area;
exports.line = line;
exports.pie = pie;
exports.areaRadial = areaRadial;
exports.radialArea = areaRadial;
exports.lineRadial = lineRadial$1;
exports.radialLine = lineRadial$1;
exports.pointRadial = pointRadial;
exports.linkHorizontal = linkHorizontal;
exports.linkVertical = linkVertical;
exports.linkRadial = linkRadial;
exports.symbol = symbol;
exports.symbols = symbols;
exports.symbolCircle = circle;
exports.symbolCross = cross;
exports.symbolDiamond = diamond;
exports.symbolSquare = square;
exports.symbolStar = star;
exports.symbolTriangle = triangle;
exports.symbolWye = wye;
exports.curveBasisClosed = basisClosed;
exports.curveBasisOpen = basisOpen;
exports.curveBasis = basis;
exports.curveBundle = bundle;
exports.curveCardinalClosed = cardinalClosed;
exports.curveCardinalOpen = cardinalOpen;
exports.curveCardinal = cardinal;
exports.curveCatmullRomClosed = catmullRomClosed;
exports.curveCatmullRomOpen = catmullRomOpen;
exports.curveCatmullRom = catmullRom;
exports.curveLinearClosed = linearClosed;
exports.curveLinear = curveLinear;
exports.curveMonotoneX = monotoneX;
exports.curveMonotoneY = monotoneY;
exports.curveNatural = natural;
exports.curveStep = step;
exports.curveStepAfter = stepAfter;
exports.curveStepBefore = stepBefore;
exports.stack = stack;
exports.stackOffsetExpand = expand;
exports.stackOffsetDiverging = diverging;
exports.stackOffsetNone = none;
exports.stackOffsetSilhouette = silhouette;
exports.stackOffsetWiggle = wiggle;
exports.stackOrderAscending = ascending;
exports.stackOrderDescending = descending$1;
exports.stackOrderInsideOut = insideOut;
exports.stackOrderNone = none$1;
exports.stackOrderReverse = reverse;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{"d3-path":19}],23:[function(require,module,exports){
// https://d3js.org/d3-time-format/ Version 2.1.1. Copyright 2017 Mike Bostock.
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-time')) :
	typeof define === 'function' && define.amd ? define(['exports', 'd3-time'], factory) :
	(factory((global.d3 = global.d3 || {}),global.d3));
}(this, (function (exports,d3Time) { 'use strict';

function localDate(d) {
  if (0 <= d.y && d.y < 100) {
    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);
    date.setFullYear(d.y);
    return date;
  }
  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);
}

function utcDate(d) {
  if (0 <= d.y && d.y < 100) {
    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));
    date.setUTCFullYear(d.y);
    return date;
  }
  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));
}

function newYear(y) {
  return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};
}

function formatLocale(locale) {
  var locale_dateTime = locale.dateTime,
      locale_date = locale.date,
      locale_time = locale.time,
      locale_periods = locale.periods,
      locale_weekdays = locale.days,
      locale_shortWeekdays = locale.shortDays,
      locale_months = locale.months,
      locale_shortMonths = locale.shortMonths;

  var periodRe = formatRe(locale_periods),
      periodLookup = formatLookup(locale_periods),
      weekdayRe = formatRe(locale_weekdays),
      weekdayLookup = formatLookup(locale_weekdays),
      shortWeekdayRe = formatRe(locale_shortWeekdays),
      shortWeekdayLookup = formatLookup(locale_shortWeekdays),
      monthRe = formatRe(locale_months),
      monthLookup = formatLookup(locale_months),
      shortMonthRe = formatRe(locale_shortMonths),
      shortMonthLookup = formatLookup(locale_shortMonths);

  var formats = {
    "a": formatShortWeekday,
    "A": formatWeekday,
    "b": formatShortMonth,
    "B": formatMonth,
    "c": null,
    "d": formatDayOfMonth,
    "e": formatDayOfMonth,
    "f": formatMicroseconds,
    "H": formatHour24,
    "I": formatHour12,
    "j": formatDayOfYear,
    "L": formatMilliseconds,
    "m": formatMonthNumber,
    "M": formatMinutes,
    "p": formatPeriod,
    "Q": formatUnixTimestamp,
    "s": formatUnixTimestampSeconds,
    "S": formatSeconds,
    "u": formatWeekdayNumberMonday,
    "U": formatWeekNumberSunday,
    "V": formatWeekNumberISO,
    "w": formatWeekdayNumberSunday,
    "W": formatWeekNumberMonday,
    "x": null,
    "X": null,
    "y": formatYear,
    "Y": formatFullYear,
    "Z": formatZone,
    "%": formatLiteralPercent
  };

  var utcFormats = {
    "a": formatUTCShortWeekday,
    "A": formatUTCWeekday,
    "b": formatUTCShortMonth,
    "B": formatUTCMonth,
    "c": null,
    "d": formatUTCDayOfMonth,
    "e": formatUTCDayOfMonth,
    "f": formatUTCMicroseconds,
    "H": formatUTCHour24,
    "I": formatUTCHour12,
    "j": formatUTCDayOfYear,
    "L": formatUTCMilliseconds,
    "m": formatUTCMonthNumber,
    "M": formatUTCMinutes,
    "p": formatUTCPeriod,
    "Q": formatUnixTimestamp,
    "s": formatUnixTimestampSeconds,
    "S": formatUTCSeconds,
    "u": formatUTCWeekdayNumberMonday,
    "U": formatUTCWeekNumberSunday,
    "V": formatUTCWeekNumberISO,
    "w": formatUTCWeekdayNumberSunday,
    "W": formatUTCWeekNumberMonday,
    "x": null,
    "X": null,
    "y": formatUTCYear,
    "Y": formatUTCFullYear,
    "Z": formatUTCZone,
    "%": formatLiteralPercent
  };

  var parses = {
    "a": parseShortWeekday,
    "A": parseWeekday,
    "b": parseShortMonth,
    "B": parseMonth,
    "c": parseLocaleDateTime,
    "d": parseDayOfMonth,
    "e": parseDayOfMonth,
    "f": parseMicroseconds,
    "H": parseHour24,
    "I": parseHour24,
    "j": parseDayOfYear,
    "L": parseMilliseconds,
    "m": parseMonthNumber,
    "M": parseMinutes,
    "p": parsePeriod,
    "Q": parseUnixTimestamp,
    "s": parseUnixTimestampSeconds,
    "S": parseSeconds,
    "u": parseWeekdayNumberMonday,
    "U": parseWeekNumberSunday,
    "V": parseWeekNumberISO,
    "w": parseWeekdayNumberSunday,
    "W": parseWeekNumberMonday,
    "x": parseLocaleDate,
    "X": parseLocaleTime,
    "y": parseYear,
    "Y": parseFullYear,
    "Z": parseZone,
    "%": parseLiteralPercent
  };

  // These recursive directive definitions must be deferred.
  formats.x = newFormat(locale_date, formats);
  formats.X = newFormat(locale_time, formats);
  formats.c = newFormat(locale_dateTime, formats);
  utcFormats.x = newFormat(locale_date, utcFormats);
  utcFormats.X = newFormat(locale_time, utcFormats);
  utcFormats.c = newFormat(locale_dateTime, utcFormats);

  function newFormat(specifier, formats) {
    return function(date) {
      var string = [],
          i = -1,
          j = 0,
          n = specifier.length,
          c,
          pad,
          format;

      if (!(date instanceof Date)) date = new Date(+date);

      while (++i < n) {
        if (specifier.charCodeAt(i) === 37) {
          string.push(specifier.slice(j, i));
          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);
          else pad = c === "e" ? " " : "0";
          if (format = formats[c]) c = format(date, pad);
          string.push(c);
          j = i + 1;
        }
      }

      string.push(specifier.slice(j, i));
      return string.join("");
    };
  }

  function newParse(specifier, newDate) {
    return function(string) {
      var d = newYear(1900),
          i = parseSpecifier(d, specifier, string += "", 0),
          week, day;
      if (i != string.length) return null;

      // If a UNIX timestamp is specified, return it.
      if ("Q" in d) return new Date(d.Q);

      // The am-pm flag is 0 for AM, and 1 for PM.
      if ("p" in d) d.H = d.H % 12 + d.p * 12;

      // Convert day-of-week and week-of-year to day-of-year.
      if ("V" in d) {
        if (d.V < 1 || d.V > 53) return null;
        if (!("w" in d)) d.w = 1;
        if ("Z" in d) {
          week = utcDate(newYear(d.y)), day = week.getUTCDay();
          week = day > 4 || day === 0 ? d3Time.utcMonday.ceil(week) : d3Time.utcMonday(week);
          week = d3Time.utcDay.offset(week, (d.V - 1) * 7);
          d.y = week.getUTCFullYear();
          d.m = week.getUTCMonth();
          d.d = week.getUTCDate() + (d.w + 6) % 7;
        } else {
          week = newDate(newYear(d.y)), day = week.getDay();
          week = day > 4 || day === 0 ? d3Time.timeMonday.ceil(week) : d3Time.timeMonday(week);
          week = d3Time.timeDay.offset(week, (d.V - 1) * 7);
          d.y = week.getFullYear();
          d.m = week.getMonth();
          d.d = week.getDate() + (d.w + 6) % 7;
        }
      } else if ("W" in d || "U" in d) {
        if (!("w" in d)) d.w = "u" in d ? d.u % 7 : "W" in d ? 1 : 0;
        day = "Z" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();
        d.m = 0;
        d.d = "W" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;
      }

      // If a time zone is specified, all fields are interpreted as UTC and then
      // offset according to the specified time zone.
      if ("Z" in d) {
        d.H += d.Z / 100 | 0;
        d.M += d.Z % 100;
        return utcDate(d);
      }

      // Otherwise, all fields are in local time.
      return newDate(d);
    };
  }

  function parseSpecifier(d, specifier, string, j) {
    var i = 0,
        n = specifier.length,
        m = string.length,
        c,
        parse;

    while (i < n) {
      if (j >= m) return -1;
      c = specifier.charCodeAt(i++);
      if (c === 37) {
        c = specifier.charAt(i++);
        parse = parses[c in pads ? specifier.charAt(i++) : c];
        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;
      } else if (c != string.charCodeAt(j++)) {
        return -1;
      }
    }

    return j;
  }

  function parsePeriod(d, string, i) {
    var n = periodRe.exec(string.slice(i));
    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseShortWeekday(d, string, i) {
    var n = shortWeekdayRe.exec(string.slice(i));
    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseWeekday(d, string, i) {
    var n = weekdayRe.exec(string.slice(i));
    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseShortMonth(d, string, i) {
    var n = shortMonthRe.exec(string.slice(i));
    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseMonth(d, string, i) {
    var n = monthRe.exec(string.slice(i));
    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseLocaleDateTime(d, string, i) {
    return parseSpecifier(d, locale_dateTime, string, i);
  }

  function parseLocaleDate(d, string, i) {
    return parseSpecifier(d, locale_date, string, i);
  }

  function parseLocaleTime(d, string, i) {
    return parseSpecifier(d, locale_time, string, i);
  }

  function formatShortWeekday(d) {
    return locale_shortWeekdays[d.getDay()];
  }

  function formatWeekday(d) {
    return locale_weekdays[d.getDay()];
  }

  function formatShortMonth(d) {
    return locale_shortMonths[d.getMonth()];
  }

  function formatMonth(d) {
    return locale_months[d.getMonth()];
  }

  function formatPeriod(d) {
    return locale_periods[+(d.getHours() >= 12)];
  }

  function formatUTCShortWeekday(d) {
    return locale_shortWeekdays[d.getUTCDay()];
  }

  function formatUTCWeekday(d) {
    return locale_weekdays[d.getUTCDay()];
  }

  function formatUTCShortMonth(d) {
    return locale_shortMonths[d.getUTCMonth()];
  }

  function formatUTCMonth(d) {
    return locale_months[d.getUTCMonth()];
  }

  function formatUTCPeriod(d) {
    return locale_periods[+(d.getUTCHours() >= 12)];
  }

  return {
    format: function(specifier) {
      var f = newFormat(specifier += "", formats);
      f.toString = function() { return specifier; };
      return f;
    },
    parse: function(specifier) {
      var p = newParse(specifier += "", localDate);
      p.toString = function() { return specifier; };
      return p;
    },
    utcFormat: function(specifier) {
      var f = newFormat(specifier += "", utcFormats);
      f.toString = function() { return specifier; };
      return f;
    },
    utcParse: function(specifier) {
      var p = newParse(specifier, utcDate);
      p.toString = function() { return specifier; };
      return p;
    }
  };
}

var pads = {"-": "", "_": " ", "0": "0"};
var numberRe = /^\s*\d+/;
var percentRe = /^%/;
var requoteRe = /[\\^$*+?|[\]().{}]/g;

function pad(value, fill, width) {
  var sign = value < 0 ? "-" : "",
      string = (sign ? -value : value) + "",
      length = string.length;
  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);
}

function requote(s) {
  return s.replace(requoteRe, "\\$&");
}

function formatRe(names) {
  return new RegExp("^(?:" + names.map(requote).join("|") + ")", "i");
}

function formatLookup(names) {
  var map = {}, i = -1, n = names.length;
  while (++i < n) map[names[i].toLowerCase()] = i;
  return map;
}

function parseWeekdayNumberSunday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 1));
  return n ? (d.w = +n[0], i + n[0].length) : -1;
}

function parseWeekdayNumberMonday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 1));
  return n ? (d.u = +n[0], i + n[0].length) : -1;
}

function parseWeekNumberSunday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.U = +n[0], i + n[0].length) : -1;
}

function parseWeekNumberISO(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.V = +n[0], i + n[0].length) : -1;
}

function parseWeekNumberMonday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.W = +n[0], i + n[0].length) : -1;
}

function parseFullYear(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 4));
  return n ? (d.y = +n[0], i + n[0].length) : -1;
}

function parseYear(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;
}

function parseZone(d, string, i) {
  var n = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i, i + 6));
  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || "00")), i + n[0].length) : -1;
}

function parseMonthNumber(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;
}

function parseDayOfMonth(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.d = +n[0], i + n[0].length) : -1;
}

function parseDayOfYear(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 3));
  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;
}

function parseHour24(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.H = +n[0], i + n[0].length) : -1;
}

function parseMinutes(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.M = +n[0], i + n[0].length) : -1;
}

function parseSeconds(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.S = +n[0], i + n[0].length) : -1;
}

function parseMilliseconds(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 3));
  return n ? (d.L = +n[0], i + n[0].length) : -1;
}

function parseMicroseconds(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 6));
  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;
}

function parseLiteralPercent(d, string, i) {
  var n = percentRe.exec(string.slice(i, i + 1));
  return n ? i + n[0].length : -1;
}

function parseUnixTimestamp(d, string, i) {
  var n = numberRe.exec(string.slice(i));
  return n ? (d.Q = +n[0], i + n[0].length) : -1;
}

function parseUnixTimestampSeconds(d, string, i) {
  var n = numberRe.exec(string.slice(i));
  return n ? (d.Q = (+n[0]) * 1000, i + n[0].length) : -1;
}

function formatDayOfMonth(d, p) {
  return pad(d.getDate(), p, 2);
}

function formatHour24(d, p) {
  return pad(d.getHours(), p, 2);
}

function formatHour12(d, p) {
  return pad(d.getHours() % 12 || 12, p, 2);
}

function formatDayOfYear(d, p) {
  return pad(1 + d3Time.timeDay.count(d3Time.timeYear(d), d), p, 3);
}

function formatMilliseconds(d, p) {
  return pad(d.getMilliseconds(), p, 3);
}

function formatMicroseconds(d, p) {
  return formatMilliseconds(d, p) + "000";
}

function formatMonthNumber(d, p) {
  return pad(d.getMonth() + 1, p, 2);
}

function formatMinutes(d, p) {
  return pad(d.getMinutes(), p, 2);
}

function formatSeconds(d, p) {
  return pad(d.getSeconds(), p, 2);
}

function formatWeekdayNumberMonday(d) {
  var day = d.getDay();
  return day === 0 ? 7 : day;
}

function formatWeekNumberSunday(d, p) {
  return pad(d3Time.timeSunday.count(d3Time.timeYear(d), d), p, 2);
}

function formatWeekNumberISO(d, p) {
  var day = d.getDay();
  d = (day >= 4 || day === 0) ? d3Time.timeThursday(d) : d3Time.timeThursday.ceil(d);
  return pad(d3Time.timeThursday.count(d3Time.timeYear(d), d) + (d3Time.timeYear(d).getDay() === 4), p, 2);
}

function formatWeekdayNumberSunday(d) {
  return d.getDay();
}

function formatWeekNumberMonday(d, p) {
  return pad(d3Time.timeMonday.count(d3Time.timeYear(d), d), p, 2);
}

function formatYear(d, p) {
  return pad(d.getFullYear() % 100, p, 2);
}

function formatFullYear(d, p) {
  return pad(d.getFullYear() % 10000, p, 4);
}

function formatZone(d) {
  var z = d.getTimezoneOffset();
  return (z > 0 ? "-" : (z *= -1, "+"))
      + pad(z / 60 | 0, "0", 2)
      + pad(z % 60, "0", 2);
}

function formatUTCDayOfMonth(d, p) {
  return pad(d.getUTCDate(), p, 2);
}

function formatUTCHour24(d, p) {
  return pad(d.getUTCHours(), p, 2);
}

function formatUTCHour12(d, p) {
  return pad(d.getUTCHours() % 12 || 12, p, 2);
}

function formatUTCDayOfYear(d, p) {
  return pad(1 + d3Time.utcDay.count(d3Time.utcYear(d), d), p, 3);
}

function formatUTCMilliseconds(d, p) {
  return pad(d.getUTCMilliseconds(), p, 3);
}

function formatUTCMicroseconds(d, p) {
  return formatUTCMilliseconds(d, p) + "000";
}

function formatUTCMonthNumber(d, p) {
  return pad(d.getUTCMonth() + 1, p, 2);
}

function formatUTCMinutes(d, p) {
  return pad(d.getUTCMinutes(), p, 2);
}

function formatUTCSeconds(d, p) {
  return pad(d.getUTCSeconds(), p, 2);
}

function formatUTCWeekdayNumberMonday(d) {
  var dow = d.getUTCDay();
  return dow === 0 ? 7 : dow;
}

function formatUTCWeekNumberSunday(d, p) {
  return pad(d3Time.utcSunday.count(d3Time.utcYear(d), d), p, 2);
}

function formatUTCWeekNumberISO(d, p) {
  var day = d.getUTCDay();
  d = (day >= 4 || day === 0) ? d3Time.utcThursday(d) : d3Time.utcThursday.ceil(d);
  return pad(d3Time.utcThursday.count(d3Time.utcYear(d), d) + (d3Time.utcYear(d).getUTCDay() === 4), p, 2);
}

function formatUTCWeekdayNumberSunday(d) {
  return d.getUTCDay();
}

function formatUTCWeekNumberMonday(d, p) {
  return pad(d3Time.utcMonday.count(d3Time.utcYear(d), d), p, 2);
}

function formatUTCYear(d, p) {
  return pad(d.getUTCFullYear() % 100, p, 2);
}

function formatUTCFullYear(d, p) {
  return pad(d.getUTCFullYear() % 10000, p, 4);
}

function formatUTCZone() {
  return "+0000";
}

function formatLiteralPercent() {
  return "%";
}

function formatUnixTimestamp(d) {
  return +d;
}

function formatUnixTimestampSeconds(d) {
  return Math.floor(+d / 1000);
}

var locale;





defaultLocale({
  dateTime: "%x, %X",
  date: "%-m/%-d/%Y",
  time: "%-I:%M:%S %p",
  periods: ["AM", "PM"],
  days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
  shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
  shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
});

function defaultLocale(definition) {
  locale = formatLocale(definition);
  exports.timeFormat = locale.format;
  exports.timeParse = locale.parse;
  exports.utcFormat = locale.utcFormat;
  exports.utcParse = locale.utcParse;
  return locale;
}

var isoSpecifier = "%Y-%m-%dT%H:%M:%S.%LZ";

function formatIsoNative(date) {
  return date.toISOString();
}

var formatIso = Date.prototype.toISOString
    ? formatIsoNative
    : exports.utcFormat(isoSpecifier);

function parseIsoNative(string) {
  var date = new Date(string);
  return isNaN(date) ? null : date;
}

var parseIso = +new Date("2000-01-01T00:00:00.000Z")
    ? parseIsoNative
    : exports.utcParse(isoSpecifier);

exports.timeFormatDefaultLocale = defaultLocale;
exports.timeFormatLocale = formatLocale;
exports.isoFormat = formatIso;
exports.isoParse = parseIso;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{"d3-time":24}],24:[function(require,module,exports){
// https://d3js.org/d3-time/ Version 1.0.8. Copyright 2017 Mike Bostock.
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
	typeof define === 'function' && define.amd ? define(['exports'], factory) :
	(factory((global.d3 = global.d3 || {})));
}(this, (function (exports) { 'use strict';

var t0 = new Date;
var t1 = new Date;

function newInterval(floori, offseti, count, field) {

  function interval(date) {
    return floori(date = new Date(+date)), date;
  }

  interval.floor = interval;

  interval.ceil = function(date) {
    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;
  };

  interval.round = function(date) {
    var d0 = interval(date),
        d1 = interval.ceil(date);
    return date - d0 < d1 - date ? d0 : d1;
  };

  interval.offset = function(date, step) {
    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;
  };

  interval.range = function(start, stop, step) {
    var range = [], previous;
    start = interval.ceil(start);
    step = step == null ? 1 : Math.floor(step);
    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date
    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);
    while (previous < start && start < stop);
    return range;
  };

  interval.filter = function(test) {
    return newInterval(function(date) {
      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);
    }, function(date, step) {
      if (date >= date) {
        if (step < 0) while (++step <= 0) {
          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty
        } else while (--step >= 0) {
          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty
        }
      }
    });
  };

  if (count) {
    interval.count = function(start, end) {
      t0.setTime(+start), t1.setTime(+end);
      floori(t0), floori(t1);
      return Math.floor(count(t0, t1));
    };

    interval.every = function(step) {
      step = Math.floor(step);
      return !isFinite(step) || !(step > 0) ? null
          : !(step > 1) ? interval
          : interval.filter(field
              ? function(d) { return field(d) % step === 0; }
              : function(d) { return interval.count(0, d) % step === 0; });
    };
  }

  return interval;
}

var millisecond = newInterval(function() {
  // noop
}, function(date, step) {
  date.setTime(+date + step);
}, function(start, end) {
  return end - start;
});

// An optimized implementation for this simple case.
millisecond.every = function(k) {
  k = Math.floor(k);
  if (!isFinite(k) || !(k > 0)) return null;
  if (!(k > 1)) return millisecond;
  return newInterval(function(date) {
    date.setTime(Math.floor(date / k) * k);
  }, function(date, step) {
    date.setTime(+date + step * k);
  }, function(start, end) {
    return (end - start) / k;
  });
};

var milliseconds = millisecond.range;

var durationSecond = 1e3;
var durationMinute = 6e4;
var durationHour = 36e5;
var durationDay = 864e5;
var durationWeek = 6048e5;

var second = newInterval(function(date) {
  date.setTime(Math.floor(date / durationSecond) * durationSecond);
}, function(date, step) {
  date.setTime(+date + step * durationSecond);
}, function(start, end) {
  return (end - start) / durationSecond;
}, function(date) {
  return date.getUTCSeconds();
});

var seconds = second.range;

var minute = newInterval(function(date) {
  date.setTime(Math.floor(date / durationMinute) * durationMinute);
}, function(date, step) {
  date.setTime(+date + step * durationMinute);
}, function(start, end) {
  return (end - start) / durationMinute;
}, function(date) {
  return date.getMinutes();
});

var minutes = minute.range;

var hour = newInterval(function(date) {
  var offset = date.getTimezoneOffset() * durationMinute % durationHour;
  if (offset < 0) offset += durationHour;
  date.setTime(Math.floor((+date - offset) / durationHour) * durationHour + offset);
}, function(date, step) {
  date.setTime(+date + step * durationHour);
}, function(start, end) {
  return (end - start) / durationHour;
}, function(date) {
  return date.getHours();
});

var hours = hour.range;

var day = newInterval(function(date) {
  date.setHours(0, 0, 0, 0);
}, function(date, step) {
  date.setDate(date.getDate() + step);
}, function(start, end) {
  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;
}, function(date) {
  return date.getDate() - 1;
});

var days = day.range;

function weekday(i) {
  return newInterval(function(date) {
    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);
    date.setHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setDate(date.getDate() + step * 7);
  }, function(start, end) {
    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;
  });
}

var sunday = weekday(0);
var monday = weekday(1);
var tuesday = weekday(2);
var wednesday = weekday(3);
var thursday = weekday(4);
var friday = weekday(5);
var saturday = weekday(6);

var sundays = sunday.range;
var mondays = monday.range;
var tuesdays = tuesday.range;
var wednesdays = wednesday.range;
var thursdays = thursday.range;
var fridays = friday.range;
var saturdays = saturday.range;

var month = newInterval(function(date) {
  date.setDate(1);
  date.setHours(0, 0, 0, 0);
}, function(date, step) {
  date.setMonth(date.getMonth() + step);
}, function(start, end) {
  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;
}, function(date) {
  return date.getMonth();
});

var months = month.range;

var year = newInterval(function(date) {
  date.setMonth(0, 1);
  date.setHours(0, 0, 0, 0);
}, function(date, step) {
  date.setFullYear(date.getFullYear() + step);
}, function(start, end) {
  return end.getFullYear() - start.getFullYear();
}, function(date) {
  return date.getFullYear();
});

// An optimized implementation for this simple case.
year.every = function(k) {
  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : newInterval(function(date) {
    date.setFullYear(Math.floor(date.getFullYear() / k) * k);
    date.setMonth(0, 1);
    date.setHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setFullYear(date.getFullYear() + step * k);
  });
};

var years = year.range;

var utcMinute = newInterval(function(date) {
  date.setUTCSeconds(0, 0);
}, function(date, step) {
  date.setTime(+date + step * durationMinute);
}, function(start, end) {
  return (end - start) / durationMinute;
}, function(date) {
  return date.getUTCMinutes();
});

var utcMinutes = utcMinute.range;

var utcHour = newInterval(function(date) {
  date.setUTCMinutes(0, 0, 0);
}, function(date, step) {
  date.setTime(+date + step * durationHour);
}, function(start, end) {
  return (end - start) / durationHour;
}, function(date) {
  return date.getUTCHours();
});

var utcHours = utcHour.range;

var utcDay = newInterval(function(date) {
  date.setUTCHours(0, 0, 0, 0);
}, function(date, step) {
  date.setUTCDate(date.getUTCDate() + step);
}, function(start, end) {
  return (end - start) / durationDay;
}, function(date) {
  return date.getUTCDate() - 1;
});

var utcDays = utcDay.range;

function utcWeekday(i) {
  return newInterval(function(date) {
    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);
    date.setUTCHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setUTCDate(date.getUTCDate() + step * 7);
  }, function(start, end) {
    return (end - start) / durationWeek;
  });
}

var utcSunday = utcWeekday(0);
var utcMonday = utcWeekday(1);
var utcTuesday = utcWeekday(2);
var utcWednesday = utcWeekday(3);
var utcThursday = utcWeekday(4);
var utcFriday = utcWeekday(5);
var utcSaturday = utcWeekday(6);

var utcSundays = utcSunday.range;
var utcMondays = utcMonday.range;
var utcTuesdays = utcTuesday.range;
var utcWednesdays = utcWednesday.range;
var utcThursdays = utcThursday.range;
var utcFridays = utcFriday.range;
var utcSaturdays = utcSaturday.range;

var utcMonth = newInterval(function(date) {
  date.setUTCDate(1);
  date.setUTCHours(0, 0, 0, 0);
}, function(date, step) {
  date.setUTCMonth(date.getUTCMonth() + step);
}, function(start, end) {
  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;
}, function(date) {
  return date.getUTCMonth();
});

var utcMonths = utcMonth.range;

var utcYear = newInterval(function(date) {
  date.setUTCMonth(0, 1);
  date.setUTCHours(0, 0, 0, 0);
}, function(date, step) {
  date.setUTCFullYear(date.getUTCFullYear() + step);
}, function(start, end) {
  return end.getUTCFullYear() - start.getUTCFullYear();
}, function(date) {
  return date.getUTCFullYear();
});

// An optimized implementation for this simple case.
utcYear.every = function(k) {
  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : newInterval(function(date) {
    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);
    date.setUTCMonth(0, 1);
    date.setUTCHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setUTCFullYear(date.getUTCFullYear() + step * k);
  });
};

var utcYears = utcYear.range;

exports.timeInterval = newInterval;
exports.timeMillisecond = millisecond;
exports.timeMilliseconds = milliseconds;
exports.utcMillisecond = millisecond;
exports.utcMilliseconds = milliseconds;
exports.timeSecond = second;
exports.timeSeconds = seconds;
exports.utcSecond = second;
exports.utcSeconds = seconds;
exports.timeMinute = minute;
exports.timeMinutes = minutes;
exports.timeHour = hour;
exports.timeHours = hours;
exports.timeDay = day;
exports.timeDays = days;
exports.timeWeek = sunday;
exports.timeWeeks = sundays;
exports.timeSunday = sunday;
exports.timeSundays = sundays;
exports.timeMonday = monday;
exports.timeMondays = mondays;
exports.timeTuesday = tuesday;
exports.timeTuesdays = tuesdays;
exports.timeWednesday = wednesday;
exports.timeWednesdays = wednesdays;
exports.timeThursday = thursday;
exports.timeThursdays = thursdays;
exports.timeFriday = friday;
exports.timeFridays = fridays;
exports.timeSaturday = saturday;
exports.timeSaturdays = saturdays;
exports.timeMonth = month;
exports.timeMonths = months;
exports.timeYear = year;
exports.timeYears = years;
exports.utcMinute = utcMinute;
exports.utcMinutes = utcMinutes;
exports.utcHour = utcHour;
exports.utcHours = utcHours;
exports.utcDay = utcDay;
exports.utcDays = utcDays;
exports.utcWeek = utcSunday;
exports.utcWeeks = utcSundays;
exports.utcSunday = utcSunday;
exports.utcSundays = utcSundays;
exports.utcMonday = utcMonday;
exports.utcMondays = utcMondays;
exports.utcTuesday = utcTuesday;
exports.utcTuesdays = utcTuesdays;
exports.utcWednesday = utcWednesday;
exports.utcWednesdays = utcWednesdays;
exports.utcThursday = utcThursday;
exports.utcThursdays = utcThursdays;
exports.utcFriday = utcFriday;
exports.utcFridays = utcFridays;
exports.utcSaturday = utcSaturday;
exports.utcSaturdays = utcSaturdays;
exports.utcMonth = utcMonth;
exports.utcMonths = utcMonths;
exports.utcYear = utcYear;
exports.utcYears = utcYears;

Object.defineProperty(exports, '__esModule', { value: true });

})));

},{}],25:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

function EventEmitter() {
  this._events = this._events || {};
  this._maxListeners = this._maxListeners || undefined;
}
module.exports = EventEmitter;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
EventEmitter.defaultMaxListeners = 10;

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function(n) {
  if (!isNumber(n) || n < 0 || isNaN(n))
    throw TypeError('n must be a positive number');
  this._maxListeners = n;
  return this;
};

EventEmitter.prototype.emit = function(type) {
  var er, handler, len, args, i, listeners;

  if (!this._events)
    this._events = {};

  // If there is no 'error' event listener then throw.
  if (type === 'error') {
    if (!this._events.error ||
        (isObject(this._events.error) && !this._events.error.length)) {
      er = arguments[1];
      if (er instanceof Error) {
        throw er; // Unhandled 'error' event
      } else {
        // At least give some kind of context to the user
        var err = new Error('Uncaught, unspecified "error" event. (' + er + ')');
        err.context = er;
        throw err;
      }
    }
  }

  handler = this._events[type];

  if (isUndefined(handler))
    return false;

  if (isFunction(handler)) {
    switch (arguments.length) {
      // fast cases
      case 1:
        handler.call(this);
        break;
      case 2:
        handler.call(this, arguments[1]);
        break;
      case 3:
        handler.call(this, arguments[1], arguments[2]);
        break;
      // slower
      default:
        args = Array.prototype.slice.call(arguments, 1);
        handler.apply(this, args);
    }
  } else if (isObject(handler)) {
    args = Array.prototype.slice.call(arguments, 1);
    listeners = handler.slice();
    len = listeners.length;
    for (i = 0; i < len; i++)
      listeners[i].apply(this, args);
  }

  return true;
};

EventEmitter.prototype.addListener = function(type, listener) {
  var m;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events)
    this._events = {};

  // To avoid recursion in the case that type === "newListener"! Before
  // adding it to the listeners, first emit "newListener".
  if (this._events.newListener)
    this.emit('newListener', type,
              isFunction(listener.listener) ?
              listener.listener : listener);

  if (!this._events[type])
    // Optimize the case of one listener. Don't need the extra array object.
    this._events[type] = listener;
  else if (isObject(this._events[type]))
    // If we've already got an array, just append.
    this._events[type].push(listener);
  else
    // Adding the second element, need to change to array.
    this._events[type] = [this._events[type], listener];

  // Check for listener leak
  if (isObject(this._events[type]) && !this._events[type].warned) {
    if (!isUndefined(this._maxListeners)) {
      m = this._maxListeners;
    } else {
      m = EventEmitter.defaultMaxListeners;
    }

    if (m && m > 0 && this._events[type].length > m) {
      this._events[type].warned = true;
      console.error('(node) warning: possible EventEmitter memory ' +
                    'leak detected. %d listeners added. ' +
                    'Use emitter.setMaxListeners() to increase limit.',
                    this._events[type].length);
      if (typeof console.trace === 'function') {
        // not supported in IE 10
        console.trace();
      }
    }
  }

  return this;
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.once = function(type, listener) {
  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  var fired = false;

  function g() {
    this.removeListener(type, g);

    if (!fired) {
      fired = true;
      listener.apply(this, arguments);
    }
  }

  g.listener = listener;
  this.on(type, g);

  return this;
};

// emits a 'removeListener' event iff the listener was removed
EventEmitter.prototype.removeListener = function(type, listener) {
  var list, position, length, i;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events || !this._events[type])
    return this;

  list = this._events[type];
  length = list.length;
  position = -1;

  if (list === listener ||
      (isFunction(list.listener) && list.listener === listener)) {
    delete this._events[type];
    if (this._events.removeListener)
      this.emit('removeListener', type, listener);

  } else if (isObject(list)) {
    for (i = length; i-- > 0;) {
      if (list[i] === listener ||
          (list[i].listener && list[i].listener === listener)) {
        position = i;
        break;
      }
    }

    if (position < 0)
      return this;

    if (list.length === 1) {
      list.length = 0;
      delete this._events[type];
    } else {
      list.splice(position, 1);
    }

    if (this._events.removeListener)
      this.emit('removeListener', type, listener);
  }

  return this;
};

EventEmitter.prototype.removeAllListeners = function(type) {
  var key, listeners;

  if (!this._events)
    return this;

  // not listening for removeListener, no need to emit
  if (!this._events.removeListener) {
    if (arguments.length === 0)
      this._events = {};
    else if (this._events[type])
      delete this._events[type];
    return this;
  }

  // emit removeListener for all listeners on all events
  if (arguments.length === 0) {
    for (key in this._events) {
      if (key === 'removeListener') continue;
      this.removeAllListeners(key);
    }
    this.removeAllListeners('removeListener');
    this._events = {};
    return this;
  }

  listeners = this._events[type];

  if (isFunction(listeners)) {
    this.removeListener(type, listeners);
  } else if (listeners) {
    // LIFO order
    while (listeners.length)
      this.removeListener(type, listeners[listeners.length - 1]);
  }
  delete this._events[type];

  return this;
};

EventEmitter.prototype.listeners = function(type) {
  var ret;
  if (!this._events || !this._events[type])
    ret = [];
  else if (isFunction(this._events[type]))
    ret = [this._events[type]];
  else
    ret = this._events[type].slice();
  return ret;
};

EventEmitter.prototype.listenerCount = function(type) {
  if (this._events) {
    var evlistener = this._events[type];

    if (isFunction(evlistener))
      return 1;
    else if (evlistener)
      return evlistener.length;
  }
  return 0;
};

EventEmitter.listenerCount = function(emitter, type) {
  return emitter.listenerCount(type);
};

function isFunction(arg) {
  return typeof arg === 'function';
}

function isNumber(arg) {
  return typeof arg === 'number';
}

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}

function isUndefined(arg) {
  return arg === void 0;
}

},{}],26:[function(require,module,exports){
(function (process){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// resolves . and .. elements in a path array with directory names there
// must be no slashes, empty elements, or device names (c:\) in the array
// (so also no leading and trailing slashes - it does not distinguish
// relative and absolute paths)
function normalizeArray(parts, allowAboveRoot) {
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = parts.length - 1; i >= 0; i--) {
    var last = parts[i];
    if (last === '.') {
      parts.splice(i, 1);
    } else if (last === '..') {
      parts.splice(i, 1);
      up++;
    } else if (up) {
      parts.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (allowAboveRoot) {
    for (; up--; up) {
      parts.unshift('..');
    }
  }

  return parts;
}

// Split a filename into [root, dir, basename, ext], unix version
// 'root' is just a slash, or nothing.
var splitPathRe =
    /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;
var splitPath = function(filename) {
  return splitPathRe.exec(filename).slice(1);
};

// path.resolve([from ...], to)
// posix version
exports.resolve = function() {
  var resolvedPath = '',
      resolvedAbsolute = false;

  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {
    var path = (i >= 0) ? arguments[i] : process.cwd();

    // Skip empty and invalid entries
    if (typeof path !== 'string') {
      throw new TypeError('Arguments to path.resolve must be strings');
    } else if (!path) {
      continue;
    }

    resolvedPath = path + '/' + resolvedPath;
    resolvedAbsolute = path.charAt(0) === '/';
  }

  // At this point the path should be resolved to a full absolute path, but
  // handle relative paths to be safe (might happen when process.cwd() fails)

  // Normalize the path
  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {
    return !!p;
  }), !resolvedAbsolute).join('/');

  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';
};

// path.normalize(path)
// posix version
exports.normalize = function(path) {
  var isAbsolute = exports.isAbsolute(path),
      trailingSlash = substr(path, -1) === '/';

  // Normalize the path
  path = normalizeArray(filter(path.split('/'), function(p) {
    return !!p;
  }), !isAbsolute).join('/');

  if (!path && !isAbsolute) {
    path = '.';
  }
  if (path && trailingSlash) {
    path += '/';
  }

  return (isAbsolute ? '/' : '') + path;
};

// posix version
exports.isAbsolute = function(path) {
  return path.charAt(0) === '/';
};

// posix version
exports.join = function() {
  var paths = Array.prototype.slice.call(arguments, 0);
  return exports.normalize(filter(paths, function(p, index) {
    if (typeof p !== 'string') {
      throw new TypeError('Arguments to path.join must be strings');
    }
    return p;
  }).join('/'));
};


// path.relative(from, to)
// posix version
exports.relative = function(from, to) {
  from = exports.resolve(from).substr(1);
  to = exports.resolve(to).substr(1);

  function trim(arr) {
    var start = 0;
    for (; start < arr.length; start++) {
      if (arr[start] !== '') break;
    }

    var end = arr.length - 1;
    for (; end >= 0; end--) {
      if (arr[end] !== '') break;
    }

    if (start > end) return [];
    return arr.slice(start, end - start + 1);
  }

  var fromParts = trim(from.split('/'));
  var toParts = trim(to.split('/'));

  var length = Math.min(fromParts.length, toParts.length);
  var samePartsLength = length;
  for (var i = 0; i < length; i++) {
    if (fromParts[i] !== toParts[i]) {
      samePartsLength = i;
      break;
    }
  }

  var outputParts = [];
  for (var i = samePartsLength; i < fromParts.length; i++) {
    outputParts.push('..');
  }

  outputParts = outputParts.concat(toParts.slice(samePartsLength));

  return outputParts.join('/');
};

exports.sep = '/';
exports.delimiter = ':';

exports.dirname = function(path) {
  var result = splitPath(path),
      root = result[0],
      dir = result[1];

  if (!root && !dir) {
    // No dirname whatsoever
    return '.';
  }

  if (dir) {
    // It has a dirname, strip trailing slash
    dir = dir.substr(0, dir.length - 1);
  }

  return root + dir;
};


exports.basename = function(path, ext) {
  var f = splitPath(path)[2];
  // TODO: make this comparison case-insensitive on windows?
  if (ext && f.substr(-1 * ext.length) === ext) {
    f = f.substr(0, f.length - ext.length);
  }
  return f;
};


exports.extname = function(path) {
  return splitPath(path)[3];
};

function filter (xs, f) {
    if (xs.filter) return xs.filter(f);
    var res = [];
    for (var i = 0; i < xs.length; i++) {
        if (f(xs[i], i, xs)) res.push(xs[i]);
    }
    return res;
}

// String.prototype.substr - negative index don't work in IE8
var substr = 'ab'.substr(-1) === 'b'
    ? function (str, start, len) { return str.substr(start, len) }
    : function (str, start, len) {
        if (start < 0) start = str.length + start;
        return str.substr(start, len);
    }
;

}).call(this,require('_process'))
},{"_process":27}],27:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}]},{},[9]);
</script>
      </html>
    